<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: On-demand resources</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/ios-ondemand-resources.html">English</a></li>
<li><a href="/cn/current/Manual/ios-ondemand-resources.html">中文</a></li>
<li><a href="/ja/current/Manual/ios-ondemand-resources.html">日本語</a></li>
<li><a href="/kr/current/Manual/ios-ondemand-resources.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/ios-ondemand-resources.html">English</a></li>
<li><a href="/cn/current/Manual/ios-ondemand-resources.html">中文</a></li>
<li><a href="/ja/current/Manual/ios-ondemand-resources.html">日本語</a></li>
<li><a href="/kr/current/Manual/ios-ondemand-resources.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="PlatformSpecific.html">Platform development  </a></li>
<li><a href="iphone.html">iOS</a></li>
<li><a href="ios-building-and-delivering.html">Building and delivering for iOS</a></li>
<li><a href="AppThinning.html">App thinning</a></li>
<li>On-demand resources</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="AppThinning.html"></a></span><div class="tip">App thinning</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="ios-app-slicing.html"></a></span><div class="tip">App slicing</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>On-demand resources</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>On-demand resources (ODR) is a feature available for iOS and tvOS that lets you reduce the size of your application. The reduction occurs by separating the core assets needed from the application startup from assets that are optional or appear in later parts of your game.
These additional Assets, known as <a href="AssetBundlesIntro.html">AssetBundles</a>, are available across all Unity build targets. However, you must take extra steps to enable them for hosting on the App Store.</p>

<p>AssetBundles can contain Asset files such as models, materials, textures, and <span class="tooltip"><strong>scenes</strong><span class="tooltiptext">A Scene contains the environments and menus of your game. Think of each unique Scene file as a unique level. In each Scene, you place your environments, obstacles, and decorations, essentially designing and building your game in pieces. <a class="tooltipMoreInfoLink" href="CreatingScenes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#Scene">Glossary</a></span></span></span>, but they can’t include <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scripts">Glossary</a></span></span></span>. For this reason, store your scripting logic in the main application. The recommended best practice is that an AssetBundle is at most 64MB in size. This helps to reduce load time and minimizes storage space used on the device.</p>

<h2>Enable on-demand resources</h2>

<p>To set up your project to use <span class="tooltip"><strong>ODR</strong><span class="tooltiptext">On-demand resources (ODR) is a feature available for the iOS and tvOS platforms, from version 9.0 of iOS and tvOS onwards. It allows you to reduce the size of your application by separating the core assets (those that are needed from application startup) from assets which may be optional, or which appear in later levels of your game. <a class="tooltipMoreInfoLink" href="AppThinning.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#ODR">Glossary</a></span></span></span>, use the following steps:</p>

<ol>
<li>Navigate to <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong> &gt; <strong>iOS</strong> &gt; <strong>Other Settings</strong>.</li>
<li>In the Configuration section, enable <strong>Use on-demand resources</strong>.</li>
</ol>

<p><a name="create-asset-bundle"></a></p>

<h2>Create an AssetBundle</h2>

<p>To create an AssetBundle, use the following steps:</p>

<ol>
<li>Create a new folder to group the Assets you want to place into an AssetBundle. To do this, right-click inside the <strong>Assets</strong> folder in the Project window and go to <strong>Create</strong> &gt; <strong>Folder</strong>.</li>
<li>Give the new folder a name.</li>
<li>Select the Asset files you want to add to the AssetBundle, then drag them into your new folder.</li>
<li>In the new folder, create three additional folders named <code>Bundles</code>, <code>ODR</code>, and <code>Editor</code>.</li>
</ol>

<h3>Tag an AssetBundle</h3>

<p>When creating an AssetBundle, you must assign a tag to identify it when requesting the AssetBundle download. It’s recommended to create a label that matches the bundle’s file name.</p>

<p>To create and assign a tag, use the following steps:</p>

<ol>
<li>Select the folder where you are grouping your assets.</li>
<li>In the <span class="tooltip"><strong>Inspector</strong><span class="tooltiptext">A Unity window that displays information about the currently selected GameObject, asset or project settings, allowing you to inspect and edit the values. <a class="tooltipMoreInfoLink" href="UsingTheInspector.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Inspector">Glossary</a></span></span></span> window, in the <strong>Asset Labels</strong> section, click the left-hand drop-down menu and select <strong>New</strong>.</li>
<li>Enter the name of your new label in lowercase.</li>
</ol>

<p><img src="../uploads/Main/tag-asset-bundle.png" alt="Add a tag to an AssetBundle."></p>

<p>To generate the new AssetBundle file, you must reference the new label in an Editor script. To create an Editor script, use the following steps:
1. Right-click on the Editor folder and select <strong>Create</strong> &gt; <strong>C# Script</strong>.
1. Name the new script <code>BuildiOSAssetBundles</code>.</p>

<p>Open <code>BuildiOSAssetBundles.cs</code> and copy in the following code example. In this example, the label <code>textures</code> is used. Change this throughout with the name of your label in lowercase.</p>

<p>
<strong>Note</strong>: This example uses uncompressed bundles, but this isn’t a requirement to use app thinning.</p>

<pre><code class="lang-csharp">using UnityEngine;
using UnityEditor;


public class BuildiOSAssetBundles : MonoBehaviour
{
    [InitializeOnLoadMethod]
    static void SetupResourcesBuild( )
    {
        UnityEditor.iOS.BuildPipeline.collectResources += CollectResources;
    }

    static UnityEditor.iOS.Resource[] CollectResources( )
    {
        return new UnityEditor.iOS.Resource[]
        {
            new UnityEditor.iOS.Resource( &quot;textures&quot;, &quot;Assets/ODR/textures&quot; ).AddOnDemandResourceTags( &quot;textures&quot; ),
            new UnityEditor.iOS.Resource( &quot;bundle&quot;, &quot;Assets/Bundles/bundle.unity3d&quot; ).AddOnDemandResourceTags( &quot;bundle&quot; ),
        };
    }

    [MenuItem( &quot;Bundle/Build iOS AssetBundle&quot; )]
    static void BuildAssetBundles( )
    {
        var options = BuildAssetBundleOptions.None;

        bool shouldCheckODR = EditorUserBuildSettings.activeBuildTarget == BuildTarget.iOS;

#if UNITY_TVOS
            shouldCheckODR |= EditorUserBuildSettings.activeBuildTarget == BuildTarget.tvOS;
#endif

        if( shouldCheckODR )
        {
#if ENABLE_IOS_ON_DEMAND_RESOURCES
            if( PlayerSettings.iOS.useOnDemandResources )
                options |= BuildAssetBundleOptions.UncompressedAssetBundle;
#endif

#if ENABLE_IOS_APP_SLICING
            options |= BuildAssetBundleOptions.UncompressedAssetBundle;
#endif
        }

        BuildPipeline.BuildAssetBundles( &quot;Assets/ODR&quot;, options, EditorUserBuildSettings.activeBuildTarget );
    }

}
</code></pre>

<p>The following line in the previous code sample takes the files tagged with the textures label and creates an AssetBundle file named textures within the Assets/ODR folder:</p>

<pre><code class="lang-csharp">new UnityEditor.iOS.Resource( &quot;textures&quot;, &quot;Assets/ODR/textures&quot; ).AddOnDemandResourceTags( &quot;textures&quot; )
</code></pre>

<p>For demonstration purposes, the previous code sample also includes the following line, which adds an AssetBundle called bundle that’s already built - for example, from another project or a third-party vendor:</p>

<pre><code class="lang-csharp">new UnityEditor.iOS.Resource( &quot;bundle&quot;, &quot;Assets/Bundles/bundle.unity3d&quot; ).AddOnDemandResourceTags( &quot;bundle&quot; )
</code></pre>

<p>The whole code sample creates a new menu in the Unity Editor menu bar. Go to <strong>Bundle</strong> &gt; <strong>Build iOS AssetBundle</strong> to generate the AssetBundles in the ODR folder.</p>

<h2>Load the AssetBundle</h2>

<p>After you generate the AssetBundles, you must load them into the application.</p>

<p>Create a script in the Assets folder called <code>LoadBundle.cs</code> and copy in the following code example. This example script downloads the textures ODR AssetBundle and assigns it the public member of TextureBundle. </p>

<pre><code class="lang-csharp">using UnityEngine;
using UnityEngine.iOS;
using System;
using System.Collections;

public class LoadBundle : MonoBehaviour
{
    public AssetBundle     TextureBundle;


    void Start( )
    {
        LoadAssetAsync( &quot;textures&quot;, &quot;textures&quot; );
    }

    public async Awaitable LoadAssetAsync( string resourceName, string odrTag )
    {
        // Create the request
        using(OnDemandResourcesRequest request = OnDemandResources.PreloadAsync( new string[] { odrTag } ))
        {
            // Wait until request is completed
            await request;

            // Check for errors
            if( request.error != null )
                throw new Exception( &quot;ODR request failed: &quot; + request.error );

            TextureBundle = AssetBundle.LoadFromFile( &quot;res://&quot; + resourceName );
        }
    }
}
</code></pre>

<h2>Generate an Xcode project</h2>

<p>After you create and load the AssetBundles, you must complete the following steps:</p>

<ol>
<li>Create an <a href="https://developer.apple.com/documentation/xcode/creating-an-xcode-project-for-an-app">Xcode project</a>.</li>
<li>In Xcode, navigate to <strong>Build Settings</strong> &gt; <strong>Assets</strong>.</li>
<li>Set <strong>Embed Asset Packs In Product Bundle</strong> to <strong>No</strong>, and <strong>Enable On Demand Resources</strong> to <strong>Yes</strong>.</li>
<li>Build an iOS App Store package (IPA).</li>
<li>Upload the IPA to <a href="https://developer.apple.com/documentation/xcode/distributing-your-app-for-beta-testing-and-releases">App Store Connect’s TestFlight</a>.</li>
</ol>

<h2>Additional resources</h2>

<ul>
<li><a href="ios-app-slicing.html">App slicing</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="AppThinning.html"></a></span><div class="tip">App thinning</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="ios-app-slicing.html"></a></span><div class="tip">App slicing</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
