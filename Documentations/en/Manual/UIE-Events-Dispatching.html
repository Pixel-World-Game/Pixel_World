<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Dispatch events</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-Events-Dispatching.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-Events-Dispatching.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-Events-Dispatching.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-Events-Dispatching.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-Events-Dispatching.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-Events-Dispatching.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-Events-Dispatching.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-Events-Dispatching.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UIToolkits.html">User interface (UI)</a></li>
<li><a href="UIElements.html">UI Toolkit</a></li>
<li><a href="UIE-Events.html">Control behavior with events</a></li>
<li>Dispatch events</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-Events.html"></a></span><div class="tip">Control behavior with events</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-Events-Handling.html"></a></span><div class="tip">Handle events</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Dispatch events</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. Unity currently supports three UI systems. <a class="tooltipMoreInfoLink" href="UI-system-compare.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#UI">Glossary</a></span></span></span> Toolkit <span class="tooltip"><strong>event system</strong><span class="tooltiptext">A way of sending events to objects in the application based on input, be it keyboard, mouse, touch, or custom input. The Event System consists of a few components that work together to send events. <a href="EventSystem.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#EventSystem">Glossary</a></span></span></span> listens to events, coming from the operating system or <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#Scripts">Glossary</a></span></span></span>, and dispatches these events to <span class="tooltip"><strong>visual elements</strong><span class="tooltiptext">A node of a visual tree that instantiates or derives from the C# <a href="../ScriptReference/UIElements.VisualElement.html"><code>VisualElement</code></a> class. You can style the look, define the behaviour, and display it on screen as part of the UI. <a href="UIE-VisualTree.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Visualelement">Glossary</a></span></span></span> using the <a href="../ScriptReference/UIElements.EventDispatcher.html">EventDispatcher</a>. The event dispatcher determines an appropriate dispatching strategy for each event it sends. Once determined, the dispatcher executes the strategy.</p>

<p>Visual elements implement default behaviors for several events. This can involve the creation and execution of additional events. For example, a <code>MouseMoveEvent</code> could generate an additional <code>MouseEnterEvent</code> and a <code>MouseLeaveEvent</code>. These events enter a queue and process after the current event. For example, the <code>MouseMoveEvent</code> finishes processing before the <code>MouseEnterEvent</code> and <code>MouseLeaveEvent</code> events.</p>

<h2>Dispatch behavior of event types</h2>

<p>Each event type has its own dispatch behavior. The behavior of each event type breaks down into three stages:</p>

<ul>
<li>
<strong>Trickles down</strong>: Events sent to elements during the trickle down phase.</li>
<li>
<strong>Bubbles up</strong>: Events sent to elements during the bubble-up phase.</li>
<li>
<strong>Cancellable</strong>: Events that can have their default action execution cancelled, stopped, or prevented.</li>
</ul>

<p>For a list of dispatch behavior for each event type, see the <a href="UIE-Events-Reference.html">Event reference page</a>.</p>

<h2>Event propagation</h2>

<p>After the event dispatcher selects the event target, it computes the propagation path of the event. The propagation path is an ordered list of visual elements that receive the event. The propagation path occurs in the following order:</p>

<ol>
<li>The path starts at the root of the visual element tree and descends towards the target. This is the <strong>trickle-down phase</strong>.</li>
<li>The event target receives the event.</li>
<li>The event then ascends the tree towards the root. This is the <strong>bubble-up phase</strong>.</li>
</ol>

<figure>
<img src="../uploads/Main/UIElementsEvents.png" alt="Propagation path">
<figcaption>Propagation path</figcaption>
</figure>

<p>Most event types are sent to all elements along the propagation path. Some event types skip the bubble-up phase, and some event types are sent to the event target only.</p>

<p>If you hide or disable an element, it won’t receive events. Events still propagate to the ancestors and descendants of a hidden or disabled element.</p>

<p>As an event travels along the propagation path, <code>Event.currentTarget</code> updates to the element handling the event. Within an event callback function, there are two properties that log the dispatch behavior:</p>

<ul>
<li>
<code>Event.currentTarget</code> is the visual element on which the callback was registered.</li>
<li>
<code>Event.target</code> is the element where the event occurs, for example the element directly under the mouse.</li>
</ul>

<h2>Event target</h2>

<p>The target of an event depends on the event type. For mouse events, the target is most commonly the topmost pickable element, directly under the mouse. For keyboard events, the target is the element that has focus.</p>

<p>UI Toolkit events have a <code>target</code> property, containing a reference to the element where the event occurred. For most events that originate from the operating system, the dispatch process finds the event target automatically.</p>

<p>The target element is stored in <code>EventBase.target</code> and doesn’t change during the dispatch process. The property <code>Event.currentTarget</code> updates to the visual element currently handling the event.</p>

<h3>Picking mode and custom shapes</h3>

<p>Most mouse events use the picking mode to determine their target. The <code>VisualElement</code> class has a <code>pickingMode</code> property which supports the following values:</p>

<ul>
<li>
<code>PickingMode.Position</code> (default): performs picking based on the position rectangle.</li>
<li>
<code>PickingMode.Ignore</code>: prevents picking as the result of a mouse event.</li>
</ul>

<p>You can override the <code>VisualElement.ContainsPoint()</code> method to perform custom intersection logic.</p>

<h3>Capture the mouse</h3>

<p>After a <code>MouseDownEvent</code>, some elements must capture the pointer position to ensure it receives all subsequent mouse events, even when the cursor is no longer hovering over the element. For example, when you click on a button, slider, or a scroll bar.</p>

<p>To capture the mouse, call <code>element.CaptureMouse()</code> or <code>MouseCaptureController.CaptureMouse()</code>.</p>

<p>To release the mouse, call <code>MouseCaptureController.ReleaseMouse()</code>. If another element is already capturing the mouse when you call <code>CaptureMouse()</code>, the element receives a <code>MouseCaptureOutEvent</code>
and loses the capture.</p>

<p>Only one element in the application can have the capture at any moment. While an element has the capture, it’s the target of all subsequent mouse events except mouse wheel events. This only applies to mouse events that don’t already have a set target and rely on the dispatch process to determine the target.</p>

<p>For more information, see <a href="UIE-Capture-Events.html">Capture events</a>.</p>

<h3>Focus ring and the tab order</h3>

<p>Each UI Toolkit panel has a focus ring that defines the focus order of elements. By default, a depth-first search (DFS) on the visual element tree determines the focus order of elements. For example, the focus order for the tree depicted below would be F, B, A, D, C, E, G, I, H.</p>

<figure>
<img src="../uploads/Main/focus-order.png" alt="Focus order">
<figcaption>Focus order</figcaption>
</figure>

<p>Some events use the focus order to determine which element holds the focus. For example, the target for a keyboard event is the element in focus.</p>

<p>Use the <code>focusable</code> property to control whether a visual element is focusable. By default, <code>VisualElements</code> aren’t focusable, but some subclasses, such as <code>TextField</code>, might be focusable by default.</p>

<p>Use the <code>tabIndex</code> property to control the focus order as follows (<code>tabIndex</code> default value of 0) :</p>

<ul>
<li>If the <code>tabIndex</code> is negative, you can’t use tab on the element.</li>
<li>If the <code>tabIndex</code> is zero, the element keeps its default tab order, as determined by the focus ring algorithm.</li>
<li>If the <code>tabIndex</code> is positive, the element is placed in front of other elements that either have a zero <code>tabIndex</code> (<code>tabIndex = 0</code>) or a <code>tabIndex</code> value smaller than its own.</li>
</ul>

<h2>Additional resources</h2>

<ul>
<li><a href="UIE-Events-Handling.html">Handle events</a></li>
<li><a href="UIE-Events-Synthesizing.html">Synthesize and send events</a></li>
<li><a href="UIE-Events-Reference.html">Events reference</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-Events.html"></a></span><div class="tip">Control behavior with events</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-Events-Handling.html"></a></span><div class="tip">Handle events</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
