<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Capture events</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-Capture-Events.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-Capture-Events.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-Capture-Events.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-Capture-Events.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-Capture-Events.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-Capture-Events.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-Capture-Events.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-Capture-Events.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UIToolkits.html">User interface (UI)</a></li>
<li><a href="UIElements.html">UI Toolkit</a></li>
<li><a href="UIE-Events.html">Control behavior with events</a></li>
<li><a href="UIE-Events-Reference.html">Event reference</a></li>
<li>Capture events</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-Events-Reference.html"></a></span><div class="tip">Event reference</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-Change-Events.html"></a></span><div class="tip">Change events</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Capture events</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Capture events inform you of the changes in the mouse capture state. <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. Unity currently supports three UI systems. <a class="tooltipMoreInfoLink" href="UI-system-compare.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UI">Glossary</a></span></span></span> Toolkit has two types of capture events:</p>

<ul>
<li>Mouse capture events</li>
<li>Pointer capture events</li>
</ul>

<p>When an element captures the mouse or pointer, it’s the only element that receives events from the pointing device until the device releases or loses the capture.</p>

<p>For example, if you click in a text box, the text box captures the mouse. The mouse can still move around the screen, but it won’t trigger events outside of the text box. As long as the text box has your mouse captured, it won’t trigger other events. When the user presses a button on the mouse outside of the text box, the box releases its mouse capture.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Event</strong></th>
	<th style="text-align:left;"><strong>Description</strong></th>
	<th style="text-align:left;"><strong>Trickles down</strong></th>
	<th style="text-align:left;"><strong>Bubbles up</strong></th>
	<th style="text-align:left;"><strong>Cancellable</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><a href="../ScriptReference/UIElements.MouseCaptureEvent.html">MouseCaptureEvent</a></td>
	<td style="text-align:left;">Sent when an element takes the mouse capture.</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;"></td>
</tr>
<tr>
	<td style="text-align:left;"><a href="../ScriptReference/UIElements.MouseCaptureOutEvent.html">MouseCaptureOutEvent</a></td>
	<td style="text-align:left;">Sent when an element releases or otherwise loses the mouse capture.</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;"></td>
</tr>
<tr>
	<td style="text-align:left;"><a href="../ScriptReference/UIElements.PointerCaptureEvent.html">PointerCaptureEvent</a></td>
	<td style="text-align:left;">Sent when an element captures a pointer.</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;"></td>
</tr>
<tr>
	<td style="text-align:left;"><a href="../ScriptReference/UIElements.PointerCaptureOutEvent.html">PointerCaptureOutEvent</a></td>
	<td style="text-align:left;">Sent when an element releases a pointer.</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;">✔</td>
	<td style="text-align:left;"></td>
</tr>
</tbody>
</table>

<h2>Behavior</h2>

<h3>Mouse capture</h3>

<p>Mouse capture events refer to events on a physical mouse, or a virtual mouse emulating a physical mouse. Capturing a mouse will also result in a <code>PointerCaptureEvent</code> for the mouse pointer.</p>

<p>When an element releases a mouse capture, the corresponding <code>MouseCaptureOutEvent</code> triggers, with the target being the element that requested the release of the capture.</p>

<p>There can never be two elements that capture the mouse at the same time. If another <span class="tooltip"><strong>visual element</strong><span class="tooltiptext">A node of a visual tree that instantiates or derives from the C# <a class="tooltipMoreInfoLink" href="../ScriptReference/UIElements.VisualElement.html"><code>VisualElement</code></a> class. You can style the look, define the behaviour, and display it on screen as part of the UI. <a href="UIE-VisualTree.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Visualelement">Glossary</a></span></span></span> triggers a <code>MouseCaptureEvent</code>, the element that sent the original <code>MouseCaptureEvent</code> loses the capture. This also triggers a <code>MouseCaptureOutEvent</code> on the original element.</p>

<h3>Pointer capture</h3>

<p>Pointer events precede mouse events in UI Toolkit. If the pointer type is a mouse, capturing it will also trigger the corresponding mouse capture events. Capturing the pointer will also capture the mouse.</p>

<h2>Event list</h2>

<h3>MouseCaptureEvent</h3>

<p>A <code>MouseCaptureEvent</code> event is sent when an element takes the mouse capture.</p>

<p>
<strong><code>target</code></strong>: The element that takes the capture.</p>

<h3>MouseCaptureOutEvent</h3>

<p>A <code>MouseCaptureOutEvent</code> event is sent when an element releases, or loses the mouse capture.</p>

<p>
<strong><code>target</code></strong>: The element that loses the capture.</p>

<h3>PointerCaptureEvent</h3>

<p>A <code>PointerCaptureEvent</code> event is sent when an element takes the pointer capture.</p>

<p>
<strong><code>target</code></strong>: The element that takes the capture.</p>

<h3>PointerCaptureOutEvent</h3>

<p>A <code>PointerCaptureOutEvent</code> event is sent when an element releases, or loses the pointer capture.</p>

<p>
<strong><code>target</code></strong>: The element that loses the capture.</p>

<h2>Examples</h2>

<p>The following example demonstrates the behavior of the capture events, and capturing and releasing pointers.</p>

<p>To see the example in action, do the following:</p>

<ol>
<li>Under <strong>Assets &gt; Scripts &gt; Editor</strong>, create a new C# file called CaptureEventsTestWindow.cs</li>
<li>Copy the example into the C# script.</li>
<li>From the Editor Toolbar, select <strong>Window &gt; UI Toolkit &gt; Capture Events Test Window</strong>.</li>
<li>Click on the various labels in the dialog window, and watch the console for the output.</li>
</ol>

<pre><code class="lang-csharp">using UnityEditor;
using UnityEngine;
using UnityEngine.UIElements;

public class CaptureEventsTestWindow : EditorWindow
{
    [MenuItem(&quot;Window/UI Toolkit/Capture Events Test Window&quot;)]
    public static void ShowExample()
    {
        var wnd = GetWindow&lt;CaptureEventsTestWindow&gt;();
        wnd.titleContent = new GUIContent(&quot;Capture Events Test Window&quot;);
    }

    private bool m_IsCapturing = false;

    public void CreateGUI()
    {
        // Add a few clickable labels that print a message to the console when clicked
        for (int i = 0; i &lt; 4; i++)
        {
            Label clickableLabel = new Label($&quot;Label {i} - Click Me!&quot;);
            clickableLabel.RegisterCallback&lt;MouseDownEvent&gt;((evt) =&gt; { Debug.Log($&quot;Clicked on label '{(evt.target as Label).text}'&quot;); });
            rootVisualElement.Add(clickableLabel);
        }

        // Now add a label that captures the pointer
        Label capturingLabel = new Label(&quot;Click here to capture mouse&quot;);
        capturingLabel.RegisterCallback&lt;MouseDownEvent&gt;((evt) =&gt;
        {
            if (!m_IsCapturing)
            {
                capturingLabel.text = &quot;Click here to release mouse&quot;;
                MouseCaptureController.CaptureMouse(capturingLabel);
                m_IsCapturing = true;
            }
            else
            {
                capturingLabel.text = &quot;Click here to capture mouse&quot;;
                MouseCaptureController.ReleaseMouse(capturingLabel);
                m_IsCapturing = false;
            }
        });
        rootVisualElement.Add(capturingLabel);

        // Register callbacks to print a message when the mouse is captured or released
        rootVisualElement.RegisterCallback&lt;MouseCaptureEvent&gt;((evt) =&gt;
        {
            Debug.Log(&quot;Mouse captured&quot;);
        });
        rootVisualElement.RegisterCallback&lt;MouseCaptureOutEvent&gt;((evt) =&gt;
        {
            Debug.Log(&quot;Mouse captured released&quot;);
        });
    }
}
</code></pre>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-Events-Reference.html"></a></span><div class="tip">Event reference</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-Change-Events.html"></a></span><div class="tip">Change events</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
