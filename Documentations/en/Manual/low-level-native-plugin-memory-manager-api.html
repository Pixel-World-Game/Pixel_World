<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Memory Manager API for low-level native plug-ins</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/low-level-native-plugin-memory-manager-api.html">English</a></li>
<li><a href="/cn/current/Manual/low-level-native-plugin-memory-manager-api.html">中文</a></li>
<li><a href="/ja/current/Manual/low-level-native-plugin-memory-manager-api.html">日本語</a></li>
<li><a href="/kr/current/Manual/low-level-native-plugin-memory-manager-api.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/low-level-native-plugin-memory-manager-api.html">English</a></li>
<li><a href="/cn/current/Manual/low-level-native-plugin-memory-manager-api.html">中文</a></li>
<li><a href="/ja/current/Manual/low-level-native-plugin-memory-manager-api.html">日本語</a></li>
<li><a href="/kr/current/Manual/low-level-native-plugin-memory-manager-api.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="ScriptingSection.html">Scripting</a></li>
<li><a href="Plugins.html">Plug-ins</a></li>
<li><a href="NativePluginInterface.html">Low-level native plug-in interface</a></li>
<li>Memory Manager API for low-level native plug-ins</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LowLevelNativePluginShaderCompilerAccess.html"></a></span><div class="tip">Low-level native plug-in Shader compiler access</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="low-level-native-plugin-memory-manager-api-reference.html"></a></span><div class="tip">IUnityMemoryManager API reference</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Memory Manager API for low-level native plug-ins</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>The <code>IUnityMemoryManager</code> memory manager API is a C++ interface that allows you to use Unity’s memory management and memory profiling in native <span class="tooltip"><strong>plug-ins</strong><span class="tooltiptext">A set of code created outside of Unity that creates functionality in Unity. There are two kinds of plug-ins you can use in Unity: Managed plug-ins (managed .NET assemblies created with tools like Visual Studio) and Native plug-ins (platform-specific native code libraries). <a class="tooltipMoreInfoLink" href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Plug-in">Glossary</a></span></span></span>.</p>

<p>This API enables you to:</p>

<ul>
<li>Access Unity’s memory manager through a memory allocator.</li>
<li>Track your plug-in’s memory use through Unity’s Memory <span class="tooltip"><strong>Profiler</strong><span class="tooltiptext">A window that helps you to optimize your game. It shows how much time is spent in the various areas of your game. For example, it can report the percentage of time spent rendering, animating, or in your game logic. <a class="tooltipMoreInfoLink" href="Profiler.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Profiler">Glossary</a></span></span></span> package.</li>
</ul>

<p>These features make it easier to manage and profile your plug-in’s memory allocations when compared to the equivalent C++ memory management methods.</p>

<p>The plug-in API is provided by the IUnityMemoryManager interface, which is declared in the <code>IUnityMemoryManager.h</code> header. The full reference for the API is available in this file. To find the header file:</p>

<ul>
<li>On Windows, Unity stores the header in the <code>&lt;UnityInstallPath&gt;\Editor\Data\PluginAPI</code> folder of your Unity installation.</li>
<li>On macOS, right-click on the Unity application, and select Show Package Contents. The header is in <code>Contents\PluginAPI</code>.</li>
</ul>

<p>You should be familiar with the following concepts to use this API effectively:</p>

<ul>
<li><a href="https://learn.microsoft.com/en-us/cpp/cpp/pointers-cpp?view=msvc-170">C++ Pointers</a></li>
<li><a href="performance-memory-overview.html">Memory in Unity</a></li>
<li><a href="https://docs.unity3d.com/Packages/com.unity.memoryprofiler@latest">The Memory Profiler package</a></li>
<li><a href="memory-allocator-customization.html">Memory allocator customization</a></li>
<li><a href="https://learn.microsoft.com/en-us/cpp/preprocessor/predefined-macros?view=msvc-170">Predefined macros</a></li>
</ul>

<h2>Track memory use in Unity</h2>

<p>To track your plug-in’s memory usage, use the <a href="https://docs.unity3d.com/Packages/com.unity.memoryprofiler@latest">Memory Profiler package</a> to take a snapshot, then open the snapshot in the <a href="https://docs.unity3d.com/Packages/com.unity.memoryprofiler@latest/index.html?subfolder=/manual/all-memory-tab.html">All Of Memory tab</a>. When you use the <code>IUnityMemoryManager</code> to allocate memory, the Memory Profiler displays the plug-in’s memory allocations under the area and object name you assigned when you created each allocator.</p>

<p>The below screenshot shows the Memory Profiler package window displaying memory used by a native plug-in with memory allocated with the <code>IUnityMemoryManager</code> API. In this example, the method <strong>CreateAllocator</strong> was called, with “MyNativePlugin” as the areaName parameter, and “MyPluginAllocator” as the objectName parameter. For more information, see <a href="low-level-native-plugin-memory-manager-api-reference.html#create-allocator">CreateAllocator</a>.</p>

<figure>
<img src="../uploads/Main/native-plugin-memory-snapshot.png" alt="The Memory Profiler package window displaying the memory used by a user-defined allocator named Plugin Backend Allocator.">
<figcaption>The Memory Profiler package window displaying the memory used by a user-defined allocator named Plugin Backend Allocator.</figcaption>
</figure>

<p>For more information, see <a href="https://docs.unity3d.com/Packages/com.unity.memoryprofiler@latest/index.html?subfolder=/manual/snapshots.html">Snapshots</a>.</p>

<h2>Memory management limitations</h2>

<p>This API enables you to use Unity’s memory management system when you develop native plug-ins. This has major benefits as described above, but there are still limitations. Unity’s memory management system:</p>

<ul>
<li>Isn’t automatically managed; you need to allocate and deallocate the memory yourself.</li>
<li>Isn’t tracked and cleaned up by a garbage collector.</li>
</ul>

<p>Since memory in native C++ isn’t managed, you need to keep track of any memory requirements your application has. This includes choosing the correct amount of memory to allocate and making sure you deallocate it when it’s no longer needed.</p>

<p>The <code>IUnityMemoryManager</code> API impacts performance because each allocation requires a virtual call. To minimize this performance impact, use the API to allocate larger blocks of memory less frequently. To handle smaller and more frequent allocations, use this API to allocate a single larger block, then write your own code to manage the memory within this block. Don’t use this API for frequent small allocations.</p>

<h2>Additional resources</h2>

<ul>
<li>
<a href="NativePluginInterface.html">Native Plug-in interface</a> - Explains the base interface that this API inherits from.</li>
<li><span class="tooltip"><a class="tooltipMoreInfoLink" href="NativePlugins.html">Native plug-ins</a><span class="tooltiptext">A platform-specific native code library that is created outside of Unity for use in Unity. Allows you can access features like OS calls and third-party code libraries that would otherwise not be available to Unity. <a href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Nativeplug-in">Glossary</a></span></span></span> - Explains what a native plug-in is.</li>
<li>
<a href="memory-allocator-customization.html">Memory allocator customization</a> - Explains how to customize Unity’s internal memory allocators.</li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LowLevelNativePluginShaderCompilerAccess.html"></a></span><div class="tip">Low-level native plug-in Shader compiler access</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="low-level-native-plugin-memory-manager-api-reference.html"></a></span><div class="tip">IUnityMemoryManager API reference</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
