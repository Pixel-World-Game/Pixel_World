<!DOCTYPE html>
<html class="no-js" lang="zh-cn">
  <head>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:title" content="Build.IPreprocessShaders-OnProcessShader - Unity 脚本 API" />
    <title>Build.IPreprocessShaders-OnProcessShader - Unity 脚本 API</title>
    <meta name="description" content="在编译着色器代码片段之前实现此接口以接收回调。" />
    <meta property="og:description" content="在编译着色器代码片段之前实现此接口以接收回调。" />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true">
    </script>
    <script type="text/javascript">function OptanonWrapper() {}</script>
    <script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script>
    <script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script>
    <script>
      var docs_type = 'ScriptReference';
      var lang = 'cn';
      var page = 'Build.IPreprocessShaders-OnProcessShader';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">
    </script>
    <script type="text/javascript" src="">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/custom.js">
    </script>
    <script src="/StaticFilesConfig/feedback/feedback.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" />
    <link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html" />
    <link rel="alternate" href="https://docs.unity3d.com/en/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html" hreflang="en" />
    <link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html" hreflang="zh" />
    <link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html" hreflang="ja" />
    <link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html" hreflang="ko" />
    <link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html" hreflang="x-default" />
  </head>
  <body>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="./index.html">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="搜索脚本..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul class="menu-items">
                <li class="menu-item">
                  <a href="../Manual/index.html" class="">手册</a>
                </li>
                <li class="menu-item">
                  <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity3d.com/">
                unity3d.com
              </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content">
          <div class="version-switcher">
            <div class="current toggle" data-target=".version-list">
              <div class="version-number">
                <div class="d-inline-block">
          Version:
          <b>2022.3</b></div>
                <div class="d-inline-block arrow">
                </div>
              </div>
            </div>
            <div class="version-list" style="display:none;">
              <ul class="versions">
                <li class="supported">
                  <a class="docs_version_url_2023.2" href="/cn/2023.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2023.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2023.1" href="/cn/2023.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2023.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2022.3" href="/cn/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2022.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2022.2" href="/cn/2022.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2022.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2022.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2021.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2021.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2021.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2020.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2020.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2020.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_560" href="/cn/560/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">5.6</a>
                </li>
                <div class="versionsWithThisPage" style="display:none;">
                  <li>
                    <p>包含此页的版本：</p>
                  </li>
                </div>
                <div class="versionsWithoutThisPage" style="display:none;">
                  <li>
                    <p>不含此页的版本：</p>
                  </li>
                </div>
              </ul>
              <ul class="description">
                <li>
                  <div class="supported-box">
                  </div>受支持</li>
                <li>
                  <div class="legacy-box">
                  </div>旧版</li>
              </ul>
            </div>
          </div>
          <ul class="nav-menu-items">
            <li class="menu-item">
              <a href="../Manual/index.html" class="">手册</a>
            </li>
            <li class="menu-item">
              <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
            </li>
          </ul>
          <div class="lang-switcher">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">语言:
        <span class="b">中文</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a data-lang="en" href="/2022.3/Documentation/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">English</a>
                </li>
                <li>
                  <a data-lang="cn" href="/cn/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">中文</a>
                </li>
                <li>
                  <a data-lang="ja" href="/ja/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">日本語</a>
                </li>
                <li>
                  <a data-lang="kr" href="/kr/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">한국어</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar hidden">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc">
                <h2>脚本 API</h2>
                <div class="version-switcher">
                  <div class="current toggle" data-target=".version-list">
                    <div class="version-number">
                      <div class="d-inline-block">
          Version:
          <b>2022.3</b></div>
                      <div class="d-inline-block arrow">
                      </div>
                    </div>
                  </div>
                  <div class="version-list" style="display:none;">
                    <ul class="versions">
                      <li class="supported">
                        <a class="docs_version_url_2023.2" href="/cn/2023.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2023.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2023.1" href="/cn/2023.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2023.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2022.3" href="/cn/2022.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2022.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2022.2" href="/cn/2022.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2022.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2022.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2021.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2021.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2021.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2020.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2020.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2020.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2019.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2018.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">2017.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_560" href="/cn/560/ScriptReference/Build.IPreprocessShaders-OnProcessShader.html">5.6</a>
                      </li>
                      <div class="versionsWithThisPage" style="display:none;">
                        <li>
                          <p>包含此页的版本：</p>
                        </li>
                      </div>
                      <div class="versionsWithoutThisPage" style="display:none;">
                        <li>
                          <p>不含此页的版本：</p>
                        </li>
                      </div>
                    </ul>
                    <ul class="description">
                      <li>
                        <div class="supported-box">
                        </div>受支持</li>
                      <li>
                        <div class="legacy-box">
                        </div>旧版</li>
                    </ul>
                  </div>
                </div>
                <div class="clear">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap opened-sidebar">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <h1 class="heading inherit">
                  <a href="Build.IPreprocessShaders.html">IPreprocessShaders</a>.OnProcessShader</h1>
                <div class="clear">
                </div>
                <div class="clear">
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">切换到手册</a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>public void <span class="sig-kw">OnProcessShader</span>
        (<a href="Shader.html">Shader</a> <span class="sig-kw">shader</span>,
    <a href="Rendering.ShaderSnippetData.html">Rendering.ShaderSnippetData</a> <span class="sig-kw">snippet</span>,
    IList&lt;ShaderCompilerData&gt; <span class="sig-kw">data</span>);
      </div>
                </div>
              </div>
              <div class="subsection">
                <h2>参数</h2>
                <table class="list">
                  <tr>
                    <td class="name lbl">shader</td>
                    <td class="desc">The shader that Unity is about to compile.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">snippet</td>
                    <td class="desc">有关正在编译的特定着色器代码的详细信息。</td>
                  </tr>
                  <tr>
                    <td class="name lbl">data</td>
                    <td class="desc">List of variants that Unity is about to compile for the shader.</td>
                  </tr>
                </table>
              </div>
              <div class="subsection">
                <h2>描述</h2>
                <p>在编译着色器代码片段之前实现此接口以接收回调。</p>
              </div>
              <div class="subsection">
                <p>
        
                    When you build your application, Unity compiles each shader source file into multiple <a href="../Manual/shader-variants.html">shader variants</a>. Unity creates variants for some or all of the possible combinations of keywords you define in the shader source file.<br /><br />                    You can use <code class="mono">OnProcessShader</code> to iterate through each shader and variant Unity is about to compile, and exclude ('strip') variants that use keywords or keyword combinations you don't need. If you strip variants, you can greatly reduce build size, build times, and how much runtime memory Unity uses.<br /><br />                    For example you can use <code class="mono">OnProcessShader</code> to remove variants that use the following:

        
          Keywords that aren't needed for the current target platform.
          Combinations of keywords that are never used.
          Keywords you only use in your debug builds.
        
                            Unity invokes the <code class="mono">OnProcessShader</code> callback in both Player and AssetBundle builds.<br /><br />                    You can <a href="../Manual/shader-how-many-variants.html">check what shader variants you have in your project</a> to help you identify keywords and variants to strip.<br /><br />                    For example if you <a href="../Manual/SL-MultipleProgramVariants.html">declare a keyword</a> called <code class="mono">DEBUG</code> in your shader code using <code class="mono">#pragma multi_compile _ DEBUG</code>, the following <a href="../Manual/SpecialFolders.html">Editor script</a> finds and strips shader variants that use the keyword. <br /><br />                    The script does the following when you build your application:

        
          Creates a class that implements the <code class="mono">IPreprocessShaders</code> interface.
          Creates an instance of <code class="mono">ShaderKeyword</code> with the name of the keyword.
          Implements the <code class="mono">OnProcessShader</code> callback function and iterates over the <code class="mono">data</code> list, which contains every variant in the shader.
          Uses <code class="mono">data.shaderKeywordSet.IsEnabled()</code> to check if each variant uses the keyword.
          Uses <code class="mono">data.removeAt()</code> to strip a shader variant if it contains the keyword and you've disabled <strong>Development build</strong> in <a href="../Manual/BuildSettings.html">Build Settings</a>.
        
      </p>
              </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using System.Collections.Generic;
using <a href="UnityEditor.html">UnityEditor</a>;
using UnityEngine;
using UnityEngine.Rendering;
using UnityEditor.Build;
using UnityEditor.Rendering;<br /><br />class ShaderDebugBuildPreprocessor : <a href="Build.IPreprocessShaders.html">IPreprocessShaders</a>
{
    <a href="Rendering.ShaderKeyword.html">ShaderKeyword</a> m_KeywordToStrip;<br /><br />    public ShaderDebugBuildPreprocessor()
    {
        m_KeywordToStrip = new <a href="Rendering.ShaderKeyword.html">ShaderKeyword</a>("DEBUG");
    }<br /><br />    // Use callbackOrder to set when Unity calls this shader preprocessor. Unity starts with the preprocessor that has the lowest callbackOrder value.
    public int callbackOrder { get { return 0; } }<br /><br />    public void OnProcessShader(
        <a href="Shader.html">Shader</a> shader, <a href="Rendering.ShaderSnippetData.html">ShaderSnippetData</a> snippet, IList&lt;<a href="Rendering.ShaderCompilerData.html">ShaderCompilerData</a>&gt; data)
        {<br /><br />        for (int i = 0; i &lt; data.Count; ++i)
        {
            if (data[i].shaderKeywordSet.IsEnabled(m_KeywordToStrip) &amp;amp;&amp;amp; !<a href="EditorUserBuildSettings-development.html">EditorUserBuildSettings.development</a>)
            {
                var foundKeywordSet = string.Join(" ", data[i].shaderKeywordSet.GetShaderKeywords()); 
                <a href="Debug.Log.html">Debug.Log</a>("Found keyword DEBUG in variant " + i + " of shader " + shader);
                <a href="Debug.Log.html">Debug.Log</a>("Keyword set: " + foundKeywordSet);
                data.RemoveAt(i);
                --i;
            }
        }
    }
}
</pre>
      </div>
              <div class="subsection">
                <p>
        
                    You can also find local keywords. You must create the <code class="mono">ShaderKeyword</code> instance inside the implementation of <code class="mono">OnProcessShader</code>, so you can use the callback's <code class="mono">shader</code> variable in the <code class="mono">ShaderKeyword</code> constructor.<br /><br />                    For example if you declare a local keyword called <code class="mono">RED</code> in your shader code using <code class="mono">#pragma multi_compile_local _ RED</code>, the following script finds and strips shader variants that use the keyword. 
                
      </p>
              </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using System.Collections.Generic;
using UnityEditor.Build;
using UnityEditor.Rendering;
using UnityEngine;
using UnityEngine.Rendering;<br /><br />class MyCustomBuildProcessor : <a href="Build.IPreprocessShaders.html">IPreprocessShaders</a>
{<br /><br />    public int callbackOrder { get { return 0; } } <br /><br />    public void OnProcessShader(<a href="Shader.html">Shader</a> shader, <a href="Rendering.ShaderSnippetData.html">ShaderSnippetData</a> snippet, IList&lt;<a href="Rendering.ShaderCompilerData.html">ShaderCompilerData</a>&gt; data)
    {
        
        // Create an instance of <a href="Rendering.ShaderKeyword.html">ShaderKeyword</a> using the constructor that takes a <a href="Shader.html">Shader</a> argument
        <a href="Rendering.ShaderKeyword.html">ShaderKeyword</a> localKeywordToStrip = new <a href="Rendering.ShaderKeyword.html">ShaderKeyword</a>(shader, "RED");<br /><br />        for (int i = 0; i &lt; data.Count; ++i)
        {
            if (data[i].shaderKeywordSet.IsEnabled(localKeywordToStrip))
            {
                data.RemoveAt(i);
                --i;
            }
        }
    }
}
</pre>
      </div>
              <div class="subsection">
                <p>
        
                    If you strip a variant that a Material needs at runtime, Unity chooses an available shader variant that matches as closely as possible.<br /><br />                    Find out about other ways you can <a href="../Manual/shader-variant-stripping.html">strip shader variants</a>.<br /><br />                    See Also: <a href="BuildPipeline.BuildPlayer.html">BuildPipeline.BuildPlayer</a>, <a href="BuildPipeline.BuildAssetBundles.html">BuildPipeline.BuildAssetBundles</a>, <a href="Build.IPreprocessComputeShaders.html">IPreprocessComputeShaders</a>.
                
      </p>
              </div>
            </div>
            <div class="section">
              <div id="_content">
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
                <div class="menu">
                  <a href="https://learn.unity.com/">教程</a>
                  <a href="https://answers.unity3d.com">社区答案</a>
                  <a href="https://support.unity3d.com/hc/en-us">知识库</a>
                  <a href="https://forum.unity3d.com">论坛</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                  <a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a>
                  <a href="https://unity.com/legal">法律条款</a>
                  <a href="https://unity.com/legal/privacy-policy">隐私政策</a>
                  <a href="https://unity.com/legal/cookie-policy">Cookie</a>
                  <a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a>
                  <div id="ot-sdk-btn-container">
                    <a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>