<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="WebGL templates - Unity 手册">
<title>WebGL templates - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2022.3/uploads/Main/WebGLResolutionandPresentationWindow.png">
<meta name="description" content="Important: To use the templates feature in WebGL, you need prior knowledge of JavaScript concepts and terminology.">
<meta property="og:description" content="Important: To use the templates feature in WebGL, you need prior knowledge of JavaScript concepts and terminology.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'webgl-templates';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/Manual/webgl-templates.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2022.3/Manual/webgl-templates.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/Manual/webgl-templates.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/Manual/webgl-templates.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/Manual/webgl-templates.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/Manual/webgl-templates.html" hreflang="x-default">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/webgl-templates.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/webgl-templates.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/webgl-templates.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/webgl-templates.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/webgl-templates.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/webgl-templates.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/webgl-templates.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/webgl-templates.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/webgl-templates.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/webgl-templates.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/webgl-templates.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/webgl-templates.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/webgl-templates.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/webgl-templates.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/webgl-templates.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/webgl-templates.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/webgl-templates.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/webgl-templates.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/webgl-templates.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/webgl-templates.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/webgl-templates.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/webgl-templates.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/webgl-templates.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/webgl-templates.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2022.3/Documentation/Manual/webgl-templates.html">English</a></li>
<li><a data-lang="cn" href="/cn/2022.3/Manual/webgl-templates.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2022.3/Manual/webgl-templates.html">日本語</a></li>
<li><a data-lang="kr" href="/kr/2022.3/Manual/webgl-templates.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/webgl-templates.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/webgl-templates.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/webgl-templates.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/webgl-templates.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/webgl-templates.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/webgl-templates.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/webgl-templates.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/webgl-templates.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/webgl-templates.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/webgl-templates.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/webgl-templates.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/webgl-templates.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/webgl-templates.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/webgl-templates.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/webgl-templates.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/webgl-templates.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/webgl-templates.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/webgl-templates.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/webgl-templates.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/webgl-templates.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/webgl-templates.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/webgl-templates.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/webgl-templates.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/webgl-templates.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2022.3 (LTS)</a></li>
<li><a href="PlatformSpecific.html">平台开发</a></li>
<li><a href="webgl.html">WebGL</a></li>
<li><a href="webgl-building-distribution.html">Build and distribute a WebGL application</a></li>
<li>WebGL templates</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-texture-compression.html"></a></span><div class="tip">Texture Compression in WebGL</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-canvas-size.html"></a></span><div class="tip">Configure a WebGL Canvas size</div>
</div>
</div></div>
<h1>WebGL templates</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p><strong>Important:</strong> To use the templates feature in WebGL, you need prior knowledge of JavaScript concepts and terminology.</p>

<p>When you build a WebGL project, Unity embeds the Player in a HTML page such that a browser can open it. A WebGL template is a configuration setting that lets you control the appearance of this HTML page, so that you can: test, demonstrate, and preview your WebGL application in a browser.</p>

<p>To access WebGL templates:</p>

<ol>
<li>Go to <a href="class-PlayerSettings.html">Player settings</a> (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong>), and set the platform-specific settings to WebGL.</li>
<li>Open <strong>Resolution and Presentation</strong>.</li>
</ol>

<figure>
<img src="../uploads/Main/WebGLResolutionandPresentationWindow.png" alt="播放器 Resolution and Presentation 窗口的图像。">
<figcaption>播放器 Resolution and Presentation 窗口的图像。</figcaption>
</figure>

<p>By default, the WebGL Template setting has the following options:</p>

<ul>
<li>
<strong>Default</strong>: A white page with a loading bar on a grey canvas.</li>
<li>
<strong>Minimal</strong>: A minimal WebGL template with that includes the necessary boilerplate code to run the WebGL content.</li>
<li>
<strong>PWA:</strong> A <strong>Progressive Web App</strong> including a web manifest file and service worker code.</li>
</ul>

<p>这些内置 HTML 页面对于测试和演示最小播放器非常有用。</p>

<p>You can also use JavaScript to build and supply your own WebGL templates to host the Player. This is useful for production purposes, so that you can preview the Player hosted in the page where it’s eventually deployed. For example, if the Unity Player content interacts with other elements in the page via the external call interface, you should test it with a page that contains those interacting elements.</p>

<h2>添加 WebGL 模板</h2>

<p>要将自定义模板添加到项目，请导航到项目的 <code>Assets</code> 文件夹并创建一个名为 <code>WebGLTemplates</code> 的文件夹。每个模板都是 <code>WebGLTemplates</code> 文件夹中的子文件夹。每个模板子文件夹都包含一个 <code>index.html</code> 文件以及页面所需的任何其他资源，例如图像或样式表。</p>

<p>The easiest way to create a new custom WebGL template is to make a copy of the built-in Default or Minimal templates, which are stored in corresponding subfolders under <code>&lt;Unity Installation&gt;/PlaybackEngines/WebGLSupport/BuildTools/WebGLTemplates/</code>. Every Unity Project includes these templates by default. Copy a template and place it in your own <code>Project/Assets/WebGLTemplates</code> folder, and rename it to something meaningful so you can identify your template later.</p>

<p><strong>Note:</strong> On Mac, you can locate the Unity Installation folder in the Applications folder.</p>

<p>Templates in your Project’s <code>WebGLTemplates</code> folder appear in the Unity Player Settings’ WebGL Template setting. The name of the template is the same as its folder. To give this option a thumbnail image for easy reference, add a <code>128x128-pixel</code> image to the template folder and name it <code>thumbnail.png</code>.</p>

<h2>模板变量、宏和条件指令</h2>

<p>在构建过程中，Unity 会预处理模板文件并计算这些文件中包含的所有宏和条件指令。作为此过程的一部分，Unity 会查找所有宏声明并将其替换为编辑器提供的值。Unity 会自动预处理模板文件夹中的所有 .html、.php、.css、.js 和 .json 文件。</p>

<h3>内部预处理器变量</h3>

<p>以下内部预处理器变量引用项目中的数据，Unity 在构建时会根据编辑器提供的值向它们分配值。Javascript 宏和条件指令可以使用这些内部预处理器变量。</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>可变</strong></th>
	<th style="text-align:left;"><strong>类型</strong></th>
	<th style="text-align:left;"><strong>描述</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">COMPANY_NAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">在 Player Settings 中定义的 Company Name。</td>
</tr>
<tr>
	<td style="text-align:left;">PRODUCT_NAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">在 Player Settings 中定义的 Product Name。</td>
</tr>
<tr>
	<td style="text-align:left;">PRODUCT_VERSION</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">在 Player Settings 中定义的 Version。</td>
</tr>
<tr>
	<td style="text-align:left;">WIDTH</td>
	<td style="text-align:left;">Integer</td>
	<td style="text-align:left;">在 Player Settings &gt; Resolution and Presentation 中定义的 Default Canvas Width。</td>
</tr>
<tr>
	<td style="text-align:left;">HEIGHT</td>
	<td style="text-align:left;">Integer</td>
	<td style="text-align:left;">Player Settings &gt; Resolution and Presentation 中的 Default Canvas Height。</td>
</tr>
<tr>
	<td style="text-align:left;">SPLASH_SCREEN_STYLE</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This’s set to the “Dark” value when Splash Style Player Settings &gt; Splash Image is set to Light on Dark, otherwise it’s set to the “Light” value.</td>
</tr>
<tr>
	<td style="text-align:left;">BACKGROUND_COLOR</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">表示以十六进制三元组形式定义的背景颜色。</td>
</tr>
<tr>
	<td style="text-align:left;">UNITY_VERSION</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">Unity 版本。</td>
</tr>
<tr>
	<td style="text-align:left;">DEVELOPMENT_PLAYER</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">This’s set to true if the Development Build option is enabled.</td>
</tr>
<tr>
	<td style="text-align:left;">DECOMPRESSION_FALLBACK</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This’s set to <code>Gzip</code> or <code>Brotli</code>, depending on the compression method you use and the type of decompressor included in the build. If neither is included, the variable is set to an empty string.</td>
</tr>
<tr>
	<td style="text-align:left;">INITIAL_MEMORY</td>
	<td style="text-align:left;">Integer</td>
	<td style="text-align:left;">The initial size of the WASM memory heap in megabytes (MB).</td>
</tr>
<tr>
	<td style="text-align:left;">USE_WASM</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">如果当前构建是 WebAssembly 构建，则此变量设置为 true。</td>
</tr>
<tr>
	<td style="text-align:left;">USE_THREADS</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">如果当前构建使用线程，则此变量设置为 true。</td>
</tr>
<tr>
	<td style="text-align:left;">USE_WEBGL_1_0</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">如果当前构建支持 WebGL1.0 图形 API，则此变量设置为 true。</td>
</tr>
<tr>
	<td style="text-align:left;">USE_WEBGL_2_0</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">如果当前构建支持 WebGL2.0 图形 API，则此变量设置为 true。</td>
</tr>
<tr>
	<td style="text-align:left;">USE_DATA_CACHING</td>
	<td style="text-align:left;">Boolean</td>
	<td style="text-align:left;">如果当前构建对下载的文件使用 indexedDB 缓存，则此变量设置为 true。</td>
</tr>
<tr>
	<td style="text-align:left;">LOADER_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">此变量设置为构建加载程序脚本的文件名。</td>
</tr>
<tr>
	<td style="text-align:left;">DATA_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">此变量设置为主数据文件的文件名。</td>
</tr>
<tr>
	<td style="text-align:left;">FRAMEWORK_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">此变量设置为构建框架脚本的文件名。</td>
</tr>
<tr>
	<td style="text-align:left;">CODE_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the WebAssembly module when the current build is a WebAssembly build, otherwise it’s set to the filename of the <code>asm.js</code> module.</td>
</tr>
<tr>
	<td style="text-align:left;">MEMORY_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the memory file when memory is stored in an external file, otherwise it’s set to an empty string.</td>
</tr>
<tr>
	<td style="text-align:left;">SYMBOLS_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the JSON file containing debug symbols when the current build is using debug symbols, otherwise it’s set to an empty string.</td>
</tr>
<tr>
	<td style="text-align:left;">BACKGROUND_FILENAME</td>
	<td style="text-align:left;">String</td>
	<td style="text-align:left;">This is set to the filename of the background image when the background image is selected in the Player Settings &gt; Splash Image, otherwise it’s set to an empty string.</td>
</tr>
</tbody>
</table>

<h2>JavaScript 宏</h2>

<p>JavaScript 宏是模板文件中的 JavaScript 代码块，由三组花括号括起。此 JavaScript 代码可以使用上面列出的内部预处理器变量。这些变量在构建时根据编辑器提供的值进行分配。在构建期间，预处理器会计算所有宏并将它们替换为变量的输出。</p>

<p>可以使用 JavaScript 宏预处理编辑器提供的值。这些宏可以实现任意您所需的复杂性。它们可以包含多个运算符、循环、函数和任何其他 JavaScript 结构。</p>

<p>以下示例行来自 Default 模板中使用的 <code>index.html</code> 文件：</p>

<p><code>&lt;div id="unity-build-title"&gt;{{{ PRODUCT_NAME }}}&lt;/div&gt;</code></p>

<p>If the value of the <strong>Product Name</strong> in the Player Settings is set to <code>My WebGL Game</code>, the internal preprocessor variable <code>PRODUCT_NAME</code> has the value <code>My WebGL Game</code>. In the output <code>index.html</code> file, the line appears as:</p>

<p><code>&lt;div id="unity-build-title"&gt;My WebGL Game&lt;/div&gt;</code></p>

<p>下面是来自同一 <code>index.html</code> 模板文件的更复杂示例：</p>

<p><code>canvas.style.background = "url('" + buildUrl + "/{{{ BACKGROUND_FILENAME.replace(/'/g, '%27') }}}') center / cover";</code></p>

<p>If the target build folder is called <code>Let’s try WebGL</code>, and if you select a background image in the Player Settings, the internal preprocessor variable <code>BACKGROUND_FILENAME</code> has the value <code>Let’s try WebGL.jpg</code>. In the output <code>index.html</code> file, the line changes into:</p>

<p><code>canvas.style.background = "url('" + buildUrl + "/Let%27s try WebGL.jpg') center / cover";</code></p>

<h2>条件指令</h2>

<p>条件指令 <strong>#if</strong>、<strong>#else</strong> 和 <strong>#endif</strong> 控制 Unity 是在输出文件中包含预处理文件的特定部分，还是在当前构建中丢弃它。</p>

<p>Code that starts with an <strong>#if</strong> directive and ends with an <strong>#endif</strong> directive is called a conditional group. Conditional groups can also include <strong>#else</strong> directives. Unity evaluates the expression written after the <strong>#if</strong> as a JavaScript expression. If this expression has a truthy value that translates to true when evaluated in a Boolean context, then Unity keeps the line group immediately following the <strong>#if</strong> directive in the output file. If the <strong>#if</strong> expression is false, and an <strong>#else</strong> directive is included in the conditional group, Unity keeps the line group immediately following the <strong>#else</strong> directive in the output.
An example of a conditional group is as follows:</p>

<pre><code class="lang-js"># if EXPRESSION
  // 如果 EXPRESSION 具有真值，则此代码块包含在输出中
# else
  // 否则此代码块包含在输出中
# endif
</code></pre>

<p>计算的 JavaScript 表达式可以包含括号、逻辑运算符和其他 JavaScript 结构。条件指令可以嵌套。</p>

<h2>自定义用户变量</h2>

<p>When you select a WebGL template, Unity parses the template and looks for Javascript macros and conditional directives.
JavaScript variables are treated as custom user variables if they’re:</p>

<ul>
<li>Used inside JavaScript macros and conditional directives.</li>
<li>Not declared in the template code.</li>
<li>Not internal pre-processor variables.</li>
</ul>

<p>Unity 自动将这些自定义用户变量添加到 <strong>Player Settings</strong> 窗口中的 <strong>Resolution and Presentation</strong> 部分。</p>

<p>例如，如果要直接从 <strong>Player Settings</strong> 窗口控制生成的 <code>index.html</code> 页面的标题，则首先需要在自定义模板中修改 <code>index.html</code> 的 <code>&amp;lt;title&amp;gt;</code> 行，如下所示：
<code>
&lt;title&gt;{{{ PAGE_TITLE }}}&lt;/title&gt;
</code>
完成此操作后，重新选择自定义模板。这会再次解析模板，您应该会在 <strong>Player Settings window</strong> 的 <strong>Resolution and Presentation</strong> &gt; <strong>WebGL Template</strong> 部分中找到 <strong>Page Title</strong> 字段。</p>

<figure>
<img src="../uploads/Main/WebGLResolutionandPresentationCustomTemplate.png" alt="带有自定义模板的 Resolution and Presentation 窗口图像">
<figcaption>带有自定义模板的 Resolution and Presentation 窗口图像</figcaption>
</figure>

<p>在此字段中输入文本并构建项目时，模板宏中使用的自定义变量 PAGE_TITLE 会自动成为 <strong>Page Title</strong> 字段中的文本。</p>

<p>如果要在宏中使用自定义整数或浮点变量，请在宏中使用 <code>parseInt()</code> 或 <code>parseFloat()</code> JavaScript 函数以预处理编辑器提供的字符串值。这是因为会始终向自定义用户变量分配字符串值。</p>

<p><strong>注意</strong>：变量名称中的下划线字符在字段内会显示为空格以提高可读性。</p>

<h3>index.html 文件的结构</h3>

<p><code>index.html</code> 包含加载构建所需的代码，应包含以下内容：</p>

<ul>
<li>一个 <code>&lt;canvas&gt;</code> 元素。Unity 运行时使用 <code>&lt;canvas&gt;</code> 元素渲染应用程序。</li>
<li>用于下载构建加载程序的 JavaScript 代码。例如：</li>
</ul>

<pre><code class="lang-js">var buildUrl = "Build";
var loaderUrl = buildUrl + "/{{{ LOADER_FILENAME }}}";
var script = document.createElement("script");
script.src = loaderUrl;
script.onload = () =&gt; {
  // 用于实例化构建的代码
};
document.body.appendChild(script);`
</code></pre>

<p>在此示例中，<code>{{{ LOADER_FILENAME }}}</code> 在生成构建时由模板预处理器自动解析。</p>

<p>或者，可以使用脚本标签下载构建加载程序，例如：
<code>lang-js
&lt;script src="Build/{{{ LOADER_FILENAME }}}"&gt;&lt;/script&gt;
</code></p>

<ul>
<li>用于实例化构建的 JavaScript 代码。Unity 构建使用 <code>createUnityInstance()</code> 函数进行实例化，该函数在构建加载程序脚本中定义。</li>
</ul>

<h2>实例化函数：createUnityInstance()</h2>

<p><code>createUnityInstance()</code> 函数为您的内容创建新实例。可以按如下所示使用它：
<code>
createUnityInstance(canvas, config,  onProgress).then(onSuccess).catch(onError);
</code></p>

<p>此函数返回一个 Promise 对象，其中：</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">对象</th>
	<th style="text-align:left;">用途</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>canvas</code></td>
	<td style="text-align:left;">Unity 运行时使用 <code>canvas</code> 对象渲染游戏。</td>
</tr>
<tr>
	<td style="text-align:left;"><code>config</code></td>
	<td style="text-align:left;">
<code>config</code> 对象包含构建配置，例如代码和数据 URL、产品和公司名称以及版本。有关配置定义的更多信息，请参阅本页面上的<a href="#build_configuration">构建配置</a>部分。</td>
</tr>
<tr>
	<td style="text-align:left;"><code>onProgress(progress) {...}</code></td>
	<td style="text-align:left;">每次下载进度更新时，WebGL 加载程序都会调用 <code>onProgress</code> 回调对象。<code>onProgress</code> 回调附带的 <code>progress</code> 参数会确定加载进度（形式为介于 0.0 与 1.0 之间的值）。</td>
</tr>
<tr>
	<td style="text-align:left;"><code>onSuccess(unityInstance) {...}</code></td>
	<td style="text-align:left;">构建成功实例化之后会调用 <code>onSuccess</code> 回调。创建的 Unity 实例对象作为参数提供。此对象可以用于与构建交互。</td>
</tr>
<tr>
	<td style="text-align:left;"><code>onError(message) {...}</code></td>
	<td style="text-align:left;">如果在构建实例化期间发生错误，则调用 onError 回调。错误消息作为参数提供。</td>
</tr>
</tbody>
</table>

<p><code>createUnityInstance()</code> 函数在构建加载程序脚本中定义，特定于实例化的构建。因此，如果在同一个 HTML 文档中嵌入两个或更多构建，请确保从相应构建加载程序脚本的 <code>onload</code> 回调中调用 <code>createUnityInstance()</code> 函数。有关 Unity WebGL 加载程序的更多信息，请参阅<a href="webgl-building.html">构建和运行 WebGL 项目</a>。</p>

<h2>构建配置 <a name="build_configuration"></a>
</h2>

<p>配对对象包含构建配置，而构建配置由代码和数据 URL、产品名称、公司名称和版本组成。可以使用以下代码定义它：</p>

<pre><code class="lang-js">var buildUrl = "Build";
var config = {
  dataUrl: buildUrl + "/{{{ DATA_FILENAME }}}",
  frameworkUrl: buildUrl + "/{{{ FRAMEWORK_FILENAME }}}",
  codeUrl: buildUrl + "/{{{ CODE_FILENAME }}}",
# if MEMORY_FILENAME
  memoryUrl: buildUrl + "/{{{ MEMORY_FILENAME }}}",
# endif
# if SYMBOLS_FILENAME
  symbolsUrl: buildUrl + "/{{{ SYMBOLS_FILENAME }}}",
# endif
  streamingAssetsUrl: "StreamingAssets",
  companyName: "{{{ COMPANY_NAME }}}",
  productName: "{{{ PRODUCT_NAME }}}",
  productVersion: "{{{ PRODUCT_VERSION }}}",
};
</code></pre>

<p>在上面的示例中，构建文件夹 URL 存储为名为 <code>buildUrl</code> 的单独变量。在不知道嵌入页面与托管服务器上的构建文件夹之间关系的情况下，这十分有用。它使您能够在其他 HTML 文档中重用嵌入代码。何时使用此方法的一个示例是将 <code>Build</code> 文件夹移动到服务器上的另一个位置的情况。可以在嵌入页面中调整 <code>buildUrl</code> 变量的值，并且可以使用相同的嵌入代码。这也适用于 <code>StreamingAssets</code> 文件夹 (<code>streamingAssetsUrl</code>)。</p>

<h2>构建交互</h2>

<p>构建成功实例化后，Promise 对象的执行处理程序回调会接收新创建的 Unity 实例对象（以参数形式）。要与构建交互，请调用 Unity 实例的以下方法：</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">方法</th>
	<th style="text-align:left;">用途</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>unityInstance.SetFullscreen(fullscreen)</code></td>
	<td style="text-align:left;">The <code>SetFullscreen</code> method toggles full screen mode. This method doesn’t return a value. <br> - Full screen mode is activated when the <code>fullscreen</code> argument has a value of 1. <br> - Full screen mode is disabled when the <code>fullscreen</code> argument has a value of 0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>unityInstance.SendMessage(objectName, methodName, value)</code></td>
	<td style="text-align:left;">The <code>SendMessage</code> method sends messages to the GameObjects. This method doesn’t return a value. <br>- <code>objectName</code> is the name of an object in your Scene. <br> - <code>methodName</code> is the name of a method in the script, currently attached to that object. <br>- <code>value</code> can be a string, a number, or it can be empty.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>unityInstance.Quit().then(onQuit)</code></td>
	<td style="text-align:left;">Use the <code>Quit()</code> method to quit the runtime and clean up the memory used by the Unity instance. This method returns a Promise object.<br> - <code>onQuit</code> callback is called after the build runtime has quit.</td>
</tr>
</tbody>
</table>
<!-- area:platforms -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="webgl-texture-compression.html"></a></span><div class="tip">Texture Compression in WebGL</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="webgl-canvas-size.html"></a></span><div class="tip">Configure a WebGL Canvas size</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a><a href="https://unity.com/legal">法律条款</a><a href="https://unity.com/legal/privacy-policy">隐私政策</a><a href="https://unity.com/legal/cookie-policy">Cookie</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
