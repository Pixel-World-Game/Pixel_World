<!DOCTYPE html>
<html class="no-js" lang="zh-cn">
  <head>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:title" content="Experimental.Rendering.RayTracingAccelerationStructure-CullInstances - Unity 脚本 API" />
    <title>Experimental.Rendering.RayTracingAccelerationStructure-CullInstances - Unity 脚本 API</title>
    <meta name="description" content="Populates the acceleration structure with ray tracing instances associated with Renderers in the Scene using various filtering and culling parameters." />
    <meta property="og:description" content="Populates the acceleration structure with ray tracing instances associated with Renderers in the Scene using various filtering and culling parameters." />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true">
    </script>
    <script type="text/javascript">function OptanonWrapper() {}</script>
    <script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script>
    <script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script>
    <script>
      var docs_type = 'ScriptReference';
      var lang = 'cn';
      var page = 'Experimental.Rendering.RayTracingAccelerationStructure-CullInstances';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">
    </script>
    <script type="text/javascript" src="">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/custom.js">
    </script>
    <script src="/StaticFilesConfig/feedback/feedback.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" />
    <link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html" />
    <link rel="alternate" href="https://docs.unity3d.com/en/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html" hreflang="en" />
    <link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html" hreflang="zh" />
    <link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html" hreflang="ja" />
    <link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html" hreflang="ko" />
    <link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html" hreflang="x-default" />
  </head>
  <body>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="./index.html">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="搜索脚本..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul class="menu-items">
                <li class="menu-item">
                  <a href="../Manual/index.html" class="">手册</a>
                </li>
                <li class="menu-item">
                  <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity3d.com/">
                unity3d.com
              </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content">
          <div class="version-switcher">
            <div class="current toggle" data-target=".version-list">
              <div class="version-number">
                <div class="d-inline-block">
          Version:
          <b>2022.3</b></div>
                <div class="d-inline-block arrow">
                </div>
              </div>
            </div>
            <div class="version-list" style="display:none;">
              <ul class="versions">
                <li class="supported">
                  <a class="docs_version_url_2023.2" href="/cn/2023.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2023.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2023.1" href="/cn/2023.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2023.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2022.3" href="/cn/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2022.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2022.2" href="/cn/2022.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2022.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2022.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2021.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2021.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2021.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2020.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2020.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2020.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_560" href="/cn/560/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">5.6</a>
                </li>
                <div class="versionsWithThisPage" style="display:none;">
                  <li>
                    <p>包含此页的版本：</p>
                  </li>
                </div>
                <div class="versionsWithoutThisPage" style="display:none;">
                  <li>
                    <p>不含此页的版本：</p>
                  </li>
                </div>
              </ul>
              <ul class="description">
                <li>
                  <div class="supported-box">
                  </div>受支持</li>
                <li>
                  <div class="legacy-box">
                  </div>旧版</li>
              </ul>
            </div>
          </div>
          <ul class="nav-menu-items">
            <li class="menu-item">
              <a href="../Manual/index.html" class="">手册</a>
            </li>
            <li class="menu-item">
              <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
            </li>
          </ul>
          <div class="lang-switcher">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">语言:
        <span class="b">中文</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a data-lang="en" href="/2022.3/Documentation/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">English</a>
                </li>
                <li>
                  <a data-lang="cn" href="/cn/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">中文</a>
                </li>
                <li>
                  <a data-lang="ja" href="/ja/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">日本語</a>
                </li>
                <li>
                  <a data-lang="kr" href="/kr/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">한국어</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar hidden">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc">
                <h2>脚本 API</h2>
                <div class="version-switcher">
                  <div class="current toggle" data-target=".version-list">
                    <div class="version-number">
                      <div class="d-inline-block">
          Version:
          <b>2022.3</b></div>
                      <div class="d-inline-block arrow">
                      </div>
                    </div>
                  </div>
                  <div class="version-list" style="display:none;">
                    <ul class="versions">
                      <li class="supported">
                        <a class="docs_version_url_2023.2" href="/cn/2023.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2023.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2023.1" href="/cn/2023.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2023.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2022.3" href="/cn/2022.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2022.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2022.2" href="/cn/2022.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2022.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2022.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2021.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2021.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2021.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2020.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2020.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2020.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2019.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2018.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">2017.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_560" href="/cn/560/ScriptReference/Experimental.Rendering.RayTracingAccelerationStructure-CullInstances.html">5.6</a>
                      </li>
                      <div class="versionsWithThisPage" style="display:none;">
                        <li>
                          <p>包含此页的版本：</p>
                        </li>
                      </div>
                      <div class="versionsWithoutThisPage" style="display:none;">
                        <li>
                          <p>不含此页的版本：</p>
                        </li>
                      </div>
                    </ul>
                    <ul class="description">
                      <li>
                        <div class="supported-box">
                        </div>受支持</li>
                      <li>
                        <div class="legacy-box">
                        </div>旧版</li>
                    </ul>
                  </div>
                </div>
                <div class="clear">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap opened-sidebar">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <div class="message message-error mb20">
                  <b>Experimental</b>: this API is experimental and might be changed or
            removed in the future.
          </div>
                <h1 class="heading inherit">
                  <a href="Experimental.Rendering.RayTracingAccelerationStructure.html">RayTracingAccelerationStructure</a>.CullInstances</h1>
                <div class="clear">
                </div>
                <div class="clear">
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">切换到手册</a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>public <a href="Experimental.Rendering.RayTracingInstanceCullingResults.html">Experimental.Rendering.RayTracingInstanceCullingResults</a> <span class="sig-kw">CullInstances</span>
        (ref <a href="Experimental.Rendering.RayTracingInstanceCullingConfig.html">Experimental.Rendering.RayTracingInstanceCullingConfig</a> <span class="sig-kw">cullingConfig</span>);
      </div>
                </div>
              </div>
              <div class="subsection">
                <h2>参数</h2>
                <table class="list">
                  <tr>
                    <td class="name lbl">cullingConfig</td>
                    <td class="desc">Parameters for culling and filtering ray tracing instances.</td>
                  </tr>
                </table>
              </div>
              <div class="subsection">
                <h2>返回</h2>
                <p>
                  <strong>RayTracingInstanceCullingResults</strong>
        剔除结果。
      </p>
              </div>
              <div class="subsection">
                <h2>描述</h2>
                <p>Populates the acceleration structure with ray tracing instances associated with Renderers in the Scene using various filtering and culling parameters.</p>
              </div>
              <div class="subsection">
                <p>
        The previous content of the acceleration structure can optionally be cleared by using <a href="Experimental.Rendering.RayTracingAccelerationStructure.ClearInstances.html">RayTracingAccelerationStructure.ClearInstances</a>. After calling this function, additional ray tracing instances can be added to the acceleration structure using <a href="Experimental.Rendering.RayTracingAccelerationStructure.AddInstance.html">RayTracingAccelerationStructure.AddInstance</a> functions.<br /><br />If <a href="Experimental.Rendering.RayTracingInstanceCullingConfig-instanceTests.html">RayTracingInstanceCullingConfig.instanceTests</a> array is empty then this function doesn't have any effect.<br /><br />Note that building the acceleration structure on the GPU has to be triggered by calling <a href="Experimental.Rendering.RayTracingAccelerationStructure.Build.html">RayTracingAccelerationStructure.Build</a> or <a href="Rendering.CommandBuffer.BuildRayTracingAccelerationStructure.html">CommandBuffer.BuildRayTracingAccelerationStructure</a>.<br /><br />See Also: <a href="Experimental.Rendering.RayTracingShader.html">RayTracingShader</a>.
      </p>
              </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Rendering;
using UnityEngine.Experimental.Rendering;<br /><br />// This script can be attached to a <a href="Camera.html">Camera</a>.
public class CullInstancesExample : <a href="MonoBehaviour.html">MonoBehaviour</a>
{
    // A <a href="Experimental.Rendering.RayTracingShader.html">RayTracingShader</a> is defined in a .raytrace file.
    public <a href="Experimental.Rendering.RayTracingShader.html">RayTracingShader</a> rayTracingShader = null;<br /><br />    public bool enableRayTracedReflections = true;
    public bool enableRayTracedShadows = true;<br /><br />    private int cameraWidth = 0;
    private int cameraHeight = 0;<br /><br />    private <a href="RenderTexture.html">RenderTexture</a> rayTracingOutput = null;
    private <a href="Experimental.Rendering.RayTracingAccelerationStructure.html">RayTracingAccelerationStructure</a> rayTracingAccelStruct = null;<br /><br />    void Start()
    {
        if (<a href="SystemInfo-supportsRayTracing.html">SystemInfo.supportsRayTracing</a> == false)
        {
            <a href="Debug.Log.html">Debug.Log</a>("The system doesn't support <a href="Ray.html">Ray</a> Tracing.");
            return;
        }<br /><br />        RayTracingAccelerationStructure.RASSettings accelStructSetting = new RayTracingAccelerationStructure.RASSettings(<a href="Experimental.Rendering.RayTracingAccelerationStructure.ManagementMode.Manual.html">RayTracingAccelerationStructure.ManagementMode.Manual</a>, <a href="Experimental.Rendering.RayTracingAccelerationStructure.RayTracingModeMask.Everything.html">RayTracingAccelerationStructure.RayTracingModeMask.Everything</a>, -1);
        rayTracingAccelStruct = new <a href="Experimental.Rendering.RayTracingAccelerationStructure.html">RayTracingAccelerationStructure</a>(accelStructSetting);
    }<br /><br />    void OnDisable()
    {
        if (rayTracingAccelStruct != null)
        {
            rayTracingAccelStruct.Release();
            rayTracingAccelStruct = null;
        }<br /><br />        if (rayTracingOutput)
        {
            rayTracingOutput.Release();
            rayTracingOutput = null;
        }<br /><br />        cameraWidth = 0;
        cameraHeight = 0;
    }<br /><br />    void OnRenderImage(<a href="RenderTexture.html">RenderTexture</a> src, <a href="RenderTexture.html">RenderTexture</a> dest)
    {
        if (<a href="SystemInfo-supportsRayTracing.html">SystemInfo.supportsRayTracing</a> == false || rayTracingShader == null)
            return;<br /><br />        if (cameraWidth != Camera.main.pixelWidth || cameraHeight != Camera.main.pixelHeight)
        {
            if (rayTracingOutput)
                rayTracingOutput.Release();<br /><br />            rayTracingOutput = new <a href="RenderTexture.html">RenderTexture</a>(Camera.main.pixelWidth, Camera.main.pixelHeight, 0, <a href="RenderTextureFormat.ARGBHalf.html">RenderTextureFormat.ARGBHalf</a>);
            rayTracingOutput.enableRandomWrite = true;
            rayTracingOutput.Create();<br /><br />            cameraWidth = Camera.main.pixelWidth;
            cameraHeight = Camera.main.pixelHeight;
        }<br /><br />        <a href="Experimental.Rendering.RayTracingInstanceCullingConfig.html">RayTracingInstanceCullingConfig</a> cullingConfig = new <a href="Experimental.Rendering.RayTracingInstanceCullingConfig.html">RayTracingInstanceCullingConfig</a>();<br /><br />        cullingConfig.flags = <a href="Experimental.Rendering.RayTracingInstanceCullingFlags.EnableLODCulling.html">RayTracingInstanceCullingFlags.EnableLODCulling</a> | <a href="Experimental.Rendering.RayTracingInstanceCullingFlags.EnableSphereCulling.html">RayTracingInstanceCullingFlags.EnableSphereCulling</a>;<br /><br />        // Configure sphere culling.
        cullingConfig.sphereCenter = Camera.main.transform.position;
        cullingConfig.sphereRadius = 100.0f;<br /><br />        // Configure <a href="LOD.html">LOD</a> masking.
        cullingConfig.lodParameters.fieldOfView = Camera.main.fieldOfView;
        cullingConfig.lodParameters.cameraPosition = Camera.main.transform.position;
        cullingConfig.lodParameters.cameraPixelHeight = Camera.main.pixelHeight;
        cullingConfig.lodParameters.orthoSize = 0;
        cullingConfig.lodParameters.isOrthographic = false;<br /><br />        // Disable anyhit shaders for opaque geometries for best ray tracing performance.
        cullingConfig.subMeshFlagsConfig.opaqueMaterials = <a href="Experimental.Rendering.RayTracingSubMeshFlags.Enabled.html">RayTracingSubMeshFlags.Enabled</a> | <a href="Experimental.Rendering.RayTracingSubMeshFlags.ClosestHitOnly.html">RayTracingSubMeshFlags.ClosestHitOnly</a>;<br /><br />        // Disable transparent geometries.
        cullingConfig.subMeshFlagsConfig.transparentMaterials = <a href="Experimental.Rendering.RayTracingSubMeshFlags.Disabled.html">RayTracingSubMeshFlags.Disabled</a>;<br /><br />        // Enable anyhit shaders for alpha-tested / cutout geometries.
        cullingConfig.subMeshFlagsConfig.alphaTestedMaterials = <a href="Experimental.Rendering.RayTracingSubMeshFlags.Enabled.html">RayTracingSubMeshFlags.Enabled</a>;<br /><br />        // Configure which triangles are double sided. For best ray tracing performance, triangle culling should be disabled.
        cullingConfig.triangleCullingConfig.checkDoubleSidedGIMaterial = true;
        cullingConfig.triangleCullingConfig.frontTriangleCounterClockwise = false;
        cullingConfig.triangleCullingConfig.optionalDoubleSidedShaderKeywords = new string[1];
        cullingConfig.triangleCullingConfig.optionalDoubleSidedShaderKeywords[0] = "_DOUBLESIDED_ON";
        cullingConfig.triangleCullingConfig.forceDoubleSided = false;<br /><br />        // Configure <a href="Material.html">Material</a> types. Render queue intervals can also be used here.
        cullingConfig.alphaTestedMaterialConfig.optionalShaderKeywords = new string[1];
        cullingConfig.alphaTestedMaterialConfig.optionalShaderKeywords[0] = "_ALPHATEST_ON";<br /><br />        cullingConfig.transparentMaterialConfig.optionalShaderKeywords = new string[1];
        cullingConfig.transparentMaterialConfig.optionalShaderKeywords[0] = "_SURFACE_TYPE_TRANSPARENT";<br /><br />        // Configure a <a href="Material.html">Material</a> test. Allow only Shaders that have a mandatory <a href="Shader.html">Shader</a> Tag.
        cullingConfig.materialTest.requiredShaderTags = new <a href="Experimental.Rendering.RayTracingInstanceCullingShaderTagConfig.html">RayTracingInstanceCullingShaderTagConfig</a>[1];
        cullingConfig.materialTest.requiredShaderTags[0].tagId = new <a href="Rendering.ShaderTagId.html">ShaderTagId</a>("<a href="Rendering.RenderPipeline.html">RenderPipeline</a>");
        cullingConfig.materialTest.requiredShaderTags[0].tagValueId = new <a href="Rendering.ShaderTagId.html">ShaderTagId</a>("MyAwesomeRP");<br /><br />        List&lt;<a href="Experimental.Rendering.RayTracingInstanceCullingTest.html">RayTracingInstanceCullingTest</a>&gt; instanceTests = new List&lt;<a href="Experimental.Rendering.RayTracingInstanceCullingTest.html">RayTracingInstanceCullingTest</a>&gt;();<br /><br />        // Configure instance tests. There can be one instance test for each ray tracing effect for example.
        // The purpose of instance tests is to use different settings (layer, material types) per ray tracing effect.
        // Use InstanceInclusionMask argument of TraceRay HLSL function to mask different instance types.<br /><br />        if (enableRayTracedReflections)
        {
            <a href="Experimental.Rendering.RayTracingInstanceCullingTest.html">RayTracingInstanceCullingTest</a> instanceTest = new <a href="Experimental.Rendering.RayTracingInstanceCullingTest.html">RayTracingInstanceCullingTest</a>();
            instanceTest.allowTransparentMaterials = false;
            instanceTest.allowOpaqueMaterials = true;
            instanceTest.allowAlphaTestedMaterials = true;
            instanceTest.layerMask = -1;
            instanceTest.shadowCastingModeMask = (1 &lt;&lt; (int)<a href="Rendering.ShadowCastingMode.Off.html">ShadowCastingMode.Off</a>) | (1 &lt;&lt; (int)<a href="Rendering.ShadowCastingMode.On.html">ShadowCastingMode.On</a>) | (1 &lt;&lt; (int)<a href="Rendering.ShadowCastingMode.TwoSided.html">ShadowCastingMode.TwoSided</a>);
            instanceTest.instanceMask = 1 &lt;&lt; 0;<br /><br />            instanceTests.Add(instanceTest);
        }<br /><br />        if (enableRayTracedShadows)
        {
            <a href="Experimental.Rendering.RayTracingInstanceCullingTest.html">RayTracingInstanceCullingTest</a> instanceTest = new <a href="Experimental.Rendering.RayTracingInstanceCullingTest.html">RayTracingInstanceCullingTest</a>();
            instanceTest.allowTransparentMaterials = false;
            instanceTest.allowOpaqueMaterials = true;
            instanceTest.allowAlphaTestedMaterials = true;
            instanceTest.layerMask = -1;
            instanceTest.shadowCastingModeMask = (1 &lt;&lt; (int)<a href="Rendering.ShadowCastingMode.On.html">ShadowCastingMode.On</a>) | (1 &lt;&lt; (int)<a href="Rendering.ShadowCastingMode.TwoSided.html">ShadowCastingMode.TwoSided</a>);
            instanceTest.instanceMask = 1 &lt;&lt; 1;<br /><br />            instanceTests.Add(instanceTest);
        }<br /><br />        cullingConfig.instanceTests = instanceTests.ToArray();<br /><br />        rayTracingAccelStruct.ClearInstances();
        rayTracingAccelStruct.CullInstances(ref cullingConfig);<br /><br />        // Additional ray tracing instances can be added manually using <a href="Experimental.Rendering.RayTracingAccelerationStructure.AddInstance.html">RayTracingAccelerationStructure.AddInstance</a> function.
        // rayTracingAccelStruct.AddInstance(...);<br /><br />        rayTracingAccelStruct.Build(Camera.main.transform.position);<br /><br />        // Use <a href="Shader.html">Shader</a> <a href="ShaderData.Pass.html">Pass</a> "Test" in surface (material) shaders.
        rayTracingShader.SetShaderPass("Test");<br /><br />        rayTracingShader.SetAccelerationStructure("g_AccelStruct", rayTracingAccelStruct);
        rayTracingShader.SetTexture("g_Output", rayTracingOutput);<br /><br />        rayTracingShader.Dispatch("MainRayGenShader", rayTracingOutput.width, rayTracingOutput.height, 1);<br /><br />        <a href="Graphics.Blit.html">Graphics.Blit</a>(rayTracingOutput, dest);
    }
}
</pre>
      </div>
              <div class="subsection">
                <p>
        This is an example of how to create, populate and build an acceleration structure. The content of the acceleration structure is specified by configuring culling and filtering parameters that are passed to the CullInstances function.
      </p>
              </div>
            </div>
            <div class="section">
              <div id="_content">
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
                <div class="menu">
                  <a href="https://learn.unity.com/">教程</a>
                  <a href="https://answers.unity3d.com">社区答案</a>
                  <a href="https://support.unity3d.com/hc/en-us">知识库</a>
                  <a href="https://forum.unity3d.com">论坛</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                  <a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a>
                  <a href="https://unity.com/legal">法律条款</a>
                  <a href="https://unity.com/legal/privacy-policy">隐私政策</a>
                  <a href="https://unity.com/legal/cookie-policy">Cookie</a>
                  <a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a>
                  <div id="ot-sdk-btn-container">
                    <a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>