<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Create a list view runtime UI - Unity 手册">
<title>Create a list view runtime UI - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2022.3/uploads/Main/uie-howto-runtimeUI-final.png">
<meta name="description" content="Version: 2021.3+">
<meta property="og:description" content="Version: 2021.3+">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'UIE-HowTo-CreateRuntimeUI';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/Manual/UIE-HowTo-CreateRuntimeUI.html" hreflang="x-default">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/UIE-HowTo-CreateRuntimeUI.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2022.3/Documentation/Manual/UIE-HowTo-CreateRuntimeUI.html">English</a></li>
<li><a data-lang="cn" href="/cn/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html">日本語</a></li>
<li><a data-lang="kr" href="/kr/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UIE-HowTo-CreateRuntimeUI.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/UIE-HowTo-CreateRuntimeUI.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2022.3 (LTS)</a></li>
<li><a href="UIToolkits.html">Create user interfaces (UI)</a></li>
<li><a href="UIElements.html">UI 工具包</a></li>
<li><a href="UIE-structure-ui.html">Structure UI</a></li>
<li><a href="UIE-uxml-examples.html">Structure UI examples</a></li>
<li>Create a list view runtime UI</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-create-list-view-complex.html"></a></span><div class="tip">Create a complex list view</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-wrap-content-inside-scrollview.html"></a></span><div class="tip">Wrap content inside a scroll view</div>
</div>
</div></div>
<h1>Create a list view runtime UI</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p><strong>Version</strong>: 2021.3+</p>

<p>This example demonstrates how to create a list view runtime UI. This example uses the UXML and USS files directly to create the structure and style of the UI. If you are new to UI Toolkit and want to use UI Builder to create the UI, see <a href="UIB-getting-started.html">Create an example UI with UI Builder</a>.</p>

<h2>Example overview</h2>

<p>This example creates a simple character selection screen. When you click the name of a character from a list on the left, the detail of the character appears on the right.</p>

<figure>
<img src="../uploads/Main/uie-howto-runtimeUI-final.png" alt="Final view of the runtime UI">
<figcaption>Final view of the runtime UI</figcaption>
</figure>

<p>You can find the completed files that this example creates in this <a href="https://github.com/Unity-Technologies/ui-toolkit-manual-code-examples/tree/master/create-listview-runtime-ui">GitHub repository</a>.</p>

<h2>先决条件</h2>

<p>This guide is for developers familiar with the Unity Editor, UI Toolkit, and C# scripting. Before you start, get familiar with the following:
* <a href="UIE-UXML.html">UXML</a>
* <a href="../ScriptReference/UIElements.ListView.html"><code>ListView</code></a>
* <a href="../ScriptReference/UIElements.Label.html"><code>Label</code></a>
* <a href="../ScriptReference/UIElements.PanelSettings.html"><code>PanelSettings</code></a>
* <a href="../ScriptReference/UIElements.UIDocument.html"><code>UIDocument</code></a></p>

<h2>Create the main UI Document</h2>

<p>Create the main view UI Document and a USS file to style the visual elements. Add two visual elements as containers in the UI Document: one that contains the list of character names and another that contains the selected character’s details.</p>

<figure>
<img src="../uploads/Main/uie-howto-runtimeUI-finalMainView.png" alt="The UI layout setup for the main view">
<figcaption>The UI layout setup for the main view</figcaption>
</figure>

<ol>
<li><p>Create a project in Unity with any template.</p></li>
<li><p>In the Project window, create a folder named <code>UI</code> to store all the UI Document and Style Sheet files.</p></li>
<li>
<p>In the <code>UI</code> folder, create a UI Document named <code>MainView.uxml</code> with the following content:</p>

<pre><code class="lang-xml">&lt;ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" editor-extension-mode="False"&gt;
&lt;Style src="MainView.uss" /&gt;
&lt;ui:VisualElement name="background"&gt;
    &lt;ui:VisualElement name="main-container"&gt;
        &lt;ui:ListView focusable="true" name="character-list" /&gt;
        &lt;ui:VisualElement name="right-container"&gt;
            &lt;ui:VisualElement name="details-container"&gt;
                &lt;ui:VisualElement name="details"&gt;
                    &lt;ui:VisualElement name="character-portrait" /&gt;
                &lt;/ui:VisualElement&gt;
                &lt;ui:Label text="Label" name="character-name" /&gt;
                &lt;ui:Label text="Label" display-tooltip-when-elided="true" name="character-class" /&gt;
            &lt;/ui:VisualElement&gt;
        &lt;/ui:VisualElement&gt;
    &lt;/ui:VisualElement&gt;
&lt;/ui:VisualElement&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li>
<p>In the <code>UI</code> folder, create a USS style sheet named <code>MainView.uss</code> with the following content:</p>

<pre><code class="lang-css">    #background {
        flex-grow: 1;
        align-items: center;
        justify-content: center;
        background-color: rgb(115, 37, 38);
    }

    #main-container {
        flex-direction: row;
        height: 350px;
    }

    #character-list {
        width: 230px;
        border-color: rgb(49, 26, 17);
        border-width: 4px;
        background-color: rgb(110, 57, 37);
        border-radius: 15px;
        margin-right: 6px;
    }

    #character-name {
        -unity-font-style: bold;
        font-size: 18px;
    }

    #CharacterClass {
        margin-top: 2px;
        margin-bottom: 8px;
        padding-top: 0;
        padding-bottom: 0;
    }

    #right-container{
        justify-content: space-between; 
        align-items: flex-end;
    }

    #details-container{
        align-items: center; 
        background-color: rgb(170, 89, 57); 
        border-width: 4px; 
        border-color: rgb(49, 26, 17);
        border-radius: 15px;
        width: 252px; 
        justify-content: center; 
        padding: 8px;
        height: 163px;
    }

    #details{
        border-color: rgb(49, 26, 17); 
        border-width: 2px; 
        height: 120px; 
        width: 120px; 
        border-radius: 13px; 
        padding: 4px;
        background-color: rgb(255, 133, 84);
    }

    #character-portrait{
        flex-grow: 1; 
        -unity-background-scale-mode: scale-to-fit;
    }
</code></pre>
</li>
</ol>

<h2>Create a list entry UI Document</h2>

<p>Create a UI Document and a Style Sheet for the individual entries in the list. The character list entry consists of a colored background frame and the character’s name.</p>

<figure>
<img src="../uploads/Main/uie-howto-runtimeUI-listEntryFinal.png" alt="List entry that shows a characters name">
<figcaption>List entry that shows a character’s name</figcaption>
</figure>

<ol>
<li>
<p>In the <code>UI</code> folder, create a UI Document named <code>ListEntry.uxml</code> with the following content:</p>

<pre><code class="lang-xml">&lt;ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" editor-extension-mode="False"&gt;
&lt;Style src="ListEntry.uss" /&gt;
&lt;ui:VisualElement name="list-entry"&gt;
    &lt;ui:Label text="Label" display-tooltip-when-elided="true" name="character-name" /&gt;
&lt;/ui:VisualElement&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li>
<p>In the <code>UI</code> folder, create a Style Sheet file named <code>ListEntry.uss</code> with the following content:</p>

<pre><code class="lang-css">    #list-entry {
        height: 41px;
        align-items: flex-start;
        justify-content: center;
        padding-left: 10px;
        background-color: rgb(170, 89, 57);
        border-color: rgb(49, 26, 17);
        border-width: 2px;
        border-radius: 15px;
    }

    #character-name {
        -unity-font-style: bold;
        font-size: 18px;
        color: rgb(49, 26, 17);
    }
</code></pre>
</li>
</ol>

<h2>Create sample data to display</h2>

<p>Create sample data to fill the character list in the UI. For the character list, create a class that holds a character name, class, and a portrait image.</p>

<ol>
<li><p>In the Asset folder, create a folder named <code>Scripts</code> to store your C# scripts.</p></li>
<li>
<p>In the <code>Scripts</code> folder, create a C# script named <code>CharacterData.cs</code> with the following content:</p>

<pre><code class="lang-csharp">using UnityEngine;

public enum ECharacterClass
{
    Knight, Ranger, Wizard
}

[CreateAssetMenu] //This adds an entry to the **Create** menu
public class CharacterData : ScriptableObject
{
    public string CharacterName;
    public ECharacterClass Class;
    public Sprite PortraitImage;
}
</code></pre>

<p>This creates a <strong>Character Data</strong> item in the <strong>Assets</strong> &gt; <strong>Create</strong> menu.</p>
</li>
<li><p>In the Assets folder, create a folder named <code>Resources</code>.</p></li>
<li><p>In the <code>Resources</code> folder, create a folder named <code>Characters</code> to store all your sample character data. </p></li>
<li><p>In the <code>Characters</code> folder, right-click and select <strong>Create</strong> &gt; <strong>Character Data</strong> to create an instance of the <code>ScriptableObject</code>.</p></li>
<li><p>Create more <code>CharacterData</code> instances and fill them with placeholder data. </p></li>
</ol>

<h2>Set up the scene</h2>

<p>Create a UIDocument GameObject in the SampleScene and add the UI Document as the source asset.</p>

<ol>
<li>In the SampleScene, select <strong>GameObject</strong> &gt; <strong>UI Toolkit</strong> &gt; <strong>UI Document</strong>.</li>
<li>Select the <strong>UIDocument</strong> GameObject in the Hierarchy window.</li>
<li>Drag <strong>MainView.uxml</strong> from your Project window to the <strong>Source Asset</strong> field of the UI Document component in the Inspector window. This references the source asset to the UXML file.</li>
</ol>

<h2>Create controllers for the list entry and the main view</h2>

<p>Create two C# scripts with the following classes:</p>

<ul>
<li>A <code>CharacterListEntryController</code> class to display the data of a character instance in the UI of the list entry. It needs to access the label for the character name and set it to display the name of the given character instance.</li>
<li>A <code>CharacterListController</code> class for the character list in the main view, and a <code>MonoBehaviour</code> script that instantiates and assigns it to the visual tree.</li>
</ul>

<p><strong>Note</strong>: The <code>CharacterListEntryController</code> class isn’t a <code>MonoBehaviour</code>. Since the visual elements in UI Toolkit aren’t GameObjects, you can’t attach components to them. Instead, you attach the class to the <code>userData</code> property in the <code>CharacterListController</code> class. </p>

<ol>
<li>
<p>In the <code>Scripts</code> folder, create a C# script named <code>CharacterListEntryController.cs</code> with the following contents:</p>

<pre><code class="lang-csharp">using UnityEngine.UIElements;

public class CharacterListEntryController
{
    Label NameLabel;

    //This function retrieves a reference to the 
    //character name label inside the UI element.

    public void SetVisualElement(VisualElement visualElement)
    {
        NameLabel = visualElement.Q&lt;Label&gt;("character-name");
    }

    //This function receives the character whose name this list 
    //element displays. Since the elements listed 
    //in a `ListView` are pooled and reused, it's necessary to 
    //have a `Set` function to change which character's data to display.

    public void SetCharacterData(CharacterData characterData)
    {
        NameLabel.text = characterData.CharacterName;
    }
}
</code></pre>
</li>
<li>
<p>In the <code>Scripts</code> folder, create a C# script named <code>CharacterListController.cs</code> with the following content:</p>

<pre><code class="lang-csharp">using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UIElements;

public class CharacterListController
{
    // UXML template for list entries
    VisualTreeAsset ListEntryTemplate;

    // UI element references
    ListView CharacterList;
    Label CharClassLabel;
    Label CharNameLabel;
    VisualElement CharPortrait;

    public void InitializeCharacterList(VisualElement root, VisualTreeAsset listElementTemplate)
    {
        EnumerateAllCharacters();

        // Store a reference to the template for the list entries
        ListEntryTemplate = listElementTemplate;

        // Store a reference to the character list element
        CharacterList = root.Q&lt;ListView&gt;("character-list");

        // Store references to the selected character info elements
        CharClassLabel = root.Q&lt;Label&gt;("character-class");
        CharNameLabel = root.Q&lt;Label&gt;("character-name");
        CharPortrait = root.Q&lt;VisualElement&gt;("character-portrait");

        FillCharacterList();

        // Register to get a callback when an item is selected
        CharacterList.onSelectionChange += OnCharacterSelected;
    }

    List&lt;CharacterData&gt; AllCharacters;

    void EnumerateAllCharacters()
    {
        AllCharacters = new List&lt;CharacterData&gt;();
        AllCharacters.AddRange(Resources.LoadAll&lt;CharacterData&gt;("Characters"));
    }

    void FillCharacterList()
    {
        // Set up a make item function for a list entry
        CharacterList.makeItem = () =&gt;
        {
            // Instantiate the UXML template for the entry
            var newListEntry = ListEntryTemplate.Instantiate();

            // Instantiate a controller for the data
            var newListEntryLogic = new CharacterListEntryController();

            // Assign the controller script to the visual element
            newListEntry.userData = newListEntryLogic;

            // Initialize the controller script
            newListEntryLogic.SetVisualElement(newListEntry);

            // Return the root of the instantiated visual tree
            return newListEntry;
        };

        // Set up bind function for a specific list entry
        CharacterList.bindItem = (item, index) =&gt;
        {
            (item.userData as CharacterListEntryController).SetCharacterData(AllCharacters[index]);
        };

        // Set a fixed item height
        CharacterList.fixedItemHeight = 45;

        // Set the actual item's source list/array
        CharacterList.itemsSource = AllCharacters;
    }

    void OnCharacterSelected(IEnumerable&lt;object&gt; selectedItems)
    {
        // Get the currently selected item directly from the ListView
        var selectedCharacter = CharacterList.selectedItem as CharacterData;

        // Handle none-selection (Escape to deselect everything)
        if (selectedCharacter == null)
        {
            // Clear
            CharClassLabel.text = "";
            CharNameLabel.text = "";
            CharPortrait.style.backgroundImage = null;

            return;
        }

        // Fill in character details
        CharClassLabel.text = selectedCharacter.Class.ToString();
        CharNameLabel.text = selectedCharacter.CharacterName;
        CharPortrait.style.backgroundImage = new StyleBackground(selectedCharacter.PortraitImage);
    }
}
</code></pre>
</li>
</ol>

<h2>Attach the controller script to the main view</h2>

<p>The <code>CharacterListController</code> isn’t a <code>MonoBehaviour</code>, so it must be attached to the visual tree. Create a <code>MonoBehaviour</code> script that you can attach to the same GameObject as the UIDocument. It instantiates the <code>CharacterListController</code> and attaches it to the Visual Tree.</p>

<ol>
<li>
<p>In the <code>Scripts</code> folder, create a C# script named <code>MainView.cs</code> with the following content:</p>

<pre><code class="lang-csharp">using UnityEngine;
using UnityEngine.UIElements;

public class MainView : MonoBehaviour
{
    [SerializeField]
    VisualTreeAsset ListEntryTemplate;

    void OnEnable()
    {
        // The UXML is already instantiated by the UIDocument component
        var uiDocument = GetComponent&lt;UIDocument&gt;();

        // Initialize the character list controller
        var characterListController = new CharacterListController();
        characterListController.InitializeCharacterList(uiDocument.rootVisualElement, ListEntryTemplate);
    }
}
</code></pre>
</li>
<li><p>In the SampleScene, select <strong>UIDocument</strong>.</p></li>
<li><p>Drag <code>MainView.cs</code> to <strong>Add Component</strong> in the Inspector window.</p></li>
<li><p>Drag <strong>ListEntry.uxml</strong> to the <strong>ListEntry Template</strong> field.</p></li>
<li><p>Enter Play mode to see your UI displayed in the game view.</p></li>
</ol>

<h2>Additional resource</h2>

<ul>
<li><a href="UIE-uxml-element-ListView.html">UXML element ListView</a></li>
<li><a href="UIE-get-started-with-runtime-ui.html">Get started with runtime UI</a></li>
<li><a href="UIE-render-runtime-ui.html">Render UI in the Game view</a></li>
<li><a href="UIE-Runtime-Panel-Settings.html">The Panel Settings asset</a></li>
<li><a href="UIE-Runtime-Event-System.html">Runtime event system</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-create-list-view-complex.html"></a></span><div class="tip">Create a complex list view</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-wrap-content-inside-scrollview.html"></a></span><div class="tip">Wrap content inside a scroll view</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a><a href="https://unity.com/legal">法律条款</a><a href="https://unity.com/legal/privacy-policy">隐私政策</a><a href="https://unity.com/legal/cookie-policy">Cookie</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
