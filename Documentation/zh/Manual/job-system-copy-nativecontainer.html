<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Copying NativeContainer structures - Unity 手册">
<title>Copying NativeContainer structures - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2022.3/uploads/Main/native-container-diagram.png">
<meta name="description" content="Native containers are value types, which means that when they&amp;#8217;re assigned to a variable, Unity copies the NativeContainer structure, which contains pointers to where the native container&amp;#8217;s data is stored, including its AtomicSafetyHandle. It doesn’t copy the entire contents of the NativeContainer.">
<meta property="og:description" content="Native containers are value types, which means that when they&amp;#8217;re assigned to a variable, Unity copies the NativeContainer structure, which contains pointers to where the native container&amp;#8217;s data is stored, including its AtomicSafetyHandle. It doesn’t copy the entire contents of the NativeContainer.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'job-system-copy-nativecontainer';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/Manual/job-system-copy-nativecontainer.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2022.3/Manual/job-system-copy-nativecontainer.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/Manual/job-system-copy-nativecontainer.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/Manual/job-system-copy-nativecontainer.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/Manual/job-system-copy-nativecontainer.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/Manual/job-system-copy-nativecontainer.html" hreflang="x-default">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/job-system-copy-nativecontainer.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/job-system-copy-nativecontainer.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/job-system-copy-nativecontainer.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/job-system-copy-nativecontainer.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/job-system-copy-nativecontainer.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/job-system-copy-nativecontainer.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/job-system-copy-nativecontainer.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/job-system-copy-nativecontainer.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/job-system-copy-nativecontainer.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/job-system-copy-nativecontainer.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/job-system-copy-nativecontainer.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/job-system-copy-nativecontainer.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/job-system-copy-nativecontainer.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/job-system-copy-nativecontainer.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/job-system-copy-nativecontainer.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/job-system-copy-nativecontainer.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/job-system-copy-nativecontainer.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/job-system-copy-nativecontainer.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/job-system-copy-nativecontainer.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/job-system-copy-nativecontainer.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/job-system-copy-nativecontainer.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/job-system-copy-nativecontainer.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/job-system-copy-nativecontainer.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/job-system-copy-nativecontainer.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2022.3/Documentation/Manual/job-system-copy-nativecontainer.html">English</a></li>
<li><a data-lang="cn" href="/cn/2022.3/Manual/job-system-copy-nativecontainer.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2022.3/Manual/job-system-copy-nativecontainer.html">日本語</a></li>
<li><a data-lang="kr" href="/kr/2022.3/Manual/job-system-copy-nativecontainer.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/job-system-copy-nativecontainer.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/job-system-copy-nativecontainer.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/job-system-copy-nativecontainer.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/job-system-copy-nativecontainer.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/job-system-copy-nativecontainer.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/job-system-copy-nativecontainer.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/job-system-copy-nativecontainer.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/job-system-copy-nativecontainer.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/job-system-copy-nativecontainer.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/job-system-copy-nativecontainer.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/job-system-copy-nativecontainer.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/job-system-copy-nativecontainer.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/job-system-copy-nativecontainer.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/job-system-copy-nativecontainer.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/job-system-copy-nativecontainer.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/job-system-copy-nativecontainer.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/job-system-copy-nativecontainer.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/job-system-copy-nativecontainer.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/job-system-copy-nativecontainer.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/job-system-copy-nativecontainer.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/job-system-copy-nativecontainer.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/job-system-copy-nativecontainer.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/job-system-copy-nativecontainer.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/job-system-copy-nativecontainer.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2022.3 (LTS)</a></li>
<li><a href="ScriptingSection.html">脚本</a></li>
<li><a href="JobSystem.html">Job system </a></li>
<li><a href="JobSystemNativeContainer.html">Thread safe types</a></li>
<li>Copying NativeContainer structures</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="job-system-custom-nativecontainer.html"></a></span><div class="tip">Implement a custom native container</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="job-system-custom-nativecontainer-example.html"></a></span><div class="tip">Custom NativeContainer example</div>
</div>
</div></div>
<h1>Copying NativeContainer structures</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p><a href="JobSystemNativeContainer.html">Native containers</a> are value types, which means that when they’re assigned to a variable, Unity copies the <code>NativeContainer</code> structure, which contains pointers to where the native container’s data is stored, including its <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.html"><code>AtomicSafetyHandle</code></a>. It doesn’t copy the entire contents of the <code>NativeContainer</code>. </p>

<p>This scenario means that there might be multiple copies of a <code>NativeContainer</code> structure which all reference the same region of memory, and all contain <code>AtomicSafetyHandle</code> objects which reference the same central record.</p>

<figure>
<img src="../uploads/Main/native-container-diagram.png" alt="How copies of NativeContainer objects work">
<figcaption>How copies of NativeContainer objects work</figcaption>
</figure>

<p>The above diagram shows three different copies of a <code>NativeArray</code> structure that all represent the same actual container. Each copy points to the same stored data, and the same safety data as the original <code>NativeArray</code>. However, each copy of the <code>NativeArray</code> has different flags that indicate what a job is allowed to do with that copy. The pointer to the safety data, combined with the flags, make up the <code>AtomicSafetyHandle</code>.</p>

<h2>Version numbers</h2>

<p>If a <code>NativeContainer</code> is disposed of, all the copies of the <code>NativeContainer</code> structure must recognize that the original <code>NativeContainer</code> is invalid. Disposing of the original <code>NativeContainer</code> means that the block of memory that used to hold the data for the <code>NativeContainer</code> has been deallocated. In this situation, the pointer to the data which is stored in each copy of the <code>NativeContainer</code> is invalid, and might cause access violations if you use it. </p>

<p>The <code>AtomicSafetyHandle</code> also points at a central record which becomes invalid for the <code>NativeContainer</code> instances. However, the safety system never deallocates the memory for the central record, so it avoids the risk of access violations.</p>

<p>Instead, each record contains a version number. A copy of the version number is stored inside each <code>AtomicSafetyHandle</code> that references that record. When a NativeContainer is disposed of, Unity calls <code>Release()</code>, which increments the version number on the central record. After this, the record can be reused for other <code>NativeContainer</code> instances. </p>

<p>Each remaining <code>AtomicSafetyHandle</code>compares its stored version number against the version number in the central record to test whether the <code>NativeContainer</code> has been disposed of. Unity performs this test automatically as part of calls to methods such as <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.CheckReadAndThrow.html"><code>CheckReadAndThrow</code></a>, and <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.CheckWriteAndThrow.html"><code>CheckWriteAndThrow</code></a>.</p>

<h2>Static views of dynamic native containers</h2>

<p>A dynamic native container is one which has a variable size that you can continue to add elements to, such as <a href="https://docs.unity3d.com/Packages/com.unity.collections@latest/index.html?subfolder=/api/Unity.Collections.NativeList-1.html"><code>NativeList&lt;T&gt;</code></a> (which is available in the Collections package). This is in contrast to a static native container like <a href="../ScriptReference/Unity.Collections.NativeArray_1.html"><code>NativeArray&lt;T&gt;</code></a>, which has a fixed size that you can’t change. </p>

<p>When you use a dynamic native container, you can also directly access its data through another interface, called a view. A view allows you to alias a <code>NativeContainer</code> object’s data without copying or taking ownership of the data. Examples of views include enumerator objects, which you can use to access the data in a native container element-by-element, and methods such as <a href="https://docs.unity3d.com/Packages/com.unity.collections@latest/index.html?subfolder=/api/Unity.Collections.NativeList-1.html#Unity_Collections_NativeList_1_AsArray"><code>NativeList&lt;T&gt;.AsArray</code></a>, which you can use to treat a <code>NativeList</code> as if it were a <code>NativeArray</code>.</p>

<p>Views aren’t typically thread safe if the size of the dynamic native container changes. This is because when the size of the native container changes, Unity relocates where the data is stored in memory, which causes any pointers that a view stores to become invalid.</p>

<h3>Secondary version numbers</h3>

<p>To support situations when the size of the dynamic native container changes, the safety system includes a secondary version number in an <code>AtomicSafetyHandle</code>. This mechanism is similar to the versioning mechanism, but uses a second version number stored in the central record which can be incremented independently of the first version number.</p>

<p>To use a secondary version number, you can use <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.UseSecondaryVersion.html"><code>UseSecondaryVersion</code></a> to configure the views into the data stored in a <code>NativeContainer</code>. For operations that change the size of the native container, or otherwise make existing views invalid, use <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.CheckWriteAndBumpSecondaryVersion.html"><code>CheckWriteAndBumpSecondaryVersion</code></a> instead of <code>CheckWriteAndThrow</code>. You also need to set <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.SetBumpSecondaryVersionOnScheduleWrite.html"><code>SetBumpSecondaryVersionOnScheduleWrite</code></a> on the <code>NativeContainer</code> to automatically invalidate views whenever a job is scheduled that writes to the native container.</p>

<p>When you create a view and copy the <code>AtomicSafetyHandle</code> to it, use <a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.CheckGetSecondaryDataPointerAndThrow.html"><code>CheckGetSecondaryDataPointerAndThrow</code></a> to confirm that it’s safe to copy the pointer to the native container’s memory into the view.</p>

<h2>Special handles</h2>

<p>There are two special handles, which you can use when working with temporary native containers: </p>

<ul>
<li>
<a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.GetTempMemoryHandle.html"><code>GetTempMemoryHandle</code></a>: Returns an <code>AtomicSafetyHandle</code> which you can use in native containers which are allocated with <code>Allocator.Temp</code>. Unity automatically invalidates this handle when the current temporary memory scope exits, so you don’t need to release it yourself. To test whether a particular <code>AtomicSafetyHandle</code> is the handle returned by <code>GetTempMemoryHandle</code>, use <code>IsTempMemoryHandle</code>.</li>
<li>
<a href="../ScriptReference/Unity.Collections.LowLevel.Unsafe.AtomicSafetyHandle.GetTempUnsafePtrSliceHandle.html"><code>GetTempUnsafePtrSliceHandle</code></a>: Returns a global handle you can use for temporary native containers which are backed by unsafe memory. For example, a <code>NativeSlice</code> constructed from stack memory. You can’t pass containers that use this handle into jobs.</li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="job-system-custom-nativecontainer.html"></a></span><div class="tip">Implement a custom native container</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="job-system-custom-nativecontainer-example.html"></a></span><div class="tip">Custom NativeContainer example</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a><a href="https://unity.com/legal">法律条款</a><a href="https://unity.com/legal/privacy-policy">隐私政策</a><a href="https://unity.com/legal/cookie-policy">Cookie</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
