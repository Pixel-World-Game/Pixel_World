<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Create list and tree views - Unity 手册">
<title>Create list and tree views - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2022.3/uploads/Main/planets-listview.png">
<meta name="description" content="List and tree views are common features in UI design. You can use UI Toolkit to create list and tree views inside a custom Editor window or runtime. This example demonstrates how to create list and tree views inside a custom Editor window. You configure the structure of lists and trees with UXML and then dynamically populate them in your C# script.">
<meta property="og:description" content="List and tree views are common features in UI design. You can use UI Toolkit to create list and tree views inside a custom Editor window or runtime. This example demonstrates how to create list and tree views inside a custom Editor window. You configure the structure of lists and trees with UXML and then dynamically populate them in your C# script.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'UIE-ListView-TreeView';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/Manual/UIE-ListView-TreeView.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2022.3/Manual/UIE-ListView-TreeView.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/Manual/UIE-ListView-TreeView.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/Manual/UIE-ListView-TreeView.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/Manual/UIE-ListView-TreeView.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/Manual/UIE-ListView-TreeView.html" hreflang="x-default">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/UIE-ListView-TreeView.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/UIE-ListView-TreeView.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/UIE-ListView-TreeView.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/UIE-ListView-TreeView.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/UIE-ListView-TreeView.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/UIE-ListView-TreeView.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/UIE-ListView-TreeView.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/UIE-ListView-TreeView.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/UIE-ListView-TreeView.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/UIE-ListView-TreeView.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/UIE-ListView-TreeView.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/UIE-ListView-TreeView.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UIE-ListView-TreeView.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UIE-ListView-TreeView.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UIE-ListView-TreeView.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UIE-ListView-TreeView.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UIE-ListView-TreeView.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UIE-ListView-TreeView.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UIE-ListView-TreeView.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UIE-ListView-TreeView.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UIE-ListView-TreeView.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UIE-ListView-TreeView.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UIE-ListView-TreeView.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/UIE-ListView-TreeView.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2022.3/Documentation/Manual/UIE-ListView-TreeView.html">English</a></li>
<li><a data-lang="cn" href="/cn/2022.3/Manual/UIE-ListView-TreeView.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2022.3/Manual/UIE-ListView-TreeView.html">日本語</a></li>
<li><a data-lang="kr" href="/kr/2022.3/Manual/UIE-ListView-TreeView.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/UIE-ListView-TreeView.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/UIE-ListView-TreeView.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/UIE-ListView-TreeView.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/UIE-ListView-TreeView.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/UIE-ListView-TreeView.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/UIE-ListView-TreeView.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/UIE-ListView-TreeView.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/UIE-ListView-TreeView.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/UIE-ListView-TreeView.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/UIE-ListView-TreeView.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/UIE-ListView-TreeView.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/UIE-ListView-TreeView.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/UIE-ListView-TreeView.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/UIE-ListView-TreeView.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/UIE-ListView-TreeView.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/UIE-ListView-TreeView.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/UIE-ListView-TreeView.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/UIE-ListView-TreeView.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/UIE-ListView-TreeView.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/UIE-ListView-TreeView.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/UIE-ListView-TreeView.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/UIE-ListView-TreeView.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/UIE-ListView-TreeView.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/UIE-ListView-TreeView.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2022.3 (LTS)</a></li>
<li><a href="UIToolkits.html">Create user interfaces (UI)</a></li>
<li><a href="UIElements.html">UI 工具包</a></li>
<li><a href="UIE-structure-ui.html">Structure UI</a></li>
<li><a href="UIE-uxml-examples.html">Structure UI examples</a></li>
<li>Create list and tree views</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-uxml-examples.html"></a></span><div class="tip">Structure UI examples</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-create-list-view-complex.html"></a></span><div class="tip">Create a complex list view</div>
</div>
</div></div>
<h1>Create list and tree views</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>List and tree views are common features in UI design. You can use UI Toolkit to create list and tree views inside a custom Editor window or runtime. This example demonstrates how to create list and tree views inside a custom Editor window. You configure the structure of lists and trees with UXML and then dynamically populate them in your C# script.</p>

<h2>Example overview</h2>

<p>This example creates four Editor windows that display the following:</p>

<ul>
<li>A list of planets with a single column</li>
<li>A list of planets with two columns</li>
<li>A tree view of planets</li>
<li>A tree view of planets with two columns</li>
</ul>

<p>You can find the completed files that this example creates in this <a href="https://github.com/Unity-Technologies/ui-toolkit-manual-code-examples/tree/master/create-listviews-treeviews">GitHub repository</a>.</p>

<h2>先决条件</h2>

<p>This guide is for developers familiar with the Unity Editor, UI Toolkit, and C# scripting. Before you start, get familiar with the following:</p>

<ul>
<li><a href="UIE-UXML.html">UXML</a></li>
<li><a href="UIBuilder.html">UI Builder</a></li>
<li><a href="UIE-ElementRef.html#object"><code>Column</code></a></li>
<li><a href="../ScriptReference/UIElements.ListView.html"><code>ListView</code></a></li>
<li><a href="../ScriptReference/UIElements.TreeView.html"><code>TreeView</code></a></li>
<li><a href="../ScriptReference/UIElements.MultiColumnListView.html"><code>MultiColumnListView</code></a></li>
<li><a href="../ScriptReference/UIElements.MultiColumnTreeView.html"><code>MultiColumnTreeView</code></a></li>
</ul>

<h2>Create the data in C#</h2>

<p>Create data in a C# script that’s made up of two groups of planets and the root nodes for the tree view.</p>

<ol>
<li><p>Create a project in Unity with any template.</p></li>
<li><p>In your Project window, create a folder named <code>Editor</code>.</p></li>
<li><p>In the <code>Editor</code> folder, create a C# script named <code>PlanetsWindow.cs</code>.</p></li>
<li>
<p>Replace the contents of <code>PlanetsWindow.cs</code> with the following:</p>

<pre><code class="lang-cs">using System.Collections.Generic;
using UnityEngine;
using UnityEditor;
using UnityEngine.UIElements;

// Base class for all windows that display planet information.
public class PlanetsWindow : EditorWindow
{
    [SerializeField]
    protected VisualTreeAsset uxml;

    // Nested interface that can be either a single planet or a group of planets.
    protected interface IPlanetOrGroup
    {
        public string name
        {
            get;
        }

        public bool populated
        {
            get;
        }
    }

    // Nested class that represents a planet.
    protected class Planet : IPlanetOrGroup
    {
        public string name
        {
            get;
        }

        public bool populated
        {
            get;
        }

        public Planet(string name, bool populated = false)
        {
            this.name = name;
            this.populated = populated;
        }
    }

    // Nested class that represents a group of planets.
    protected class PlanetGroup : IPlanetOrGroup
    {
        public string name
        {
            get;
        }

        public bool populated
        {
            get
            {
                var anyPlanetPopulated = false;
                foreach (Planet planet in planets)
                {
                    anyPlanetPopulated = anyPlanetPopulated || planet.populated;
                }
                return anyPlanetPopulated;
            }
        }

        public readonly IReadOnlyList&lt;Planet&gt; planets;

        public PlanetGroup(string name, IReadOnlyList&lt;Planet&gt; planets)
        {
            this.name = name;
            this.planets = planets;
        }
    }

    // Data about planets in our solar system.
    protected static readonly List&lt;PlanetGroup&gt; planetGroups = new List&lt;PlanetGroup&gt;
    {
        new PlanetGroup("Inner Planets", new List&lt;Planet&gt;
        {
            new Planet("Mercury"),
            new Planet("Venus"),
            new Planet("Earth", true),
            new Planet("Mars")
        }),
        new PlanetGroup("Outer Planets", new List&lt;Planet&gt;
        {
            new Planet("Jupiter"),
            new Planet("Saturn"),
            new Planet("Uranus"),
            new Planet("Neptune")
        })
    };

    // Expresses planet data as a list of the planets themselves. Needed for ListView and MultiColumnListView.
    protected static List&lt;Planet&gt; planets
    {
        get
        {
            var retVal = new List&lt;Planet&gt;(8);
            foreach (var group in planetGroups)
            {
                retVal.AddRange(group.planets);
            }
            return retVal;
        }
    }

    // Expresses planet data as a list of TreeViewItemData objects. Needed for TreeView and MultiColumnTreeView.
    protected static IList&lt;TreeViewItemData&lt;IPlanetOrGroup&gt;&gt; treeRoots
    {
        get
        {
            int id = 0;
            var roots = new List&lt;TreeViewItemData&lt;IPlanetOrGroup&gt;&gt;(planetGroups.Count);
            foreach (var group in planetGroups)
            {
                var planetsInGroup = new List&lt;TreeViewItemData&lt;IPlanetOrGroup&gt;&gt;(group.planets.Count);
                foreach (var planet in group.planets)
                {
                    planetsInGroup.Add(new TreeViewItemData&lt;IPlanetOrGroup&gt;(id++, planet));
                }

                roots.Add(new TreeViewItemData&lt;IPlanetOrGroup&gt;(id++, group, planetsInGroup));
            }
            return roots;
        }
    }
}
</code></pre>
</li>
</ol>

<h2>Create a list view</h2>

<p>To create a list view, first use the UI builder to create a ListView UI control. Then, create a custom Editor window with the ListView and define where to get data for the list in a C# script. Finally, reference the UXML file to the C# script.</p>

<ol>
<li><p>Right-click in the <code>Editor</code> folder.</p></li>
<li><p>Select <strong>Create</strong> &gt; <strong>UI Toolkit</strong> &gt; <strong>Editor Window</strong>.</p></li>
<li><p>In the <strong>C#</strong> box, enter <code>PlanetsListView</code> and clear the USS checkbox. This creates two files: <code>PlanetsListView.uxml</code> and <code>PlanetsListView.cs</code>.</p></li>
<li><p>Double-click <code>PlanetsListView.uxml</code> to open it in the UI Builder.</p></li>
<li><p>In the Hierarchy window, delete the Label control and add the ListView control.</p></li>
<li><p>Select the <strong>ListView</strong> control in the Hierarchy window. </p></li>
<li><p>In the Inspector window, set <strong>Fixed Item Height</strong> to 20. </p></li>
<li>
<p>Save your changes. Your <code>PlanetsListView.uxml</code> should look like the following:</p>

<pre><code class="lang-xml">&lt;ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" xsi="http://www.w3.org/2001/XMLSchema-instance" engine="UnityEngine.UIElements" editor="UnityEditor.UIElements" noNamespaceSchemaLocation="../../../UIElementsSchema/UIElements.xsd" editor-extension-mode="False"&gt;
    &lt;ui:ListView fixed-item-height="20" /&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li>
<p>Replace the contents of <code>PlanetsListView.cs</code> with the following:</p>

<pre><code class="lang-cs">using UnityEditor;
using UnityEngine.UIElements;

public class PlanetsListView : PlanetsWindow
{
    [MenuItem("Planets/Standard List")]
    static void Summon()
    {
        GetWindow&lt;PlanetsListView&gt;("Standard Planet List");
    }

    void CreateGUI()
    {
        uxml.CloneTree(rootVisualElement);
        var listView = rootVisualElement.Q&lt;ListView&gt;();

        // Set ListView.itemsSource to populate the data in the list.
        listView.itemsSource = planets;

        // Set ListView.makeItem to initialize each entry in the list.
        listView.makeItem = () =&gt; new Label();

        // Set ListView.bindItem to bind an initialized entry to a data item.
        listView.bindItem = (VisualElement element, int index) =&gt;
            (element as Label).text = planets[index].name;
    }
}
</code></pre>
</li>
<li><p>In Unity, select <code>PlanetsListView.cs</code> in the Project window, and then drag <code>PlanetsListView.uxml</code> into the <strong>Uxml</strong> field in the <strong>Inspector</strong>.</p></li>
<li><p>From the menu, select <strong>Planets</strong> &gt; <strong>Standard List</strong> to see a list of planets.</p></li>
</ol>

<figure>
<img src="../uploads/Main/planets-listview.png" alt="">
</figure>

<h2>Create a list view with multiple columns</h2>

<p>To create a list view with multiple columns, first create a MultiColumnListView UI control, and define the number of columns and column titles in a UXML file. Then create a custom Editor window with the MultiColumnListView and define where to get data for the list in each column in a C# script. Finally, reference the UXML file to the C# script.</p>

<ol>
<li><p>Right-click in the <code>Editor</code> folder.</p></li>
<li><p>Select <strong>Create</strong> &gt; <strong>UI Toolkit</strong> &gt; <strong>UI Document</strong> to create a UXML file and name it as <code>PlanetsMultiColumnListView.uxml</code>.</p></li>
<li><p>Open <code>PlanetsMultiColumnListView.uxml</code> in a text editor.</p></li>
<li>
<p>Replace the contents of <code>PlanetsMultiColumnListView.uxml</code> with the following:</p>

<pre><code class="lang-xml">&lt;ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" xsi="http://www.w3.org/2001/XMLSchema-instance" engine="UnityEngine.UIElements" editor="UnityEditor.UIElements" noNamespaceSchemaLocation="../../../UIElementsSchema/UIElements.xsd" editor-extension-mode="False"&gt;
    &lt;ui:MultiColumnListView fixed-item-height="20"&gt;
        &lt;!-- Columns and Column aren't Visual Elements or controls. They are considered attributes of MultiColumnListView. --&gt;
        &lt;ui:Columns&gt;
            &lt;ui:Column name="name" title="Name" width="80" /&gt;
            &lt;ui:Column name="populated" title="Populated?" width="80" /&gt;
        &lt;/ui:Columns&gt;
    &lt;/ui:MultiColumnListView&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li><p>In the <code>Editor</code> folder, create a C# file named <code>PlanetsMultiColumnListView.cs</code>.</p></li>
<li>
<p>Replace the contents of <code>PlanetsMultiColumnListView.cs</code> with the following:</p>

<pre><code class="lang-cs">using UnityEditor;
using UnityEngine.UIElements;

public class PlanetsMultiColumnListView : PlanetsWindow
{
    [MenuItem("Planets/Multicolumn List")]
    static void Summon()
    {
        GetWindow&lt;PlanetsMultiColumnListView&gt;("Multicolumn Planet List");
    }

    void CreateGUI()
    {
        uxml.CloneTree(rootVisualElement);
        var listView = rootVisualElement.Q&lt;MultiColumnListView&gt;();

        // Set MultiColumnListView.itemsSource to populate the data in the list.
        listView.itemsSource = planets;

        // For each column, set Column.makeCell to initialize each cell in the column.
        // You can index the columns array with names or numerical indices.
        listView.columns["name"].makeCell = () =&gt; new Label();
        listView.columns["populated"].makeCell = () =&gt; new Toggle();

        // For each column, set Column.bindCell to bind an initialized cell to a data item.
        listView.columns["name"].bindCell = (VisualElement element, int index) =&gt;
            (element as Label).text = planets[index].name;
        listView.columns["populated"].bindCell = (VisualElement element, int index) =&gt;
            (element as Toggle).value = planets[index].populated;
    }
}
</code></pre>
</li>
<li><p>In Unity, select <code>PlanetsMultiColumnListView.cs</code> in the Project window.</p></li>
<li><p>Drag <code>PlanetsMultiColumnListView.uxml</code> into the <strong>Uxml</strong> field in the <strong>Inspector</strong>.</p></li>
<li><p>From the menu, select <strong>Planets</strong> &gt; <strong>Multicolumn List</strong> to see a two-column list. One column has a list of planets. The other column has toggles that indicate whether the planet is populated.</p></li>
</ol>

<figure>
<img src="../uploads/Main/planets-multicolumnlistview.png" alt="">
</figure>

<h2>Create a tree view</h2>

<p>To create a tree view in a custom Editor, first create a TreeView UI control in a UXML file. Then create a custom Editor window with the TreeView and define where to get data for the tree nodes a C# script. Finally reference the UXML file to the C# script.</p>

<ol>
<li><p>In the <code>Editor</code> folder, create a UXML file named <code>PlanetsTreeView.uxml</code>.</p></li>
<li>
<p>Replace the contents of <code>PlanetsTreeView.uxml</code> with the following:</p>

<pre><code class="lang-xml">&lt;ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" xsi="http://www.w3.org/2001/XMLSchema-instance" engine="UnityEngine.UIElements" editor="UnityEditor.UIElements" noNamespaceSchemaLocation="../../../UIElementsSchema/UIElements.xsd" editor-extension-mode="False"&gt;
    &lt;ui:TreeView fixed-item-height="20" /&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li><p>In the <code>Editor</code> folder, create a C# file named <code>PlanetsTreeView.cs</code>.</p></li>
<li>
<p>Replace the contents of <code>PlanetsTreeView.cs</code> with the following:</p>

<pre><code class="lang-cs">using UnityEditor;
using UnityEngine.UIElements;

public class PlanetsTreeView : PlanetsWindow
{
    [MenuItem("Planets/Standard Tree")]
    static void Summon()
    {
        GetWindow&lt;PlanetsTreeView&gt;("Standard Planet Tree");
    }

    void CreateGUI()
    {
        uxml.CloneTree(rootVisualElement);
        var treeView = rootVisualElement.Q&lt;TreeView&gt;();

        // Call TreeView.SetRootItems() to populate the data in the tree.
        treeView.SetRootItems(treeRoots);

        // Set TreeView.makeItem to initialize each node in the tree.
        treeView.makeItem = () =&gt; new Label();

        // Set TreeView.bindItem to bind an initialized node to a data item.
        treeView.bindItem = (VisualElement element, int index) =&gt;
            (element as Label).text = treeView.GetItemDataForIndex&lt;IPlanetOrGroup&gt;(index).name;
    }
}
</code></pre>
</li>
<li><p>In Unity, select <code>PlanetsTreeView.cs</code> in the Project window.</p></li>
<li><p>Drag <code>PlanetsTreeView.uxml</code> into the <strong>Uxml</strong> field in the <strong>Inspector</strong>.</p></li>
<li><p>From the menu, select <strong>Planets</strong> &gt; <strong>Standard Tree</strong> to see two lists of planets grouped by nodes. Each node has an arrow next to it. If you select the arrow, the window shows the planets in the group.</p></li>
</ol>

<figure>
<img src="../uploads/Main/planets-treeview.png" alt="">
</figure>

<h2>Create a tree view with multiple columns</h2>

<p>To create a tree view with multiple columns in a custom Editor, first create a MultiColumnTreeView UI control and define the columns in a UXML file. Then create a custom Editor window with the MultiColumnTreeView and define where to get data for each column in a C# script. Finally, reference the UXML file to the C# script.</p>

<ol>
<li><p>In the <code>Editor</code> folder, create a UXML file named <code>PlanetsMultiColumnTreeView.uxml</code>.</p></li>
<li>
<p>Replace the contents of <code>PlanetsMultiColumnTreeView.uxml</code> with the following:</p>

<pre><code class="lang-xml">&lt;ui:UXML xmlns:ui="UnityEngine.UIElements" xmlns:uie="UnityEditor.UIElements" xsi="http://www.w3.org/2001/XMLSchema-instance" engine="UnityEngine.UIElements" editor="UnityEditor.UIElements" noNamespaceSchemaLocation="../../../UIElementsSchema/UIElements.xsd" editor-extension-mode="False"&gt;
    &lt;ui:MultiColumnTreeView fixed-item-height="20"&gt;
        &lt;!-- Columns and Column aren't Visual Elements or controls; they are considered attributes of MultiColumnListView. --&gt;
        &lt;ui:Columns&gt;
            &lt;ui:Column name="name" title="Name" width="120" /&gt;
            &lt;ui:Column name="populated" title="Populated?" width="80" /&gt;
        &lt;/ui:Columns&gt;
    &lt;/ui:MultiColumnTreeView&gt;
&lt;/ui:UXML&gt;
</code></pre>
</li>
<li><p>In the <code>Editor</code> folder, create a C# file named <code>PlanetsMultiColumnTreeView.cs</code>.</p></li>
<li>
<p>Replace the contents of <code>PlanetsMultiColumnTreeView.cs</code> with the following:</p>

<pre><code class="lang-cs">using UnityEditor;
using UnityEngine.UIElements;
    
public class PlanetsMultiColumnTreeView : PlanetsWindow
{
    [MenuItem("Planets/Multicolumn Tree")]
    static void Summon()
    {
        GetWindow&lt;PlanetsMultiColumnTreeView&gt;("Multicolumn Planet Tree");
    }
    
    void CreateGUI()
    {
        uxml.CloneTree(rootVisualElement);
        var treeView = rootVisualElement.Q&lt;MultiColumnTreeView&gt;();
    
        // Call MultiColumnTreeView.SetRootItems() to populate the data in the tree.
        treeView.SetRootItems(treeRoots);
    
        // For each column, set Column.makeCell to initialize each node in the tree.
        // You can index the columns array with names or numerical indices.
        treeView.columns["name"].makeCell = () =&gt; new Label();
        treeView.columns["populated"].makeCell = () =&gt; new Toggle();
    
        // For each column, set Column.bindCell to bind an initialized node to a data item.
        treeView.columns["name"].bindCell = (VisualElement element, int index) =&gt;
            (element as Label).text = treeView.GetItemDataForIndex&lt;IPlanetOrGroup&gt;(index).name;
        treeView.columns["populated"].bindCell = (VisualElement element, int index) =&gt;
            (element as Toggle).value = treeView.GetItemDataForIndex&lt;IPlanetOrGroup&gt;(index).populated;
    }
}
</code></pre>
</li>
<li><p>In Unity, select <code>PlanetsMultiColumnTreeView.cs</code> in the Project window.</p></li>
<li><p>Drag <code>PlanetsMultiColumnTreeView.uxml</code> into the <strong>Uxml</strong> field in the <strong>Inspector</strong>.</p></li>
<li><p>Select <strong>Planets</strong> &gt; <strong>Multicolumn Tree</strong> to see a list with two columns. The first column has two lists of planets grouped by nodes. Each node has an arrow next to it. If you select the arrow, the window shows a list of planets and toggles in that group.</p></li>
</ol>

<figure>
<img src="../uploads/Main/planets-multicolumntreeview.png" alt="">
</figure>

<h2>其他资源</h2>

<ul>
<li><a href="UIE-create-list-view-complex.html">Create a complex list view</a></li>
<li><a href="UIE-HowTo-CreateRuntimeUI.html">Create a ListView runtime UI</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-uxml-examples.html"></a></span><div class="tip">Structure UI examples</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-create-list-view-complex.html"></a></span><div class="tip">Create a complex list view</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a><a href="https://unity.com/legal">法律条款</a><a href="https://unity.com/legal/privacy-policy">隐私政策</a><a href="https://unity.com/legal/cookie-policy">Cookie</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
