<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Git 依赖关系 - Unity 手册">
<title>Git 依赖关系 - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2022.3/uploads/Main/upm-git-cloning.png">
<meta name="description" content="When the Package Manager fetches a package from a Git repository, it adds the package locally to your project. This allows you to test unpublished changes, but you can&amp;#8217;t use it to contribute to that Git repository. To set up an existing local Git repository as a dependency in your project, use a path to your local Git repository instead.">
<meta property="og:description" content="When the Package Manager fetches a package from a Git repository, it adds the package locally to your project. This allows you to test unpublished changes, but you can&amp;#8217;t use it to contribute to that Git repository. To set up an existing local Git repository as a dependency in your project, use a path to your local Git repository instead.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: '', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'upm-git';
      if(!page) page = 'index';
      var version = '2022.3';
      var docs_versions = [{version: '2023.2',version_string: '2023.2',supported: true},{version: '2023.1',version_string: '2023.1',supported: false},{version: '2022.3',version_string: '2022.3',supported: true},{version: '2022.2',version_string: '2022.2',supported: false},{version: '2022.1',version_string: '2022.1',supported: false},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: false},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: false},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2022.3/Manual/upm-git.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2022.3/Manual/upm-git.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2022.3/Manual/upm-git.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2022.3/Manual/upm-git.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/kr/2022.3/Manual/upm-git.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/2022.3/Documentation/Manual/upm-git.html" hreflang="x-default">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/upm-git.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/upm-git.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/upm-git.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/upm-git.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/upm-git.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/upm-git.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/upm-git.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/upm-git.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/upm-git.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/upm-git.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/upm-git.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/upm-git.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/upm-git.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/upm-git.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/upm-git.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/upm-git.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/upm-git.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/upm-git.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/upm-git.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/upm-git.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/upm-git.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/upm-git.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/upm-git.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/upm-git.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2022.3/Documentation/Manual/upm-git.html">English</a></li>
<li><a data-lang="cn" href="/cn/2022.3/Manual/upm-git.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2022.3/Manual/upm-git.html">日本語</a></li>
<li><a data-lang="kr" href="/kr/2022.3/Manual/upm-git.html">한국어</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2022.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2023.2" href="/cn/2023.2/Manual/upm-git.html">2023.2</a></li>
<li class=""><a class="docs_version_url_2023.1" href="/cn/2023.1/Manual/upm-git.html">2023.1</a></li>
<li class="supported"><a class="docs_version_url_2022.3" href="/cn/2022.3/Manual/upm-git.html">2022.3</a></li>
<li class=""><a class="docs_version_url_2022.2" href="/cn/2022.2/Manual/upm-git.html">2022.2</a></li>
<li class=""><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/upm-git.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/upm-git.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/upm-git.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/upm-git.html">2021.1</a></li>
<li class=""><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/upm-git.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/upm-git.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/upm-git.html">2020.1</a></li>
<li class=""><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/upm-git.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/upm-git.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/upm-git.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/upm-git.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/upm-git.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/upm-git.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/upm-git.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/upm-git.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/upm-git.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/upm-git.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/upm-git.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/upm-git.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/upm-git.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2022.3 (LTS)</a></li>
<li><a href="PackagesList.html">Packages and feature sets</a></li>
<li><a href="Packages.html">Unity 的 Package Manager</a></li>
<li><a href="upm-manifestPrj.html">项目清单</a></li>
<li>Git 依赖关系</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="upm-embed.html"></a></span><div class="tip">嵌入式依赖项</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="upm-localpath.html"></a></span><div class="tip">本地文件夹或 tarball 路径</div>
</div>
</div></div>
<h1>Git 依赖关系</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>When the Package Manager fetches a package from a Git repository, it adds the package locally to your project. This allows you to test unpublished changes, but you can’t use it to contribute to that Git repository. To set up an existing local Git repository as a dependency in your project, use a <a href="upm-localpath.html">path to your local Git repository</a> instead.</p>

<p><strong>Note</strong>: You can’t specify Git dependencies in a <a href="upm-manifestPkg.html">package.json</a> file because the Package Manager doesn’t support Git dependencies between packages. It supports Git dependencies only for projects, so you can declare Git dependencies only in the project’s <a href="upm-manifestPrj.html">manifest.json</a> file.</p>

<p><strong>提示</strong>：如果要从代码仓库将 Git 依赖关系更新到特定版本（<a href="#revision">修订版本</a>），请参阅<a href="#git-locks">已锁定的 Git 依赖关系</a>。</p>

<p>此部分包含以下主题：</p>

<ul>
<li><a href="#req">要求</a></li>
<li>
<a href="#syntax">Git URL 和扩展语法</a>

<ul>
<li><a href="#Git-HTTPS">使用 HTTP/HTTPS 协议</a></li>
<li><a href="#Git-SSH">使用 SSH 协议</a></li>
<li><a href="#Git-FILE">使用 FILE 协议</a></li>
<li><a href="#Git-GIT">使用 GIT 协议</a></li>
<li>
<a href="#revision">以特定修订版本为目标</a>

<ul>
<li><a href="#subfolder">在代码仓库的子文件夹中指定包</a></li>
<li><a href="#paths-and-revisions">同时使用路径和修订版本</a></li>
</ul>
</li>
<li><a href="#subfolder">在子文件夹中指定包</a></li>
</ul>
</li>
<li><a href="#git-locks">已锁定的 Git 依赖关系</a></li>
<li><a href="#git-lfs">Git LFS 支持</a></li>
</ul>

<p><br> </p>

<p><a name="req"></a></p>

<h2>要求</h2>

<p>To use Git dependencies in a project, make sure you installed the <a href="https://git-scm.com/">Git client</a> (minimum version 2.14.0) on your computer and that you have added the Git executable path to the PATH system environment variable.</p>

<p><strong>Warning:</strong> Unity tested the Package Manager to work with Git 2.14.0 and above. Unity can’t guarantee the results if you use Git versions below 2.14.0.</p>

<p>If the repository tracks files with <a href="https://git-lfs.github.com/">Git LFS</a>, make sure the Git LFS client is also installed on your machine. If it’s not installed, the Package Manager <a href="upm-errors.html#git-lfs">can’t retrieve the files stored on the LFS server</a> and instead checks out the LFS pointer files without any error or warning messages.</p>

<p>可以使用 Package Manager 窗口直接从 Git 代码仓库安装包。有关更多信息，请参阅<a href="upm-ui-giturl.html">从 Git URL 安装</a>。</p>

<p><a name="syntax"></a></p>

<h2>Git URL 和扩展语法</h2>

<p>The Package Manager supports all <a href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols">Git protocols</a>, with the exception of local file paths. To specify a Git URL as a dependency, add the name of the package to add with a Git URL instead of the version number or local file path to the project manifest. For example, this demonstrates how to specify a remote Git using different protocols:</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "https://github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "ssh://git@github.example.com/myuser/myrepository2.git",
    "com.mycompany.mypackage3": "file://localhost/github.example.com/myuser/myrepository3.git",
    "com.mycompany.mypackage4": "git://github.example.com/myuser/myrepository4.git",
    etc.
  }
}
</code></pre>

<p>The Package Manager recognizes that a dependency formatted as a URL is a Git URL by looking for the <code>.git</code> file extension at the end of the repository path. Some Git repository hosting services don’t support URLs with this extension while others enforce it. For this reason, the Git dependency syntax allows you to omit the extension if you use the <a href="#Git-GIT">GIT protocol</a>, or if you add a special <code>git+</code> prefix to the <a href="#Git-HTTPS">HTTP/HTTPS</a>, <a href="#Git-SSH">SSH</a>, or <a href="#Git-FILE">FILE</a> URL.</p>

<p><strong>Note:</strong> The <code>git+</code> prefix is a special marker in the <code>manifest.json</code> file that indicates that the dependency is Git based. The Package Manages doesn’t pass it to Git when cloning the repository.</p>

<p>有关 Git 支持的 URL 格式的更多信息，请参阅适用于 git <a href="https://git-scm.com/docs/git-clone#_git_urls_a_id_urls_a">clone</a> 命令的文档。有关 Git 使用的各种协议之间的差异概述，请参阅<a href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols">有关使用协议的 Git 文档</a>。</p>

<p>You can also use extended syntax for Git dependencies:</p>

<ul>
<li>
<p>If the package you want isn’t at the root of the repository, you can specify a path to a package’s subfolder in the repository. This is necessary only if the package you want isn’t at the root of the repository. For example, the string <code>?path=/folder1/folder2</code> in:</p>

<p><code>"https://github.example.com/myuser/myrepository.git?path=/folder1/folder2"</code>。</p>

<p>有关更多信息，请参阅<a href="#subfolder">在子文件夹中指定包</a>。</p>
</li>
<li>
<p>You can specify a Git revision, which can be a tag, branch name, or a specific commit hash to lock onto. This ensures that the Package Manager always loads that exact revision. If you don’t specify a revision, the Package Manager clones the repository at the default branch and latest commit and locks onto that revision. For example, the string <code>#v2.0.0</code> in:</p>

<p><code>"https://github.example.com/myuser/myrepository.git#v2.0.0"</code></p>

<p>有关更多信息，请参阅<a href="#revision">以特定修订版本为目标</a>。</p>
</li>
</ul>

<p><a name="Git-HTTPS"></a></p>

<h3>使用 HTTP/HTTPS 协议</h3>

<p>可以使用带有完整 URL 的 HTTPS 协议：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "https://github.example.com/myuser/myrepository.git"
  }
}
</code></pre>

<p>If your Git server doesn’t support the <code>.git</code> extension, you can add the special <code>git+</code> prefix, with or without the extension:</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git+https://github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "git+https://github.example.com/myuser/myrepository2"
  }
}
</code></pre>

<p><strong>注意</strong>：或者，可以使用 GIT 协议而不是 <code>git+</code> 前缀。有关更多信息，请参阅<a href="#Git-GIT">使用 GIT 协议</a>。</p>

<p>如果代码仓库可公开访问，则 HTTPS 是用于与用户共享 Git URL 的推荐方案，因为可以直接从 Git 代码仓库托管服务网页复制和粘贴 URL。</p>

<figure>
<img src="../uploads/Main/upm-git-cloning.png" alt="从包代码仓库复制 URL">
<figcaption>从包代码仓库复制 URL</figcaption>
</figure>

<p>If the repository isn’t publicly accessible and you are using HTTPS, the repository server fails to authenticate you because you can’t interact with the server to provide your credentials. In this case, the Editor notifies you that authentication failed.</p>

<p>To work around these authentication issues, you can either use a <a href="https://git-scm.com/docs/gitcredentials">Git credentials helper</a> to authenticate beforehand, or use the <a href="#Git-SSH">SSH protocol</a> instead. If you set up and configure an SSH key pair with the Git repository hosting service, the Package Manager can authenticate the request seamlessly on your behalf.</p>

<p><a name="Git-SSH"></a></p>

<h3>使用 SSH 协议</h3>

<p>可以使用带有完整 URL 的 SSH 协议：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "ssh://git@mycompany.github.com/gitproject/com.mycompany.mypackage.git"
  }
}
</code></pre>

<p>If your Git server doesn’t support the <code>.git</code> extension, you can add the special <code>git+</code> prefix, with or without the extension:</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git+ssh://git@github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "git+ssh://git@github.example.com/myuser/myrepository2"
  }
}
</code></pre>

<p><strong>注意</strong>：或者，可以使用 GIT 协议而不是 <code>git+</code> 前缀。有关更多信息，请参阅<a href="#Git-GIT">使用 GIT 协议</a>。</p>

<p>还可以使用类似 SCP 的速记，Package Manager 会始终将它识别为 Git 依赖关系：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "git@mycompany.github.com:gitproject/com.mycompany.mypackage.git"
  }
}
</code></pre>

<h4>在 Windows 上使用 PuTTY</h4>

<p>当您使用 SSH 进行身份验证时，Git 会使用默认位置的密钥。但是，如果您在 Windows 上使用 <a href="https://www.putty.org/">PuTTY</a> 作为 SSH 客户端，则需要配置 <code>GIT_SSH</code> 环境变量以使其指向 <code>plink.exe</code>。</p>

<h4>使用 SSH 进行身份验证</h4>

<p>如果要使用 SSH 协议，则需要在 Unity 外部设置 SSH 密钥。有关为特定主机设置身份验证的更多信息，请参阅 <a href="https://support.atlassian.com/bitbucket-cloud/docs/set-up-an-ssh-key/">Bitbucket</a>、<a href="https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html">GitLab</a> 和 <a href="https://github.com/settings/tokens">GitHub</a> 的帮助页面。</p>

<p><strong>注意</strong>：如果您使用口令短语对 SSH 密钥进行加密，则 Package Manager 无法获取包，因为它未提供用于在终端或命令行中输入口令短语的方式。在这种情况下，编辑器会通知您身份验证失败。有关使用 <strong>ssh-agent</strong> 进行身份验证的帮助，请参阅<a href="upm-errors.html#ssh-add">适用于 SSH 的解决方案</a>。</p>

<p><a name="Git-FILE"></a></p>

<h3>使用 FILE 协议</h3>

<p>The Package Manager doesn’t recognize Git URLs with the <code>file:</code> prefix as Git dependencies unless they’re properly formatted. This means you must use either the <code>git+file:</code> protocol, or the <code>.git</code> suffix with the <code>file:</code> protocol:</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git+file://github.example.com/myuser/myrepository1",
    "com.mycompany.mypackage2": "git+file:///github.example.com/myuser/myrepository2",
    "com.mycompany.mypackage3": "file:///github.example.com/myuser/myrepository3.git"
  }
}
</code></pre>

<p><strong>注意</strong>：或者，可以使用 GIT 协议而不是 <code>git+</code> 前缀。有关更多信息，请参阅<a href="#Git-GIT">使用 GIT 协议</a>。</p>

<p>相反，Package Manager 会将任何其他语法解释为<a href="upm-localpath.html">本地路径</a>。</p>

<p><a name="Git-GIT"></a></p>

<h3>使用 GIT 协议</h3>

<p>Package Manager 可识别 <code>git:</code> 协议（带或不带 <code>.git</code> 路径后缀）：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "git://github.example.com/myuser/myrepository1.git",
    "com.mycompany.mypackage2": "git://github.example.com/myuser/myrepository2"
  }
}
</code></pre>

<p>GIT 协议不需要也不支持 <code>git+</code> 前缀。</p>

<p><a name="revision"></a></p>

<h3>定位某个特定修订版本</h3>

<p>若要声明希望 Package Manager 克隆的特定修订版本，请在 URL 末尾添加以数字符号 (<code>#</code>) 作为前缀的修订版本：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "https://github.example.com/myuser/myrepository1.git#revision",
    "com.mycompany.mypackage2": "git+https://github.example.com/myuser/myrepository2#revision"
  }
}
</code></pre>

<p>The revision can be any tag, branch or commit hash. You must provide a full commit hash. Unity doesn’t support shortened SHA–1 hashes. This table shows examples for specifying revisions:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>语法：</strong></th>
	<th style="text-align:left;"><strong>URL 示例</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">最新默认分支</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git"</code></td>
</tr>
<tr>
	<td style="text-align:left;">特定分支</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git#my-branch"</code></td>
</tr>
<tr>
	<td style="text-align:left;">特定版本</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git#v2.0.0"</code></td>
</tr>
<tr>
	<td style="text-align:left;">提交哈希</td>
	<td style="text-align:left;"><code>"https://github.example.com/myuser/myrepository.git#9e72f9d5a6a3dadc38d813d8399e1b0e86781a49"</code></td>
</tr>
</tbody>
</table>

<p><a name="subfolder"></a></p>

<h4>在代码仓库的子文件夹中指定包</h4>

<p>If you specify a repository using the Git URL syntax, the Package Manager assumes that the package must be at the root of the repository. However, some packages aren’t located at the root level of their repository, and some repositories contain more than one package.</p>

<p>可以在 Git URL 中使用 <code>path</code> 查询参数向 Package Manager 通知包的位置。指定的路径必须相对于代码仓库的根目录，并且指定的子文件夹必须包含包清单（<code>package.json</code> 文件）。</p>

<p>若要为 Git 依赖关系指定代码仓库子文件夹，请使用 <code>path</code> 查询参数：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "https://github.example.com/myuser/myrepository.git?path=/subfolder"
  }
}
</code></pre>

<p>In this case, the Package Manager registers the package located in the specified repository subfolder and disregards the rest of the repository.</p>

<p>有时一个代码仓库包含多个相关包。如果要从同一个代码仓库添加多个包，则必须向项目清单添加两个单独的条目：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage1": "https://github.example.com/myuser/myrepository.git?path=/subfolder1",
    "com.mycompany.mypackage3": "https://github.example.com/myuser/myrepository.git?path=/subfolder2/subfolder3"
  }
}
</code></pre>

<p><strong>注意</strong>：如果多次指定同一个代码仓库，则 Package Manager 会多次克隆同一个代码仓库，这会导致性能下降和额外的网络使用。</p>

<p><a name="paths-and-revisions"></a></p>

<h4>同时使用路径和修订版本</h4>

<p><code>path</code> 查询参数始终位于修订版本锚点之前。相反顺序会失败。下面是要使用的正确顺序的示例：</p>

<pre><code class="lang-json">{
  "dependencies": {
    "com.mycompany.mypackage": "https://github.example.com/myuser/myrepository.git?path=/example/folder#v1.2.3"
  }
}
</code></pre>

<p><a name="git-locks"></a></p>

<h2>已锁定的 Git 依赖关系</h2>

<p>One of the core principles of the Package Manager is determinism. If you share your project with other users, the Package Manager should install the same set of package dependencies and versions, and that includes packages that it fetches from Git. To achieve this, the Package Manager tracks commit hashes of Git dependencies by using a <a href="upm-conflicts-auto.html">lock file</a>.</p>

<p>添加修订版本设置为分支或标签的 Git 依赖关系时，Package Manager 会获取相应的提交哈希以存储在锁定文件中。随着时间推移，分支和标签可以指向 Git 代码仓库上的不同提交。例如，一个分支可以添加更新的提交。</p>

<p>To update the package to a different commit that a branch or tag points to, use the <a href="upm-ui-giturl.html">Add package from git URL</a> button and enter a Git URL. You can use the same Git URL, because the Package Manager ignores the locked commit hash when you submit a new request. However, you can also specify a new revision number, tag, or branch as a <a href="#revision">revision</a> instead.</p>

<p>或者，可以使用带有该 Git URL 的 <a href="../ScriptReference/PackageManager.Client.Add.html">Client.Add</a> C# API 方法创建脚本。</p>

<p><br> </p>

<p><a name="git-lfs"></a></p>

<h2>Git LFS 支持</h2>

<p>The Package Manager supports Git dependencies with repositories using Git LFS. Since Git LFS is designed to work with minimal configuration overhead, it supports both HTTPS and SSH authentication:</p>

<ul>
<li>For information about HTTPS authentication, see <a href="#Git-HTTPS">Using the HTTP/HTTPS protocol</a>.</li>
<li>For information about SSH authentication, see <a href="#Git-SSH">Using the SSH protocol</a>.</li>
</ul>

<p>Retrieval of files stored on the LFS server fails if users need authentication and don’t have valid credentials with permission to access the remote repository.</p>

<p>包作者可以通过在代码仓库中的 <code>.lfsconfig</code> 配置文件中提供 URL 来帮助 Git LFS 客户端定位 LFS 服务器。有两种方式可以做到这一点：</p>

<pre><code class="lang-json"># Option 1: global setting
[lfs]
  url = ssh://git@HOSTNAME/path/to/repo.git

# Option 2: per-remote setting
[remote "origin"]
  lfsurl = ssh://git@HOSTNAME/path/to/repo.git
</code></pre>

<p>如果代码仓库包含 <code>.lfsconfig</code> 文件，请确保将它包含在 <code>.npmignore</code> 文件中，以避免将它包含在包的已发布版本中。</p>

<h3>Git LFS 缓存</h3>

<p>As of Unity 2021.2, you can optionally enable a Git LFS cache for the Package Manager to use when checking out Git-based dependencies. This avoids having to download the same file every time you check out a different revision of the repository.</p>

<p>The Git LFS cache for the Package Manager is different from the Git LFS cache in the .git/lfs folder of your Git repository. The Package Manager can’t use the default Git cache because it doesn’t keep cloned repositories after it copies packages to the project cache.</p>

<p>To enable the Git LFS cache for the Package Manager, choose one of the following options:</p>

<ul>
<li>要启用 Git LFS 缓存并使用<a href="upm-cache.html">默认全局缓存根</a>下的 <code>git-lfs</code> 子文件夹作为其位置，请将 <code>UPM_ENABLE_GIT_LFS_CACHE</code> 环境变量设置为任何（非空）值。</li>
<li>要启用 Git LFS 缓存并为其使用自定义位置，请将 <code>UPM_GIT_LFS_CACHE_PATH</code> 环境变量设置为自定义路径。当您设置位置时，Git LFS 缓存选项会自动启用。</li>
</ul>

<p>For more information about how to set environment variables for the global cache, see <a href="upm-config-cache.html">Customize the global cache location</a>.</p>

<p><strong>Note:</strong> This optimization requires extra disk space when using Git LFS-enabled packages. You need to decide which is the greater benefit: Git LFS file caching costs disk space but saves you from downloading the same files again. However, some situations can’t make use of the cache and use up disk space without reusing the files. For example, your Git dependencies might resolve to revisions that reference different LFS-tracked file content, such as these scenarios:</p>

<ul>
<li>在多个项目的依赖项中使用不同的 Git 修订版本</li>
<li>经常将包更新为包含不同更改的 LFS 文件的修订版本</li>
</ul>

<h2>其他资源</h2>

<ul>
<li><a href="https://git-lfs.github.com/" target="_blank" rel="noopener noreferrer">Git Large File Storage (LFS)</a></li>
<li><a href="https://git-scm.com/book/en/v2/Git-on-the-Server-The-Protocols" target="_blank" rel="noopener noreferrer">Git on the Server - The Protocols</a></li>
<li><a href="upm-ui-giturl.html">Installing from a Git URL</a></li>
</ul>

<p><br> </p>

<hr>

<p><br> </p>

<ul>
<li><span class="page-history">在 Unity <a href="https://docs.unity3d.com/2019.4/Documentation/Manual/30_search.html?q=newin20194">2019.4</a> 中添加了锁定文件 <span class="search-words">NewIn20194</span></span></li>
<li><span class="page-history">在 Unity <a href="https://docs.unity3d.com/2019.4/Documentation/Manual/30_search.html?q=newin20194">2019.4</a> 中添加了子文件夹中的 Git 依赖关系 <span class="search-words">NewIn20194</span></span></li>
<li><span class="page-history">在 Unity <a href="https://docs.unity3d.com/2019.4/Documentation/Manual/30_search.html?q=newin20194">2019.4</a> 中添加了用于 Git 依赖项的 Git LFS 缓存 <span class="search-words">NewIn20194</span></span></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="upm-embed.html"></a></span><div class="tip">嵌入式依赖项</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="upm-localpath.html"></a></span><div class="tip">本地文件夹或 tarball 路径</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2022.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">商标和使用条款</a><a href="https://unity.com/legal">法律条款</a><a href="https://unity.com/legal/privacy-policy">隐私政策</a><a href="https://unity.com/legal/cookie-policy">Cookie</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">不要出售或分享我的个人信息</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
