<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: ShaderLab command: Stencil</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SL-Stencil.html">English</a></li>
<li><a href="/cn/current/Manual/SL-Stencil.html">中文</a></li>
<li><a href="/ja/current/Manual/SL-Stencil.html">日本語</a></li>
<li><a href="/kr/current/Manual/SL-Stencil.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SL-Stencil.html">English</a></li>
<li><a href="/cn/current/Manual/SL-Stencil.html">中文</a></li>
<li><a href="/ja/current/Manual/SL-Stencil.html">日本語</a></li>
<li><a href="/kr/current/Manual/SL-Stencil.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="Shaders.html">Shaders</a></li>
<li><a href="shader-writing.html">Writing shaders</a></li>
<li><a href="SL-Reference.html">ShaderLab</a></li>
<li><a href="shader-shaderlab-commands.html">ShaderLab: commands</a></li>
<li>ShaderLab command: Stencil</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-Offset.html"></a></span><div class="tip">ShaderLab command: Offset</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-UsePass.html"></a></span><div class="tip">ShaderLab command: UsePass</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>ShaderLab command: Stencil</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Configures settings relating to the <span class="tooltip"><strong>stencil buffer</strong><span class="tooltiptext">A memory store that holds an 8-bit per-pixel value. In Unity, you can use a stencil buffer to flag pixels, and then only render to pixels that pass the stencil operation. <a class="tooltipMoreInfoLink" href="class-RenderTexture.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#stencilbuffer">Glossary</a></span></span></span> on the GPU.</p>

<p>The stencil buffer stores an 8-bit integer value for each <span class="tooltip"><strong>pixel</strong><span class="tooltiptext">The smallest unit in a computer image. Pixel size depends on your screen resolution. Pixel lighting is calculated at every screen pixel. <a class="tooltipMoreInfoLink" href="ShadowPerformance.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#pixel">Glossary</a></span></span></span> in the frame buffer. Before executing the fragment <span class="tooltip"><strong>shader</strong><span class="tooltiptext">A program that runs on the GPU. <a href="Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shader">Glossary</a></span></span></span> for a given pixel, the GPU can compare the current value in the stencil buffer against a given reference value. This is called a stencil test. If the stencil test passes, the GPU performs the depth test. If the stencil test fails, the GPU skips the rest of the processing for that pixel. This means that you can use the stencil buffer as a mask to tell the GPU which pixels to draw, and which pixels to discard.</p>

<p>You would typically use the stencil buffer for special effects such as portals or mirrors. Additionally, the stencil buffer is sometimes used when rendering hard shadows, or <a href="https://en.wikipedia.org/wiki/Constructive_solid_geometry?">constructive solid geometry (CSG)</a>.</p>

<h2>Render pipeline compatibility</h2>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Feature name</strong></th>
	<th style="text-align:left;"><strong>Built-in <span class="tooltip"><strong>Render Pipeline</strong><span class="tooltiptext">A series of operations that take the contents of a Scene, and displays them on a screen. Unity lets you choose from pre-built render pipelines, or write your own. <a class="tooltipMoreInfoLink" href="render-pipelines.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Renderpipeline">Glossary</a></span></span></span></strong></th>
	<th style="text-align:left;"><strong>Universal Render Pipeline (URP)</strong></th>
	<th style="text-align:left;"><strong>High Definition Render Pipeline (HDRP)</strong></th>
	<th style="text-align:left;"><strong>Custom SRP</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><strong>Stencil</strong></td>
	<td style="text-align:left;">Yes</td>
	<td style="text-align:left;">Yes</td>
	<td style="text-align:left;">Yes</td>
	<td style="text-align:left;">Yes</td>
</tr>
</tbody>
</table>

<h2>Usage</h2>

<p>This command makes a change to the render state. Use it in a <code>Pass</code> block to set the render state for that Pass, or use it in a <code>SubShader</code> block to set the render state for all Passes in that SubShader.</p>

<p>You can use the <code>Stencil</code> command to do two different things: to configure the stencil test, and to configure what the GPU writes to the stencil buffer. You can do both of these things in the same command, but the most common use case is to create one <span class="tooltip"><strong>Shader object</strong><span class="tooltiptext">An instance of the Shader class, a Shader object is container for shader programs and GPU instructions, and information that tells Unity how to use them. Use them with materials to determine the appearance of your scene. <a class="tooltipMoreInfoLink" href="shader-objects.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shaderobject">Glossary</a></span></span></span> that masks out areas of the screen that other Shader objects cannot draw to. To do this, you need to configure the first Shader object to always pass the stencil test and write to the stencil buffer, and configure the others to perform a stencil test and not write to the stencil buffer.</p>

<p>Use the <code>Ref</code>, <code>ReadMask</code>, and <code>Comp</code> parameters to configure the stencil test. Use the <code>Ref</code>, <code>WriteMask</code>, <code>Pass</code>, <code>Fail</code>, and <code>ZFail</code> parameters to configure the stencil write operation.</p>

<p>The stencil test equation is:</p>

<pre><code>(ref &amp; readMask) comparisonFunction (stencilBufferValue &amp; readMask)
</code></pre>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Signature</strong></th>
	<th style="text-align:left;"><strong>Example syntax</strong></th>
	<th style="text-align:left;"><strong>Function</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">
<code>Stencil</code><br><code>{</code><br>    <code>Ref &lt;ref&gt;</code><br>    <code>ReadMask &lt;readMask&gt;</code><br>    <code>WriteMask &lt;writeMask&gt;</code><br>    <code>Comp &lt;comparisonOperation&gt;</code><br>    <code>Pass &lt;passOperation&gt;</code><br>    <code>Fail &lt;failOperation&gt;</code><br>    <code>ZFail &lt;zFailOperation&gt;</code><br>    <code>CompBack &lt;comparisonOperationBack&gt;</code><br>    <code>PassBack &lt;passOperationBack&gt;</code><br>    <code>FailBack &lt;failOperationBack&gt;</code><br>    <code>ZFailBack &lt;zFailOperationBack&gt;</code><br>    <code>CompFront &lt;comparisonOperationFront&gt;</code><br>    <code>PassFront &lt;passOperationFront&gt;</code><br>    <code>FailFront &lt;failOperationFront&gt;</code><br>    <code>ZFailFront &lt;zFailOperationFront&gt;</code><br><code>}</code><br><br>Note that all parameters are optional.</td>
	<td style="text-align:left;">
<code>Stencil</code><br><code>{</code><br>    <code>Ref 2</code><br>    <code>Comp equal</code><br>    <code>Pass keep</code><br>    <code>ZFail decrWrap</code><br><code>}</code>
</td>
	<td style="text-align:left;">Configures the stencil buffer according to the given parameters.</td>
</tr>
</tbody>
</table>

<h2>Valid parameter values</h2>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Parameter</strong></th>
	<th style="text-align:left;"><strong>Value</strong></th>
	<th style="text-align:left;"><strong>Function</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><strong>ref</strong></td>
	<td style="text-align:left;">An integer. Range 0 through 255. Default is 0.</td>
	<td style="text-align:left;">The reference value.<br><br>The GPU compares the current contents of the stencil buffer against this value, using the operation defined in comparisonOperation.<br><br>This value is masked with readMask or writeMask, depending on whether a read or a write operation is occurring.<br><br>The GPU can also write this value to the stencil buffer, if Pass, Fail or ZFail have a value of Replace.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>readMask</strong></td>
	<td style="text-align:left;">An integer. Range 0 through 255. Default is 255.</td>
	<td style="text-align:left;">The GPU uses this value as a mask when it performs the stencil test.<br><br>See above for the stencil test equation.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>writeMask</strong></td>
	<td style="text-align:left;">An integer. Range 0 through 255. Default is 255.</td>
	<td style="text-align:left;">The GPU uses this value as a mask when it writes to the stencil buffer.<br><br>Note that, like other masks, it specifies which bits are included in the operation. For example, a value of 0 means that no bits are included in the write operation, not that the stencil buffer receives a value of 0.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>comparisonOperation</strong></td>
	<td style="text-align:left;">A comparison operation. See <a href="#comparison-operation-values">Comparison operation values</a> for valid values. Default is Always.</td>
	<td style="text-align:left;">The operation that the GPU performs for the stencil test for all pixels.<br><br>This defines the operation for all pixels, regardless of facing. If this is defined in addition to comparisonOperationBack and comparisonOperationFront, this value overrides them.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>passOperation</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel pases both the stencil test and the depth test.<br><br>This defines the operation for all pixels, regardless of facing. If this is defined in addition to passOperationBack and passOperationFront, this value overrides them.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>failOperation</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel fails the stencil test.<br><br>This defines the operation for all pixels, regardless of facing. If this is defined in addition to failOperationBack and failOperationFront, this value overrides them.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>zFailOperation</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel passes the stencil test, but fails the depth test.<br><br>This defines the operation for all pixels, regardless of facing. If this is defined in addition to zFailOperationBack and zFailOperationFront, this value overrides them.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>comparisonOperationBack</strong></td>
	<td style="text-align:left;">A comparison operation. See <a href="#comparison-operation-values">Comparison operation values</a> for valid values. Default is Always.</td>
	<td style="text-align:left;">The operation that the GPU performs for the stencil test.<br><br>This defines the operation for back-facing pixels only. If comparisonOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>passOperationBack</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel pases both the stencil test and the depth test.<br><br>This defines the operation for back-facing pixels only. If passOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>failOperationBack</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel fails the stencil test.<br><br>This defines the operation for back-facing pixels only. If failOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>zFailOperationBack</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel passes the stencil test, but fails the depth test.<br><br>This defines the operation for back-facing pixels only. If zFailOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>comparisonOperationFront</strong></td>
	<td style="text-align:left;">A comparison operation. See <a href="#comparison-operation-values">Comparison operation values</a> for valid values. Default is Always.</td>
	<td style="text-align:left;">The operation that the GPU performs for the stencil test.<br><br>This defines the operation for front-facing pixels only. If comparisonOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>passOperationFront</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel pases both the stencil test and the depth test.<br><br>This defines the operation for front-facing pixels only. If passOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>failOperationFront</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel fails the stencil test.<br><br>This defines the operation for front-facing pixels only. If failOperation is defined, that value overrides this one.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>zFailOperationFront</strong></td>
	<td style="text-align:left;">A stencil operation. See <a href="#stencil-operation-values">Stencil operation values</a> for valid values. Default is Keep.</td>
	<td style="text-align:left;">The operation that the GPU performs on the stencil buffer when a pixel passes the stencil test, but fails the depth test.<br><br>This defines the operation for front-facing pixels only. If zFailOperation is defined, that value overrides this one.</td>
</tr>
</tbody>
</table>

<p><a name="comparison-operation-values"></a></p>

<h3>Comparison operation values</h3>

<p>In C#, these values are represented by the <a href="../ScriptReference/Rendering.CompareFunction.html">Rendering.CompareFunction</a> enum.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Value</strong></th>
	<th style="text-align:left;"><strong>Corresponding integer value in Rendering.CompareFunction enum</strong></th>
	<th style="text-align:left;"><strong>Function</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>Never</code></td>
	<td style="text-align:left;">1</td>
	<td style="text-align:left;">Never render pixels.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Less</code></td>
	<td style="text-align:left;">2</td>
	<td style="text-align:left;">Render pixels when their reference value is less than the current value in the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Equal</code></td>
	<td style="text-align:left;">3</td>
	<td style="text-align:left;">Render pixels when their reference value is equal to the current value in the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>LEqual</code></td>
	<td style="text-align:left;">4</td>
	<td style="text-align:left;">Render pixels when their reference value is less than or equal to the current value in the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Greater</code></td>
	<td style="text-align:left;">5</td>
	<td style="text-align:left;">Render pixels when their reference value is greater than the current value in the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>NotEqual</code></td>
	<td style="text-align:left;">6</td>
	<td style="text-align:left;">Render pixels when their reference value differs from the current value in the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>GEqual</code></td>
	<td style="text-align:left;">7</td>
	<td style="text-align:left;">Render pixels when their reference value is greater than or equal to the current value in the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Always</code></td>
	<td style="text-align:left;">8</td>
	<td style="text-align:left;">Always render pixels.</td>
</tr>
</tbody>
</table>

<p><a name="stencil-operation-values"></a></p>

<h3>Stencil operation values</h3>

<p>In C#, these values are represented by the <a href="../ScriptReference/Rendering.StencilOp.html">Rendering.Rendering.StencilOp</a> enum.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Value</strong></th>
	<th style="text-align:left;"><strong>Corresponding integer value in Rendering.StencilOp enum</strong></th>
	<th style="text-align:left;"><strong>Function</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>Keep</code></td>
	<td style="text-align:left;">0</td>
	<td style="text-align:left;">Keep the current contents of the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Zero</code></td>
	<td style="text-align:left;">1</td>
	<td style="text-align:left;">Write 0 into the stencil buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Replace</code></td>
	<td style="text-align:left;">2</td>
	<td style="text-align:left;">Write the reference value into the buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>IncrSat</code></td>
	<td style="text-align:left;">3</td>
	<td style="text-align:left;">Increment the current value in the buffer. If the value is 255 already, it stays at 255.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>DecrSat</code></td>
	<td style="text-align:left;">4</td>
	<td style="text-align:left;">Decrement the current value in the buffer. If the value is 0 already, it stays at 0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>Invert</code></td>
	<td style="text-align:left;">5</td>
	<td style="text-align:left;">Negate all the bits of the current value in the buffer.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>IncrWrap</code></td>
	<td style="text-align:left;">6</td>
	<td style="text-align:left;">Increment the current value in the buffer. If the value is 255 already, it becomes 0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>DecrWrap</code></td>
	<td style="text-align:left;">7</td>
	<td style="text-align:left;">Decrement the current value in the buffer. If the value is 0 already, it becomes 255.</td>
</tr>
</tbody>
</table>

<h2>Examples</h2>

<pre><code>Shader &quot;Examples/CommandExample&quot;
{
    SubShader
    {
         // The rest of the code that defines the SubShader goes here.

        Pass
        {    
             // All pixels in this Pass will pass the stencil test and write a value of 2 to the stencil buffer
             // You would typically do this if you wanted to prevent subsequent shaders from drawing to this area of the render target or restrict them to render to this area only
             Stencil
             {
                 Ref 2
                 Comp Always
                 Pass Replace
             }            

             // The rest of the code that defines the Pass goes here.
        }
    }
}
</code></pre>

<p>This example code demonstrates the syntax for using this command in a SubShader block.</p>

<pre><code>Shader &quot;Examples/CommandExample&quot;
{
    SubShader
    {
             // All pixels in this SubShader pass the stencil test only if the current value of the stencil buffer is less than 2
             // You would typically do this if you wanted to only draw to areas of the render target that were not &quot;masked out&quot;
             Stencil
             {
                 Ref 2
                 Comp Less
             }  

         // The rest of the code that defines the SubShader goes here.        

        Pass
        {    
              // The rest of the code that defines the Pass goes here.
        }
    }
}
</code></pre>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-Offset.html"></a></span><div class="tip">ShaderLab command: Offset</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-UsePass.html"></a></span><div class="tip">ShaderLab command: UsePass</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
