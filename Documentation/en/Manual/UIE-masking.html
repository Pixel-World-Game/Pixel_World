<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Apply masking effects in UI Toolkit</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-masking.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-masking.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-masking.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-masking.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UIE-masking.html">English</a></li>
<li><a href="/cn/current/Manual/UIE-masking.html">中文</a></li>
<li><a href="/ja/current/Manual/UIE-masking.html">日本語</a></li>
<li><a href="/kr/current/Manual/UIE-masking.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UIToolkits.html">User interface (UI)</a></li>
<li><a href="UIElements.html">UI Toolkit</a></li>
<li><a href="UIE-USS.html">Style UI</a></li>
<li>Apply masking effects in UI Toolkit</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-tss.html"></a></span><div class="tip">Theme Style Sheet (TSS)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-ui-debugger.html"></a></span><div class="tip">UI Toolkit Debugger</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Apply masking effects in UI Toolkit</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Masking is a technique that lets you control which parts of a <span class="tooltip"><strong>UI</strong><span class="tooltiptext">(User Interface) Allows a user to interact with your application. Unity currently supports three UI systems. <a class="tooltipMoreInfoLink" href="UI-system-compare.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UI">Glossary</a></span></span></span> element are visible. In UI Toolkit, you can use USS property <code>overflow: hidden</code> to hide parts of a UI element that are outside the bounds of another UI element.</p>

<h2>Masking with an element</h2>

<p>You can use an element to mask another element. To make a masking effect with an element, add the masking element as the parent element of the masked element. Set the <code>overflow</code> property to <code>hidden</code> on the masking element. This hides the parts of the masked element that are outside the bounds of the masking element.</p>

<p>The following example shows how to make a masking effect with a rectangle shape and a rounded corner shape. </p>

<figure>
<img src="../uploads/Main/uitk/masks.gif" alt="Making examples with and without rounded corners">
<figcaption>Making examples with and without rounded corners</figcaption>
</figure>

<p>In the example, the <code>#MaskSquare</code> and <code>MaskRounded</code> elements are the masking elements, and the <code>Logo1</code> and <code>Logo2</code> elements are the masked elements. The masking elements are the parent elements of the masked elements. The example uses a <code>VisualElement</code> with a background image to demonstrate the masking effect. You can apply the masking technique to any element, such as a Label or a Button.</p>

<p>The <code>#MaskRounded</code> element has a <code>border-radius</code> property set to <code>50px</code>. This creates a rounded corner masking effect.</p>

<p>The UXML looks like this:</p>

<pre><code class="lang-xml">&lt;UXML&gt;
    &lt;VisualElement name=&quot;MaskSquare&quot; &gt;
        &lt;VisualElement name=&quot;Logo1&quot; /&gt;
    &lt;/VisualElement&gt;
    &lt;VisualElement name=&quot;MaskRounded&quot; &gt;
        &lt;VisualElement name=&quot;Logo2&quot;  /&gt;
    &lt;/VisualElement&gt;
&lt;/UXML&gt;
</code></pre>

<p>The USS looks like this:</p>

<pre><code class="lang-css">#MaskSquare {
    overflow: hidden;
}

#MaskRounded {
    overflow: hidden;
    border-radius: 50px;
}

#Logo1, #Logo2 {
    background-image: url(&quot;unity-logo.png&quot;);
}
</code></pre>

<h2>Masking with arbitrary shapes</h2>

<p>To make a masking effect with an arbitrary shape, set an SVG as the background image of the masking element as shown below:</p>

<figure>
<img src="../uploads/Main/uitk/masks-svg.gif" alt="A masking example with SVG">
<figcaption>A masking example with SVG</figcaption>
</figure>

<p>The UXML looks like this:</p>

<pre><code class="lang-xml">&lt;UXML&gt;
    &lt;VisualElement name=&quot;MaskSVG&quot; &gt;
        &lt;VisualElement name=&quot;Logo3&quot; /&gt;
    &lt;/VisualElement&gt;
&lt;/UXML&gt;
</code></pre>

<p>The USS looks like this:</p>

<pre><code class="lang-css">#MaskSVG {
    overflow: hidden;
    background-image: url(&quot;mask.svg&quot;);
}   

#Logo3 {
    background-image: url(&quot;unity-logo.png&quot;);
}
</code></pre>

<h2>Reduce batch breaks for nested masking</h2>

<p>Nested masking occurs when both an element and one or more ancestors define a mask. The intersection of these masks defines the final visibility. You can use this technique to create intricate visual effects or selectively reveal parts of an image based on various criteria. For example, you can define masks to display certain regions of an element and hide other masked areas. </p>

<p>When masking with rectangle shapes, Unity uses axis-aligned rectangles as the clipping region, this is called rectangle clipping. When masking with rounded corners or arbitrary shapes, Unity uses stencil masking instead of rectangle clipping. Stencil masking stores masks in a stencil, which is a special image type with 8 bits per channel. The shape stored in the stencil defines the clipping region. For more information, refer to <a href="SL-Stencil.html">ShaderLab command: Stencil</a>.</p>

<p>Stencil masking uses a GPU feature called a <span class="tooltip"><strong>stencil buffer</strong><span class="tooltiptext">A memory store that holds an 8-bit per-pixel value. In Unity, you can use a stencil buffer to flag pixels, and then only render to pixels that pass the stencil operation. <a class="tooltipMoreInfoLink" href="class-RenderTexture.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#stencilbuffer">Glossary</a></span></span></span> for masking operations. The stencil has a GPU-associated state that dictates image modification and its impact on rendering. When elements share the same stencil state, they can be batched into a single draw call. However, any change in the stencil state, such as nested masking, results in batching breaking. Batch breaking can significantly impact performance as it prevents multiple elements from being efficiently rendered together in a single draw call. It’s crucial to minimize batch breaking to optimize rendering performance.</p>

<p>To reduce the number of batch breaks for nested stencil masking, consider applying <a href="../ScriptReference/UIElements.UsageHints.MaskContainer.html"><code>UsageHints.MaskContainer</code></a> on the masking element that’s the ancestor of all the masks. </p>

<p>The following illustration shows the number of batches in a single-level masking, a nested masking, and a nested masking with <code>MaskContainer</code> applied. The yellow color indicates the masking elements. The orange color indicates the masking element with <code>MaskContainer</code> applied. The numbers indicate the number of batches.</p>

<figure>
<img src="../StaticFiles/ScriptRefImages/MaskContainer.png" alt="Batch breaking example">
<figcaption>Batch breaking example</figcaption>
</figure>

<p>A: Single-level masking (1 batch) <br>
B: Nested masking (5 batches) <br>
C: Nested masking with MaskContainer (2 batches)</p>

<h2>Additional resources</h2>

<ul>
<li><a href="../ScriptReference/UIElements.UsageHints.html">UsageHints</a></li>
<li><a href="UIE-USS-SupportedProperties.html#unity-overflow-clip-box">Appearance</a></li>
</ul>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UIE-tss.html"></a></span><div class="tip">Theme Style Sheet (TSS)</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UIE-ui-debugger.html"></a></span><div class="tip">UI Toolkit Debugger</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
