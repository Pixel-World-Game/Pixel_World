<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: API updater</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/APIUpdater.html">English</a></li>
<li><a href="/cn/current/Manual/APIUpdater.html">中文</a></li>
<li><a href="/ja/current/Manual/APIUpdater.html">日本語</a></li>
<li><a href="/kr/current/Manual/APIUpdater.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/APIUpdater.html">English</a></li>
<li><a href="/cn/current/Manual/APIUpdater.html">中文</a></li>
<li><a href="/ja/current/Manual/APIUpdater.html">日本語</a></li>
<li><a href="/kr/current/Manual/APIUpdater.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityOverview.html">Working in Unity</a></li>
<li><a href="UpgradeGuides.html">Upgrading Unity</a></li>
<li>API updater</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuides.html"></a></span><div class="tip">Upgrading Unity</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide2022LTS.html"></a></span><div class="tip">Upgrading to Unity 2022 LTS</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>API updater</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>To improve usability and performance, Unity might change the way classes, functions and properties (the API) work. Occasionally, these improvements might introduce breaking changes when moving from one major Unity version to another. </p>

<p>To minimize the impact of breaking changes, the API updater identifies and updates obsolete code in your <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a class="tooltipMoreInfoLink" href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scripts">Glossary</a></span></span></span> and assemblies.</p>

<p>The API updater consists of the ScriptUpdater and the AssemblyUpdater, which are responsible for updating source code (scripts) and assemblies (dll files) respectively.</p>

<p>
<strong>Note</strong>: The API Updater can only fix certain errors and warnings in the API. These are indicated as <strong>UnityUpgradable</strong> in the console message. You must manually resolve other errors or warnings that the API Updater cannot handle.</p>

<h2>Using the API updater</h2>

<p>When a <a href="script-compilation.html">script compilation</a> is triggered, the API updater runs automatically. For example, this occurs when you:</p>

<ul>
<li>Open a project.</li>
<li>Import a package.</li>
<li>Save changes to a script.</li>
</ul>

<p>The API updater offers to update any obsolete code that it detects. If you accept, it rewrites any obsolete code with the recommended updated version of the API.</p>

<p>For example, the API updater would convert the following obsolete statement from:</p>

<pre><code>light.color = Color.red;
</code></pre>

<p>to:</p>

<pre><code>GetComponent&lt;Light&gt;().color = Color.red;
</code></pre>

<p>The steps below describe the workflow of the API updater when Unity triggers a script compilation:</p>

<ol>
<li>Unity triggers a script compilation.</li>
<li>The API updater checks for updatable compiler errors or warnings that it can handle.

<ul>
<li>If it doesn’t find any errors or warnings, the process ends.</li>
<li>If it finds any errors or warnings, it displays a dialog offering an automatic update.<br>Close the Editor and back up your project before you let the API updater update your scripts or assemblies. When you reopen your project, Unity compiles your scripts and triggers the API updater.</li>
</ul>
</li>
<li>If you accept the update, the API updater updates all scripts in the same compilation unit.</li>
<li>The API Updater repeats this process until it detects no more errors or warnings that it can handle.</li>
</ol>

<p>The updater can run multiple times if scripts with obsolete code fall into different compilation passes, for example, editor scripts.</p>

<p>If you don’t allow the API updater to update your scripts, the console displays any script errors or warnings. Errors or warnings which the API updater could resolve display (<strong>UnityUpgradable</strong>) in the message.</p>

<p>If your script has other errors which prevent the API updater from running successfully, the Console displays a message to inform you of this. You must resolve those errors before the API Updater can complete the updates.</p>

<h2>Command line arguments related to API Updater</h2>

<p>When running Unity in batch mode from the command line, use the <code>-accept-apiupdate</code> option to run the API updater. For more information, see <a href="CommandLineArguments.html">Command Line Arguments</a>.</p>

<h2>Logging</h2>

<p>The API updater logs changes it makes to any assemblies to the <a href="LogFiles.html">Editor log</a>. To control how much information is logged, set the UNITY_APIUPDATER_LOG_THRESHOLD environment variable to the desired log threshold and start Unity. For example:</p>

<p>On Windows:</p>

<pre><code>c:&gt; set UNITY_APIUPDATER_LOG_THRESHOLD=Debug
c:&gt; \path\to\unity\Unity.exe
</code></pre>

<p>On Linux:</p>

<pre><code>$ export UNITY_APIUPDATER_LOG_THRESHOLD=Debug
$ /path/to/unity/Unity
</code></pre>

<p>On Mac:</p>

<pre><code>$ export UNITY_APIUPDATER_LOG_THRESHOLD=Debug
$ /path/to/unity/Unity
</code></pre>

<p>
<strong>Note</strong>: You can also use <span class="tooltip"><a class="tooltipMoreInfoLink" href="https://en.wikipedia.org/wiki/Version_control">version control</a><span class="tooltiptext">A system for managing file changes. You can use Unity in conjunction with most common version control tools, including Perforce, Git, Mercurial and PlasticSCM. <a href="VersionControl.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#VersionControl">Glossary</a></span></span></span> to see changes the API updater makes to a project’s scripts.</p>

<p>When AssemblyUpdater has finished, the Editor.log displays the changes. For example:</p>

<pre><code>[AssemblyUpdater] Property access to 'UnityEngine.Rigidbody
UnityEngine.GameObject::get_rigidbody()' in 'System.Void
Test.ClassReferencingObsoleteUnityAPIThroughEditorAssembly::Run()' replaced with 'T
UnityEngine.GameObject::GetComponent&lt;UnityEngine.Rigidbody&gt;()'.
</code></pre>

<p>The table below describes the values for the <code>UNITY_APIUPDATER_LOG_THRESHOLD</code> environment variable:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;">Log threshold</th>
	<th style="text-align:left;">Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">
<strong>Error</strong> (default value)</td>
	<td style="text-align:left;">The API updater only logs <strong>Error</strong> messages. Error messages are logged when the API updater fails to apply a specific update, which requires you to take corrective action (usually requesting the original assembly author to provide an updated version of the assembly).</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Warning</strong></td>
	<td style="text-align:left;">The API updater logs <strong>Warning</strong> and <strong>Error</strong> messages. Warning messages are logged when the API updater applies a change that the user might need to review.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Info</strong></td>
	<td style="text-align:left;">The API updater logs <strong>Informational</strong>, <strong>Warning</strong> and <strong>Error</strong> messages. Info messages include updates applied by the AssemblyUpdater.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Debug</strong></td>
	<td style="text-align:left;">The API updater logs all messages. This is useful for troubleshooting, for example if you have issues with the API updater that you want to report to Unity.</td>
</tr>
</tbody>
</table>

<h2>Troubleshooting</h2>

<h3>API Updating failed. Check previous console messages.</h3>

<p>The API updater couldn’t update all obsolete code. This can occur if the updater can’t save its changes, for example if the user has read-only permissions on the script.</p>

<p>Check the previous lines in the console to see any problems that occurred during the update process.</p>

<ul>
<li><p><span class="page-edit">2018–07–31 Page amended
</span></p></li>
<li><p><span class="page-history">“accept-apiupdate” command line option added in Unity 2017.2</span></p></li>
<li><p><span class="page-history">AssemblyUpdater logging improved in Unity <a href="https://docs.unity3d.com/2018.3/Documentation/Manual/30_search.html?q=newin20183">2018.3</a> <span class="search-words">NewIn20183</span></span></p></li>
</ul>
<!-- area:none -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="UpgradeGuides.html"></a></span><div class="tip">Upgrading Unity</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="UpgradeGuide2022LTS.html"></a></span><div class="tip">Upgrading to Unity 2022 LTS</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
