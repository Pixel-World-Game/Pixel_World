<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Managed plug-ins</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="core" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UsingDLL.html">English</a></li>
<li><a href="/cn/current/Manual/UsingDLL.html">中文</a></li>
<li><a href="/ja/current/Manual/UsingDLL.html">日本語</a></li>
<li><a href="/kr/current/Manual/UsingDLL.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UsingDLL.html">English</a></li>
<li><a href="/cn/current/Manual/UsingDLL.html">中文</a></li>
<li><a href="/ja/current/Manual/UsingDLL.html">日本語</a></li>
<li><a href="/kr/current/Manual/UsingDLL.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="ScriptingSection.html">Scripting</a></li>
<li><a href="Plugins.html">Plug-ins</a></li>
<li>Managed plug-ins</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="PluginInspector.html"></a></span><div class="tip">Import and configure plug-ins </div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="NativePlugins.html"></a></span><div class="tip">Native plug-ins</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Managed plug-ins</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Managed <span class="tooltip"><strong>plug-ins</strong><span class="tooltiptext">A set of code created outside of Unity that creates functionality in Unity. There are two kinds of plug-ins you can use in Unity: Managed plug-ins (managed .NET assemblies created with tools like Visual Studio) and Native plug-ins (platform-specific native code libraries). <a class="tooltipMoreInfoLink" href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Plug-in">Glossary</a></span></span></span> are <a href="dotnetProfileSupport.html">.NET assemblies</a> you create and compile outside of Unity, into a dynamically linked library (DLL) with tools such as Visual Studio.</p>

<p>This is a different process from standard C# <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a class="tooltipMoreInfoLink" href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a class="tooltipMoreInfoLink" href="Glossary.html#Scripts">Glossary</a></span></span></span>, which Unity stores as source files in the Assets folder in your Unity project. Unity compiles standard C# scripts whenever they change, whereas DLLs are pre-compiled and don’t change. You can add a compiled .dll file to your project and attach the classes it contains to <strong><span class="tooltip"><strong>GameObjects</strong><span class="tooltiptext">The fundamental object in Unity scenes, which can represent characters, props, scenery, cameras, waypoints, and more. A GameObject’s functionality is defined by the Components attached to it. <a href="class-GameObject.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#GameObject">Glossary</a></span></span></span></strong> in the same way as standard scripts.</p>

<p>For more information about managed code in C#, see <a href="https://docs.microsoft.com/en-us/dotnet/standard/managed-code">Microsoft’s What is managed code? documentation</a>.</p>

<p>Managed plug-ins contain only .NET code, which means they can’t access any features that the .NET libraries don’t support. However, managed code is accessible to the standard .NET tools that Unity uses to compile scripts.</p>

<p>When you work with DLLs in Unity, you must complete more steps than when you work with scripts. However, there are situations where you might find it helpful to create and add a .dll file to your Unity project instead, for example:</p>

<ul>
<li>You want to use compilers in your code that Unity doesn’t support.</li>
<li>You want to add third-party .NET code in a .dll file.</li>
<li>You want to supply code to Unity without the source.</li>
</ul>

<p>This page explains a general method you can use to create <span class="tooltip"><strong>managed plug-ins</strong><span class="tooltiptext">A managed .NET assembly that is created with tools like Visual Studio for use in Unity. <a class="tooltipMoreInfoLink" href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Managedplug-in">Glossary</a></span></span></span>, as well as how you can create managed plug-ins and set up a debug session using Visual Studio.</p>

<h2>Creating a managed plug-in</h2>

<p>To create a managed plug-in, you need to create a DLL. To do this, you need a suitable compiler, such as:</p>

<ul>
<li><a href="https://visualstudio.microsoft.com/">Visual Studio</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild?view=vs-2019">MsBuild</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/core/sdk">.NET SDK</a></li>
</ul>

<p>Not all compilers that produce .NET code are compatible with Unity, so you should test the compiler with some available code before doing significant work with it. The method you use to create a DLL depends on if the DLL contains Unity API code:</p>

<ul>
<li>If the DLL contains Unity API code, you need to make Unity’s own DLLs available to the compiler before compiling:

<ol>
<li>To find the Unity DLLs:

<ul>
<li>On Windows, go to: <code>C:\Program Files\Unity\Hub\Editor\&lt;version-number&gt;\Editor\Data\Managed\UnityEngine</code>
</li>
<li>On macOS:

<ol>
<li>Find the <code>Unity.app</code> file on your computer. The path to the Unity DLLs on macOS is: <code>/Applications/Unity/Hub/Editor/&lt;version-number&gt;/Unity.app/Contents/Managed/UnityEngine</code>
</li>
<li>Right click on <code>Unity.app</code>
</li>
<li>Select <strong>Show Package Contents</strong>.</li>
</ol>
</li>
</ul>
</li>
<li>The <code>UnityEngine</code> folder contains the .dll files for a number of modules. Reference them to make them available to your script. Some namespaces also require a reference to a compiled library from a Unity project (for example, <code>UnityEngine.UI</code>). Locate this in the project folder’s directory: <code>~\Library\ScriptAssemblies</code>
</li>
</ol>
</li>
<li><p>If the DLL does not contain Unity API code, or if you’ve already made the Unity DLLs available, follow your compiler’s documentation to compile a .dll file.The exact options you use to compile the DLL depend on the compiler you use. As an example, the command line for the Roslyn compiler, <code>csc</code>, might look like this on macOS:</p></li>
</ul>

<p><code>csc /r:/Applications/Unity/Hub/Editor/&lt;version-number&gt;/Unity.app/Contents/Managed/UnityEngine.dll /target:library /out:MyManagedAssembly.dll /recurse:*.cs</code></p>

<p>In this example:</p>

<ul>
<li>Use the <code>/r</code> option to specify a path to a library to include in the build, in this case, the <code>UnityEngine</code> library.</li>
<li>Use the <code>/target</code> option to specify the type of build you require; “library” signifies a DLL build.</li>
<li>Use <code>/out</code> to specify the name of the library, which in this case is “MyManagedAssembly.dll”.</li>
<li>Add the name of the source files to be included. Use the <code>/recurse</code> method to add all the files ending in “.cs’’ in your current working directory and any subfolders. The resulting .dll file appears in the same folder as the source files.</li>
</ul>

<h2>Using a managed plug-in</h2>

<p>After you’ve compiled the DLL, you can drag the .dll file into the Unity project like any other asset. You can then:</p>

<ul>
<li>Expand the managed plug-in to view the separate classes inside the library.</li>
<li>Drag classes that derive from MonoBehaviour onto Game Objects.</li>
<li>Use non-MonoBehaviour classes directly from other scripts.</li>
</ul>

<figure>
<img src="../uploads/Main/managed-plugin.png" alt="An expanded DLL with the classes visible">
<figcaption>An expanded DLL with the classes visible</figcaption>
</figure>

<h2>Create a DLL with Visual Studio</h2>

<p>This section explains:</p>

<ul>
<li>How to build and integrate a simple DLL example with Visual Studio</li>
<li>How to prepare a debugging session for the DLL in Unity.</li>
</ul>

<h3>Setting up the Project</h3>

<ol>
<li>Open Visual Studio and create a new project.</li>
<li>Select <strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Project</strong> &gt; <strong>Visual C#</strong> &gt; <strong>.Net Standard</strong> &gt; <strong>Class Library (.NET Standard)</strong>.</li>
<li>Add the following information to the new library:

<ul>
<li>
<strong>Name</strong>: The namespace (for this example, use <code>DLLTest</code> as the name).</li>
<li>
<strong>Location</strong>: The parent folder of the project.</li>
<li>
<strong>Solution name</strong>: The folder of the project.</li>
</ul>
</li>
<li>Make the Unity DLLs available to your script. In Visual Studio, open the contextual menu for <strong>References</strong> in the Solution Explorer and select <strong>Add Reference</strong> &gt; <strong>Browse</strong> &gt; <strong>Select File</strong>.</li>
<li>Select the required .dll file, located in the UnityEngine folder.</li>
</ol>

<h3>Coding the DLL</h3>

<ol>
<li>For this example, rename the default class to <code>MyUtilities</code> in the Solution browser.</li>
<li>Replace its code with the following:</li>
</ol>

<pre><code>using System;   
using UnityEngine;

namespace DLLTest {

    public class MyUtilities {
    
        public int c;

        public void AddValues(int a, int b) {
            c = a + b;  
        }
    
        public static int GenerateRandom(int min, int max) {
            System.Random rand = new System.Random();
            return rand.Next(min, max);
        }
    }
}
</code></pre>

<ol>
<li>Build the project to generate the DLL file along with its debug symbols.</li>
</ol>

<h2>Debugging a DLL in Unity</h2>

<p>To set up a debugging session for a DLL in Unity:</p>

<ol>
<li>Create a new project in Unity and copy your built .dll file (for example, <code>&lt;project folder&gt;/bin/Debug/DLLTest.dll</code>) into the Assets folder.</li>
<li>Create a C# script called Test in the Assets folder.</li>
<li>Replace its contents with a script that creates a new instance of the class you created in your DLL, uses its functions and displays the output in the <strong>Console</strong> window. For example, to create a test script for the DLL from the section above, copy the following code:</li>
</ol>

<pre><code>using UnityEngine;
using System.Collections;
using DLLTest;

public class Test : MonoBehaviour {

     void Start () {
        MyUtilities utils = new MyUtilities();
        utils.AddValues(2, 3);
        print(&quot;2 + 3 = &quot; + utils.c);
     }
    
     void Update () {
        print(MyUtilities.GenerateRandom(0, 100));
     }
}
</code></pre>

<ol>
<li>Attach this script to a GameObject in the <span class="tooltip"><strong>Scene</strong><span class="tooltiptext">A Scene contains the environments and menus of your game. Think of each unique Scene file as a unique level. In each Scene, you place your environments, obstacles, and decorations, essentially designing and building your game in pieces. <a class="tooltipMoreInfoLink" href="CreatingScenes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scene">Glossary</a></span></span></span> and click Play.</li>
</ol>

<p>Unity displays the output of the code from the DLL in the Console window</p>

<h2>Compiling unsafe C# code</h2>

<p>
<a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/unsafe">Unsafe C# code</a> is code that is able to access memory directly. It is not enabled by default because the compiler can’t verify that it won’t introduce security risks.</p>

<p>You might want to use unsafe code to:</p>

<ul>
<li>Access memory using pointers.</li>
<li>Allocate raw memory.</li>
<li>Call methods using pointers.</li>
</ul>

<p>To enable support for compiling unsafe C# code go to <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong> &gt; <strong>Other Settings</strong> and enable <strong>Allow Unsafe Code</strong>.</p>

<p>For more information, see <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/unsafe-code">Microsoft’s documentation of unsafe code</a>.</p>
<!-- area:core -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="PluginInspector.html"></a></span><div class="tip">Import and configure plug-ins </div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="NativePlugins.html"></a></span><div class="tip">Native plug-ins</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
