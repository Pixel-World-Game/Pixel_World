<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Built-in macros</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20241003"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20241003"></script><script type="text/javascript" src="docdata/toc.js?ts=20241003"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20241003"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20241003">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SL-BuiltinMacros.html">English</a></li>
<li><a href="/cn/current/Manual/SL-BuiltinMacros.html">中文</a></li>
<li><a href="/ja/current/Manual/SL-BuiltinMacros.html">日本語</a></li>
<li><a href="/kr/current/Manual/SL-BuiltinMacros.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2022.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/SL-BuiltinMacros.html">English</a></li>
<li><a href="/cn/current/Manual/SL-BuiltinMacros.html">中文</a></li>
<li><a href="/ja/current/Manual/SL-BuiltinMacros.html">日本語</a></li>
<li><a href="/kr/current/Manual/SL-BuiltinMacros.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="Shaders.html">Shaders</a></li>
<li><a href="shader-writing.html">Writing shaders</a></li>
<li><a href="SL-ShaderPrograms.html">HLSL in Unity</a></li>
<li>Built-in macros</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-BuiltinIncludes.html"></a></span><div class="tip">Built-in shader include files</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-BuiltinFunctions.html"></a></span><div class="tip">Built-in shader helper functions</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Built-in macros</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Unity defines several preprocessor macros when compiling <a href="SL-ShaderPrograms.html">Shader programs</a>.</p>

<h2>Target platform</h2>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Macro:</strong></th>
	<th style="text-align:left;"><strong>Target platform:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>SHADER_API_D3D11</code></td>
	<td style="text-align:left;">Direct3D 11</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_GLCORE</code></td>
	<td style="text-align:left;">Desktop OpenGL “core” (GL 3/4)</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_GLES</code></td>
	<td style="text-align:left;">OpenGL ES 2.0</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_GLES3</code></td>
	<td style="text-align:left;">OpenGL ES 3.0/3.1</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_METAL</code></td>
	<td style="text-align:left;">iOS/Mac Metal</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_VULKAN</code></td>
	<td style="text-align:left;">Vulkan</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_D3D11_9X</code></td>
	<td style="text-align:left;">Direct3D 11 “feature level 9.x” target for <span class="tooltip"><strong>Universal Windows Platform</strong><span class="tooltiptext">An IAP feature that supports Microsoft’s In App Purchase simulator, which allows you to test IAP purchase flows on devices before publishing your application. <a class="tooltipMoreInfoLink" href="UnityIAPUniversalWindows.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#UniversalWindowsPlatform">Glossary</a></span></span></span></td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_DESKTOP</code></td>
	<td style="text-align:left;">Windows, Mac and Linux desktop platforms, <span class="tooltip"><strong>WebGL</strong><span class="tooltiptext">A JavaScript API that renders 2D and 3D graphics in a web browser. The Unity WebGL build option allows Unity to publish content as JavaScript programs which use HTML5 technologies and the WebGL rendering API to run Unity content in a web browser. <a class="tooltipMoreInfoLink" href="webgl-gettingstarted.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#WebGL">Glossary</a></span></span></span>, Stadia</td>
</tr>
<tr>
	<td style="text-align:left;"><code>SHADER_API_MOBILE</code></td>
	<td style="text-align:left;">iOS and Android mobile platforms, tvOS</td>
</tr>
</tbody>
</table>

<p>Additionally, <code>SHADER_TARGET_GLSL</code> is defined when the target shading language is GLSL (always true for OpenGL/GLES platforms).</p>

<h2>Shader target model</h2>

<p>
<code>SHADER_TARGET</code> is defined to a numeric value that matches the <span class="tooltip"><strong>Shader</strong><span class="tooltiptext">A program that runs on the GPU. <a class="tooltipMoreInfoLink" href="Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shader">Glossary</a></span></span></span> target compilation model (that is, matching <code>#pragma target</code> directive). For example, <code>SHADER_TARGET</code> is <code>30</code> when compiling into Shader model 3.0. You can use it in Shader code to do conditional checks. For example:</p>

<pre><code>#if SHADER_TARGET &lt; 30
    // less than Shader model 3.0:
    // very limited Shader capabilities, do some approximation
#else
    // decent capabilities, do a better thing
#endif
</code></pre>

<h2>Unity version</h2>

<p>
<code>UNITY_VERSION</code> contains the numeric value of the Unity version. For example, <code>UNITY_VERSION</code> is <code>202030</code> for Unity 2020.3.0. This can be used for version comparisons if you need to write Shaders that use different built-in Shader functionality. For example, a <code>#if UNITY_VERSION &gt;= 202000</code> preprocessor check only passes on versions 2020 or later.</p>

<h2>Shader stage being compiled</h2>

<p>Preprocessor macros <code>SHADER_STAGE_VERTEX</code>, <code>SHADER_STAGE_FRAGMENT</code>, <code>SHADER_STAGE_DOMAIN</code>, <code>SHADER_STAGE_HULL</code>, <code>SHADER_STAGE_GEOMETRY</code>, <code>SHADER_STAGE_COMPUTE</code> are defined when compiling each Shader stage. Typically they are useful when sharing Shader code between <span class="tooltip"><strong>pixel</strong><span class="tooltiptext">The smallest unit in a computer image. Pixel size depends on your screen resolution. Pixel lighting is calculated at every screen pixel. <a class="tooltipMoreInfoLink" href="ShadowPerformance.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#pixel">Glossary</a></span></span></span> Shaders and compute Shaders, to handle cases where some things have to be done slightly differently.</p>

<h2>Platform difference helpers</h2>

<p>Direct use of these platform macros is discouraged, as they don’t always contribute to the future-proofing of your code. For example, if you’re writing a Shader that checks for D3D11, you may want to ensure that, in the future, the check is extended to include Vulkan. Instead, Unity defines several helper macros (in <a href="SL-BuiltinIncludes.html"><code>HLSLSupport.cginc</code></a>):</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Macro:</strong></th>
	<th style="text-align:left;"><strong>Use:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>UNITY_BRANCH</code></td>
	<td style="text-align:left;">Add this before conditional statements to tell the compiler that this should be compiled into an actual branch. Expands to <code>[branch]</code> when on HLSL platforms.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_FLATTEN</code></td>
	<td style="text-align:left;">Add this before conditional statements to tell the compiler that this should be flattened to avoid an actual branch instruction. Expands to <code>[flatten]</code> when on HLSL platforms.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_NO_SCREENSPACE_SHADOWS</code></td>
	<td style="text-align:left;">Defined on platforms that do not use cascaded screenspace shadowmaps (mobile platforms).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_NO_LINEAR_COLORSPACE</code></td>
	<td style="text-align:left;">Defined on platforms that do not support Linear color space (mobile platforms).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_NO_RGBM</code></td>
	<td style="text-align:left;">Defined on platforms where RGBM <span class="tooltip"><strong>compression</strong><span class="tooltiptext">A method of storing data that reduces the amount of storage space it requires. See <a class="tooltipMoreInfoLink" href="class-TextureImporterOverride.html">Texture Compression</a>, <a href="class-AnimationClip.html#AssetProperties">Animation Compression</a>, <a href="class-AudioClip.html">Audio Compression</a>, <a href="ReducingFilesize.html">Build Compression</a>.<br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#compression">Glossary</a></span></span></span> for <span class="tooltip"><strong>lightmaps</strong><span class="tooltiptext">A pre-rendered texture that contains the effects of light sources on static objects in the scene. Lightmaps are overlaid on top of scene geometry to create the effect of lighting. <a href="Lightmapping.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Lightmap">Glossary</a></span></span></span> is not used (mobile platforms).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_NO_DXT5nm</code></td>
	<td style="text-align:left;">Defined on platforms that do not use DXT5nm normal-map compression (mobile platforms).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_FRAMEBUFFER_FETCH_AVAILABLE</code></td>
	<td style="text-align:left;">Defined on platforms where “framebuffer color fetch” functionality can be available (generally iOS platforms - OpenGL ES 2.0, 3.0 and Metal).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_USE_RGBA_FOR_POINT_SHADOWS</code></td>
	<td style="text-align:left;">Defined on platforms where point light shadowmaps use RGBA Textures with encoded depth (other platforms use single-channel floating point Textures).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_ATTEN_CHANNEL</code></td>
	<td style="text-align:left;">Defines which channel of light attenuation Texture contains the data; used in per-pixel lighting code. Defined to either ‘r’ or ‘a’.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_HALF_TEXEL_OFFSET</code></td>
	<td style="text-align:left;">Defined on platforms that need a half-texel offset adjustment in mapping texels to pixels.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_UV_STARTS_AT_TOP</code></td>
	<td style="text-align:left;">Always defined with value of 1 or 0. A value of 1 is on platforms where Texture V coordinate is 0 at the “top” of the Texture. Direct3D-like platforms use value of 1; OpenGL-like platforms use value of 0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_MIGHT_NOT_HAVE_DEPTH_Texture</code></td>
	<td style="text-align:left;">Defined if a platform might emulate shadow maps or depth Textures by manually rendering depth into a Texture.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_PROJ_COORD(a)</code></td>
	<td style="text-align:left;">Given a 4-component vector, this returns a Texture coordinate suitable for projected Texture reads. On most platforms this returns the given value directly.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_NEAR_CLIP_VALUE</code></td>
	<td style="text-align:left;">Defined to the value of near <span class="tooltip"><strong>clipping plane</strong><span class="tooltiptext">A plane that limits how far or close a camera can see from its current position. A camera’s viewable range is between the far and near clipping planes. See far clipping plane and near clipping plane. <a class="tooltipMoreInfoLink" href="class-Camera.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#clippingplane">Glossary</a></span></span></span>. Direct3D-like platforms use 1.0 while OpenGL-like platforms use –1.0.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_VPOS_TYPE</code></td>
	<td style="text-align:left;">Defines the data type required for pixel position input (VPOS): <code>float2</code> on D3D9, <code>float4</code> elsewhere.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_CAN_COMPILE_TESSELLATION</code></td>
	<td style="text-align:left;">Defined when the Shader compiler “understands” the tessellation Shader HLSL syntax (currently only D3D11).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_INITIALIZE_OUTPUT(type,name)</code></td>
	<td style="text-align:left;">Initializes the variable <em>name</em> of given <em>type</em> to zero.</td>
</tr>
<tr>
	<td style="text-align:left;">
<code>UNITY_COMPILER_HLSL</code>, <code>UNITY_COMPILER_HLSL2GLSL</code>, <code>UNITY_COMPILER_CG</code>
</td>
	<td style="text-align:left;">Indicates which Shader compiler is being used to compile Shaders. See documentation on <a href="shader-compilation.html">Shader compilation</a> for more details. Use this if you run into very specific Shader syntax handling differences between the compilers, and want to write different code for each compiler.</td>
</tr>
</tbody>
</table>

<ul>
<li>
<code>UNITY_REVERSED_Z</code> - defined on plaftorms using reverse Z buffer. Stored Z values are in the range 1..0 instead of 0..1.</li>
</ul>

<h2>Shadow mapping macros</h2>

<p>Declaring and sampling shadow maps can be very different depending on the platform. Unity has several macros to help with this:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Macro:</strong></th>
	<th style="text-align:left;"><strong>Use:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>UNITY_DECLARE_SHADOWMAP(tex)</code></td>
	<td style="text-align:left;">Declares a shadowmap Texture variable with name “tex”.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_SAMPLE_SHADOW(tex,uv)</code></td>
	<td style="text-align:left;">Samples shadowmap Texture “tex” at given “uv” coordinate (XY components are Texture location, Z component is depth to compare with). Returns single float value with the shadow term in 0..1 range.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_SAMPLE_SHADOW_PROJ(tex,uv)</code></td>
	<td style="text-align:left;">Similar to above, but does a projective shadowmap read. “uv” is a float4, all other components are divided by .w for doing the lookup.</td>
</tr>
</tbody>
</table>

<p>The format of <code>tex</code> must be <a href="../ScriptReference/RenderTextureFormat.Shadowmap.html">RenderTextureFormat.Shadowmap</a>.</p>

<p>
<strong>NOTE:</strong> Not all graphics cards support shadowmaps. Use <a href="../ScriptReference/SystemInfo.SupportsRenderTextureFormat.html">SystemInfo.SupportsRenderTextureFormat</a> to check for support.</p>

<p><a name="cbuffer"></a></p>

<h2>Constant buffer macros</h2>

<p>Direct3D 11 groups all Shader variables into “constant buffers”. Most of Unity’s built-in variables are already grouped, but for variables in your own Shaders it might be more optimal to put them into separate constant buffers depending on expected frequency of updates.</p>

<p>Use <code>CBUFFER_START(name)</code> and <code>CBUFFER_END</code> macros for that:</p>

<pre><code>CBUFFER_START(MyRarelyUpdatedVariables)
    float4 _SomeGlobalValue;
CBUFFER_END
</code></pre>

<p>If you use a GPU <a href="../ScriptReference/ComputeBuffer.html">compute buffer</a> or <a href="../ScriptReference/GraphicsBuffer.html">graphics buffer</a> to set the value of the variables, make sure the buffer and the constant buffer have matching data layouts on all graphics APIs you build for. See <a href="SL-PlatformDifferences.html#cbuffers">Using constant buffers with GPU buffers</a> for more information.</p>

<p>
<strong>Note:</strong> You can’t add structs to constant buffers.</p>

<h2>Texture/Sampler declaration macros</h2>

<p>Usually you would use <code>texture2D</code> in Shader code to declare a Texture and Sampler pair.
However on some platforms (such as DX11), Textures and Samplers are separate objects,
and maximum possible Sampler count is quite limited. Unity has some macros to declare
Textures without Samplers, and to sample a Texture using a Sampler from another Texture.
Use this if you end up running into Sampler limits, and you know that several of your
Textures can in fact share a Sampler (Samplers define Texture filtering and wrapping modes).</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Macro:</strong></th>
	<th style="text-align:left;"><strong>Use:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>UNITY_DECLARE_TEX2D(name)</code></td>
	<td style="text-align:left;">Declares a Texture and Sampler pair.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_DECLARE_TEX2D_NOSAMPLER(name)</code></td>
	<td style="text-align:left;">Declares a Texture without a Sampler.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_DECLARE_TEX2DARRAY(name)</code></td>
	<td style="text-align:left;">Declares a Texture array Sampler variable.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_SAMPLE_TEX2D(name,uv)</code></td>
	<td style="text-align:left;">Sample from a Texture and Sampler pair, using given Texture coordinate.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_SAMPLE_TEX2D_SAMPLER( name,samplername,uv)</code></td>
	<td style="text-align:left;">Sample from Texture (name), using a Sampler from another Texture (samplername).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_SAMPLE_TEX2DARRAY(name,uv)</code></td>
	<td style="text-align:left;">Sample from a Texture array with a float3 UV; the z component of the coordinate is array element index.</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_SAMPLE_TEX2DARRAY_LOD(name,uv,lod)</code></td>
	<td style="text-align:left;">Sample from a Texture array with an explicit mipmap level.</td>
</tr>
</tbody>
</table>

<p>For more information, see documentation on <a href="SL-SamplerStates.html">Sampler States</a>.</p>

<h2>Surface Shader pass indicators</h2>

<p>When <span class="tooltip"><a class="tooltipMoreInfoLink" href="SL-SurfaceShaders.html">Surface Shaders</a><span class="tooltiptext">A streamlined way of writing shaders for the Built-in Render Pipeline. <a href="SL-SurfaceShaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#SurfaceShader">Glossary</a></span></span></span> are compiled, they generate a lot of code for various passes to do lighting. When compiling each pass, one of the following macros is defined:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Macro:</strong></th>
	<th style="text-align:left;"><strong>Use:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>UNITY_PASS_FORWARDBASE</code></td>
	<td style="text-align:left;"><span class="tooltip"><strong>Forward rendering</strong><span class="tooltiptext">A rendering path that renders each object in one or more passes, depending on lights that affect the object. Lights themselves are also treated differently by Forward Rendering, depending on their settings and intensity. <a class="tooltipMoreInfoLink" href="RenderTech-ForwardRendering.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#ForwardRendering">Glossary</a></span></span></span> base pass (main directional light, lightmaps, SH).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_PASS_FORWARDADD</code></td>
	<td style="text-align:left;">Forward rendering additive pass (one light per pass).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_PASS_DEFERRED</code></td>
	<td style="text-align:left;"><span class="tooltip"><strong>Deferred shading</strong><span class="tooltiptext">A rendering path in the Built-in Render Pipeline that places no limit on the number of Lights that can affect a GameObject. All Lights are evaluated per-pixel, which means that they all interact correctly with normal maps and so on. Additionally, all Lights can have cookies and shadows. <a class="tooltipMoreInfoLink" href="RenderTech-DeferredShading.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Deferredshading">Glossary</a></span></span></span> pass (renders G-buffer).</td>
</tr>
<tr>
	<td style="text-align:left;"><code>UNITY_PASS_SHADOWCASTER</code></td>
	<td style="text-align:left;">Shadow caster and depth Texture rendering pass.</td>
</tr>
</tbody>
</table>

<h2>Disable Auto-Upgrade</h2>

<p>
<code>UNITY_SHADER_NO_UPGRADE</code> allows you to disable Unity from automatically upgrading or modifying your shader file.</p>

<h2>Depth Texture helper macros</h2>

<p>Most of the time, Depth Texture are used to render Depth from the <span class="tooltip"><strong>Camera</strong><span class="tooltiptext">A component which creates an image of a particular viewpoint in your scene. The output is either drawn to the screen or captured as a texture. <a class="tooltipMoreInfoLink" href="CamerasOverview.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Camera">Glossary</a></span></span></span>. The <a href="SL-BuiltinIncludes.html">UnityCG.cginc include file</a> contains some macros to deal with the above complexity in this case:</p>

<ul>
<li>
<strong>COMPUTE_EYEDEPTH(i)</strong>: computes eye space depth of the vertex and outputs it in <strong>o</strong>. Use it in a vertex program when <strong>not</strong> rendering into a depth texture.</li>
<li>
<strong>DECODE_EYEDEPTH(i)/LinearEyeDepth(i)</strong>: given high precision value from depth texture <strong>i</strong>, returns corresponding eye space depth.</li>
<li>
<strong>Linear01Depth(i)</strong>: given high precision value from depth texture <strong>i</strong>, returns corresponding linear depth in range between 0 and 1.</li>
<li>
<strong>UNITY_TRANSFER_DEPTH(o)</strong>: Deprecated. Computes the eye space depth of the vertex and outputs it in <strong>o</strong> (which must be a float2). On platforms with native depth textures this macro does nothing, because the Z buffer value is rendered implicitly.</li>
<li>
<strong>UNITY_OUTPUT_DEPTH(i)</strong>: Deprecated. Returns eye space depth from <strong>i</strong> (which must be a float2). On platforms with native depth textures this macro always returns zero, because the Z buffer value is rendered implicitly.</li>
</ul>

<p>
<strong>Note:</strong> On DX11/12 and Metal, the Z buffer range is 1–0 and UNITY_REVERSED_Z is defined. On other platforms, the range is 0–1.</p>

<p>For example, this shader would render depth of its <span class="tooltip"><strong>GameObjects</strong><span class="tooltiptext">The fundamental object in Unity scenes, which can represent characters, props, scenery, cameras, waypoints, and more. A GameObject’s functionality is defined by the Components attached to it. <a class="tooltipMoreInfoLink" href="class-GameObject.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#GameObject">Glossary</a></span></span></span>:</p>

<pre><code>Shader &quot;Render Depth&quot; {
    SubShader {
        Tags { &quot;RenderType&quot;=&quot;Opaque&quot; }
        Pass {
            CGPROGRAM

            #pragma vertex vert
            #pragma fragment frag
            #include &quot;UnityCG.cginc&quot;

            struct v2f {
                float4 pos : SV_POSITION;
                float2 depth : TEXCOORD0;
            };

            v2f vert (appdata_base v) {
                v2f o;
                o.pos = UnityObjectToClipPos(v.vertex);
                UNITY_TRANSFER_DEPTH(o.depth);
                return o;
            }

            half4 frag(v2f i) : SV_Target {
                UNITY_OUTPUT_DEPTH(i.depth);
            }
            ENDCG
        }
    }
}
</code></pre>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-BuiltinIncludes.html"></a></span><div class="tip">Built-in shader include files</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-BuiltinFunctions.html"></a></span><div class="tip">Built-in shader helper functions</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2024 Unity Technologies. Publication Date: 2024-10-03.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
