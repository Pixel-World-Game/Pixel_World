<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true">
    </script>
    <script type="text/javascript">function OptanonWrapper() {}</script>
    <script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script>
    <script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unity - Scripting API: PrefabUtility.ReplacePrefabAssetOfPrefabInstance</title>
    <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg" />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../../../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">//toc</script>
    <!--local TOC-->
    <script type="text/javascript" src="docdata/global_toc.js">//toc</script>
    <!--global TOC, including other platforms-->
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/prism.css" />
    <script type="text/javascript" src="../StaticFiles/js/prism.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <script src="/StaticFilesConfig/feedback/feedback.js">
    </script>
    <script src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/mobileoptimisation.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/mobileoptimisation.css" />
  </head>
  <body>
    <div id="DocsAnalyticsData" data-area="none" data-pagetype="scriptref">
    </div>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul>
                <li>
                  <a href="../Manual/index.html">Manual</a>
                </li>
                <li>
                  <a href="../ScriptReference/index.html" class="selected">Scripting API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity.com/">unity.com</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content clear">
          <div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;"><ul id="OtherVersionsContentUl"></ul><div id="otherVersionsLegend"><ul><li><div id="supportedColour" class="legendBox"></div>Supported</li><li><div id="notFoundColour" class="legendBox"></div>Legacy</li></ul></div></div><div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div></div>
          <div class="lang-switcher hide">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">Language<span class="b">English</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a href="">English</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="script-lang">
            <ul>
              <li class="selected" data-lang="CS">C#</li>
            </ul>
          </div>
          <div class="mobileLogo">
            <a href="https://docs.unity3d.com">
            </a>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc" id="customScrollbar">
                <h2>Scripting API</h2>
                <div class="search-form sidebar-search-form">
                  <form action="30_search.html" method="get" class="apisearch">
                    <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                    </input>
                    <input type="submit" id="mobileSearchBtn" class="submit" value="Search">
                    </input>
                  </form>
                </div>
                <div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent">
                  <form id="otherVersionsContentMobileForm">
                    <div class="ui-field-contain">
                      <label for="select-native-4">Version: 2022.3</label>
                      <select name="select-native-4" id="versionsSelectMobile">
                        <option>Select a different version</option>
                        <optgroup id="versionsWithThisPageMobile" label="Versions with this page">
                        </optgroup>
                        <optgroup id="versionsWithoutThisPageMobile" label="Versions without this page">
                        </optgroup>
                      </select>
                    </div>
                  </form>
                </div>
                <div class="lang-switcher hide">
                  <div class="toggle" data-target=".lang-list">
                    <div class="lbl">Language<span class="b">English</span></div>
                    <div class="arrow">
                    </div>
                  </div>
                  <div class="lang-list" style="display:none;">
                    <ul>
                      <li>
                        <a href="">English</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <h1 class="heading inherit">
                  <a href="PrefabUtility.html">PrefabUtility</a>.ReplacePrefabAssetOfPrefabInstance</h1>
                <div class="clear">
                </div>
                <div class="scrollToFeedback">
                  <a id="scrollToFeedback">Leave feedback</a>
                </div>
                <div class="clear">
                </div>
                <div class="suggest">
                  <a class="blue-btn sbtn">Suggest a change</a>
                  <div class="suggest-wrap rel hide">
                    <div class="loading hide">
                      <div>
                      </div>
                      <div>
                      </div>
                      <div>
                      </div>
                    </div>
                    <div class="suggest-success hide">
                      <h2>Success!</h2>
                      <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-failed hide">
                      <h2>Submission failed</h2>
                      <p>For some reason your suggested change could not be submitted. Please &lt;a&gt;try again&lt;/a&gt; in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-form clear">
                      <label for="suggest_name">Your name</label>
                      <input id="suggest_name" type="text">
                      </input>
                      <label for="suggest_email">Your email</label>
                      <input id="suggest_email" type="email">
                      </input>
                      <label for="suggest_body" class="clear">Suggestion<span class="r">*</span></label>
                      <textarea id="suggest_body" class="req">
                      </textarea>
                      <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                      <p class="mb0">
                        <a class="cancel left lh42 cn">Cancel</a>
                      </p>
                    </div>
                  </div>
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">
                </a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>
                    <h2>Declaration</h2>public static void <span class="sig-kw">ReplacePrefabAssetOfPrefabInstance</span>(<a href="GameObject.html">GameObject</a> <span class="sig-kw">prefabInstanceRoot</span>,
<a href="GameObject.html">GameObject</a> <span class="sig-kw">prefabAssetRoot</span>,
<a href="InteractionMode.html">InteractionMode</a> <span class="sig-kw">mode</span>);
    </div>
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>
                    <h2>Declaration</h2>public static void <span class="sig-kw">ReplacePrefabAssetOfPrefabInstance</span>(<a href="GameObject.html">GameObject</a> <span class="sig-kw">prefabInstanceRoot</span>,
<a href="GameObject.html">GameObject</a> <span class="sig-kw">prefabAssetRoot</span>,
<a href="PrefabReplacingSettings.html">PrefabReplacingSettings</a> <span class="sig-kw">settings</span>,
<a href="InteractionMode.html">InteractionMode</a> <span class="sig-kw">mode</span>);
    </div>
                </div>
              </div>
              <div class="subsection">
                <h3>Parameters</h3>
                <table class="list">
                  <tr>
                    <td class="name lbl">prefabInstanceRoot</td>
                    <td class="desc">The Prefab instance root that will have its Prefab Asset replaced.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">prefabAssetRoot</td>
                    <td class="desc">The new Prefab Asset used for the Prefab instance.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">mode</td>
                    <td class="desc">The interaction mode used.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">settings</td>
                    <td class="desc">The settings used to control the details of the replacement.</td>
                  </tr>
                </table>
              </div>
              <div class="subsection">
                <h3>Description</h3>
                <p>Replace the Prefab Asset for a Prefab instance that exists in a Scene or for a nested Prefab instance inside another Prefab.</p>
              </div>
              <div class="subsection">
        <p>This function will keep the Prefab instance root position, rotation and scale in the Scene but merge the contents from the new Prefab Asset while, by default, maintaining as many overrides and references as possible by using name based matching. Note that the root GameObject and its components will always reuse these objects regardless of the <a href="ObjectMatchMode.html">ObjectMatchMode</a>, so references to these objects will always survive a replacement.
Use <a href="ObjectMatchMode.ByHierarchy.html">ObjectMatchMode.ByHierarchy</a> which will retain references  if GameObjects and Components are matched up using their full GameObject hierarchy path so ensure all siblings have unique names.
When using <a href="ObjectMatchMode.ByName.html">ObjectMatchMode.ByName</a> an object match is only performed if the name match is unique.  It is therefore recommended that the Prefab instance and Prefab Asset only have unique names in the hierarchy of GameObjects. Matching cannot be done for GameObjects with duplicate names.<br /><br />No property overrides are deleted from the serialized state of the Prefab instance so replacing back and forth between different Prefab Assets is a non-destructive action for property overrides. When the final Prefab instance is decided upon then any unused overrides can be cleaned up from either Hierarchy or Overrides window.
Added Components are preserved if a name match exists, otherwise the added Component is deleted. Added GameObjects are preserved by adding them to the root of the new instance if no name match was found for its parent GameObject. Since an added GameObject can have a full hierarchy under it, we leave it to you to decide whether it makes sense to delete the object if it proves redundant on the new instance. This can be done from either the Hierarchy or Overrides window.
For explict control over which overrides should be cleared use the <a href="PrefabReplacingSettings-prefabOverridesOptions.html">PrefabReplacingSettings.prefabOverridesOptions</a> flags found in the <a href="PrefabReplacingSettings.html">PrefabReplacingSettings</a>.<br /><br />Additional resources: <a href="PrefabUtility.ReplacePrefabAssetOfPrefabInstances.html">ReplacePrefabAssetOfPrefabInstances</a>, <a href="PrefabUtility.ConvertToPrefabInstance.html">ConvertToPrefabInstance</a>.</p>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using System.Collections.Generic;
using <a href="UnityEditor.html">UnityEditor</a>;
using UnityEngine;<br /><br />class PrefabReplacing
{
    [<a href="MenuItem.html">MenuItem</a>("Assets/Replace <a href="SceneManagement.Scene.html">Scene</a> <a href="Selection.html">Selection</a> with Prefab <a href="VersionControl.Asset.html">Asset</a>", false, 32)]
    static void ReplaceSelectedWithPrefabInstance(<a href="MenuCommand.html">MenuCommand</a> menuCommand)
    {
        <a href="GameObject.html">GameObject</a> prefabAsset = null;
        var listOfInstanceRoots = new List&lt;<a href="GameObject.html">GameObject</a>&gt;();
        var listOfPlainGameObjects = new List&lt;<a href="GameObject.html">GameObject</a>&gt;();
        foreach (var go in <a href="Selection-gameObjects.html">Selection.gameObjects</a>)
        {
            if (<a href="AssetDatabase.Contains.html">AssetDatabase.Contains</a>(go))
                prefabAsset = go;
            else if (<a href="PrefabUtility.IsOutermostPrefabInstanceRoot.html">PrefabUtility.IsOutermostPrefabInstanceRoot</a>(go))
                listOfInstanceRoots.Add(go);
            else if (!<a href="PrefabUtility.IsPartOfNonAssetPrefabInstance.html">PrefabUtility.IsPartOfNonAssetPrefabInstance</a>(go))
                listOfPlainGameObjects.Add(go);
        }<br /><br />        if (prefabAsset == null || (listOfInstanceRoots.Count == 0 &amp;&amp; listOfPlainGameObjects.Count == 0))
        {
            ShowHelpDialog(prefabAsset);
            return;
        }<br /><br />        if (listOfInstanceRoots.Count &gt; 0)
        {
            var settings = new <a href="PrefabReplacingSettings.html">PrefabReplacingSettings</a>
            {
                logInfo = true,
                objectMatchMode = <a href="ObjectMatchMode.ByHierarchy.html">ObjectMatchMode.ByHierarchy</a>,
                prefabOverridesOptions = <a href="PrefabOverridesOptions.ClearAllNonDefaultOverrides.html">PrefabOverridesOptions.ClearAllNonDefaultOverrides</a>
            };
            <a href="PrefabUtility.ReplacePrefabAssetOfPrefabInstances.html">PrefabUtility.ReplacePrefabAssetOfPrefabInstances</a>(listOfInstanceRoots.ToArray(), prefabAsset, settings, <a href="InteractionMode.UserAction.html">InteractionMode.UserAction</a>);
        }<br /><br />        if (listOfPlainGameObjects.Count &gt; 0)
        {
            var settings = new <a href="ConvertToPrefabInstanceSettings.html">ConvertToPrefabInstanceSettings</a>
            {
                logInfo = true,
                objectMatchMode = <a href="ObjectMatchMode.ByHierarchy.html">ObjectMatchMode.ByHierarchy</a>,
            };
            <a href="PrefabUtility.ConvertToPrefabInstances.html">PrefabUtility.ConvertToPrefabInstances</a>(listOfPlainGameObjects.ToArray(), prefabAsset, settings, <a href="InteractionMode.UserAction.html">InteractionMode.UserAction</a>);
        }
    }<br /><br />    [<a href="MenuItem.html">MenuItem</a>("Assets/Replace <a href="SceneManagement.Scene.html">Scene</a> <a href="Selection.html">Selection</a> with Prefab <a href="VersionControl.Asset.html">Asset</a>", true, 32)]
    static bool ValidateReplaceSelectedWithPrefabInstance(<a href="MenuCommand.html">MenuCommand</a> menuCommand)
    {
        foreach (var go in <a href="Selection-gameObjects.html">Selection.gameObjects</a>)
        {
            if (<a href="AssetDatabase.Contains.html">AssetDatabase.Contains</a>(go))
                return true;
        }<br /><br />        return false;
    }<br /><br />    static void ShowHelpDialog(<a href="GameObject.html">GameObject</a> prefabAsset)
    {
        var helptext = "Please make a multiselection with at least one Prefab instance root or plain <a href="GameObject.html">GameObject</a> in the <a href="SceneManagement.Scene.html">Scene</a> and one Prefab <a href="VersionControl.Asset.html">Asset</a> from the Project Browser. \n\nUse Ctrl/Cmd + Click.";
        <a href="EditorUtility.DisplayDialog.html">EditorUtility.DisplayDialog</a>("Replace Prefab <a href="VersionControl.Asset.html">Asset</a> of Prefab instance", (prefabAsset == null ? "Prefab <a href="VersionControl.Asset.html">Asset</a> missing.\n\n" : "Prefab instance missing.\n\n") + helptext, "OK");
    }
}
</pre>
      </div>
            </div>
            <div class="section">
              <div id="_content">
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">
                  <p>
                    <known_issues>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at </known_issues>
                    <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p>Copyright ©2024 Unity Technologies. Publication Date: 2024-10-03.
                                        </div>
                <div class="menu">
                  <a href="https://unity3d.com/learn">Tutorials</a>
                  <a href="https://answers.unity3d.com">Community Answers</a>
                  <a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a>
                  <a href="https://forum.unity3d.com">Forums</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                  <a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
                  <a href="https://unity.com/legal">Legal</a>
                  <a href="https://unity.com/legal/privacy-policy">Privacy Policy</a>
                  <a href="https://unity.com/legal/cookie-policy">Cookies</a>
                  <a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a>
                  <div id="ot-sdk-btn-container">
                    <a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>