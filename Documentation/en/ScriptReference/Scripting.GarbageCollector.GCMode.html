<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true">
    </script>
    <script type="text/javascript">function OptanonWrapper() {}</script>
    <script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script>
    <script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unity - Scripting API: Scripting.GarbageCollector.GCMode</title>
    <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg" />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../../../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">//toc</script>
    <!--local TOC-->
    <script type="text/javascript" src="docdata/global_toc.js">//toc</script>
    <!--global TOC, including other platforms-->
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/prism.css" />
    <script type="text/javascript" src="../StaticFiles/js/prism.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <script src="/StaticFilesConfig/feedback/feedback.js">
    </script>
    <script src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/mobileoptimisation.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/mobileoptimisation.css" />
  </head>
  <body>
    <div id="DocsAnalyticsData" data-area="none" data-pagetype="scriptref">
    </div>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul>
                <li>
                  <a href="../Manual/index.html">Manual</a>
                </li>
                <li>
                  <a href="../ScriptReference/index.html" class="selected">Scripting API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity.com/">unity.com</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content clear">
          <div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;"><ul id="OtherVersionsContentUl"></ul><div id="otherVersionsLegend"><ul><li><div id="supportedColour" class="legendBox"></div>Supported</li><li><div id="notFoundColour" class="legendBox"></div>Legacy</li></ul></div></div><div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div></div>
          <div class="lang-switcher hide">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">Language<span class="b">English</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a href="">English</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="script-lang">
            <ul>
              <li class="selected" data-lang="CS">C#</li>
            </ul>
          </div>
          <div class="mobileLogo">
            <a href="https://docs.unity3d.com">
            </a>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc" id="customScrollbar">
                <h2>Scripting API</h2>
                <div class="search-form sidebar-search-form">
                  <form action="30_search.html" method="get" class="apisearch">
                    <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                    </input>
                    <input type="submit" id="mobileSearchBtn" class="submit" value="Search">
                    </input>
                  </form>
                </div>
                <div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent">
                  <form id="otherVersionsContentMobileForm">
                    <div class="ui-field-contain">
                      <label for="select-native-4">Version: 2022.3</label>
                      <select name="select-native-4" id="versionsSelectMobile">
                        <option>Select a different version</option>
                        <optgroup id="versionsWithThisPageMobile" label="Versions with this page">
                        </optgroup>
                        <optgroup id="versionsWithoutThisPageMobile" label="Versions without this page">
                        </optgroup>
                      </select>
                    </div>
                  </form>
                </div>
                <div class="lang-switcher hide">
                  <div class="toggle" data-target=".lang-list">
                    <div class="lbl">Language<span class="b">English</span></div>
                    <div class="arrow">
                    </div>
                  </div>
                  <div class="lang-list" style="display:none;">
                    <ul>
                      <li>
                        <a href="">English</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <h1 class="heading inherit">
                  <a href="Scripting.GarbageCollector.html">GarbageCollector</a>.GCMode</h1>
                <div class="clear">
                </div>
                <div class="scrollToFeedback">
                  <a id="scrollToFeedback">Leave feedback</a>
                </div>
                <div class="clear">
                </div>
                <div class="suggest">
                  <a class="blue-btn sbtn">Suggest a change</a>
                  <div class="suggest-wrap rel hide">
                    <div class="loading hide">
                      <div>
                      </div>
                      <div>
                      </div>
                      <div>
                      </div>
                    </div>
                    <div class="suggest-success hide">
                      <h2>Success!</h2>
                      <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-failed hide">
                      <h2>Submission failed</h2>
                      <p>For some reason your suggested change could not be submitted. Please &lt;a&gt;try again&lt;/a&gt; in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-form clear">
                      <label for="suggest_name">Your name</label>
                      <input id="suggest_name" type="text">
                      </input>
                      <label for="suggest_email">Your email</label>
                      <input id="suggest_email" type="email">
                      </input>
                      <label for="suggest_body" class="clear">Suggestion<span class="r">*</span></label>
                      <textarea id="suggest_body" class="req">
                      </textarea>
                      <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                      <p class="mb0">
                        <a class="cancel left lh42 cn">Cancel</a>
                      </p>
                    </div>
                  </div>
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">
                </a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>public static <a href="Scripting.GarbageCollector.Mode.html">Scripting.GarbageCollector.Mode</a> <span class="sig-kw">GCMode</span>;
    </div>
                </div>
              </div>
              <div class="subsection">
                <h3>Description</h3>
                <p>Set and get global garbage collector operation mode.</p>
              </div>
              <div class="subsection">
        <p>Setting the global operation mode changes the garbage collector behaviour for the entire application.<br /><br />Not supported on the WebGL platform and in the Editor.<br /><br />It is recommended that you only change the garbage collector operation mode on the application level and do not change it in third party libraries.<br /><br />Subscribe to the <a href="Scripting.GarbageCollector.GCModeChanged.html">GarbageCollector.GCModeChanged</a> event to get notified when the garbage collector mode is changed.<br /><br /><strong>Disabling the Garbage Collector</strong>
Disabling the garbage collector by assigning <a href="Scripting.GarbageCollector.Mode.Disabled.html">GarbageCollector.Mode.Disabled</a> completely disables the garbage collector. This means that the garbage collector thread will never stop your application to perform a collection. Also, calling System.GC.Collect() will have no effect and will not start a collection. Disabling the garbage collector has to be done with great care, as continuous allocations after disabling the garbage collector will result in a continuous increase in memory usage.<br /><br />It is recommended that you only disable the garbage collector for long lived allocations. For example, in a game you should allocate all required memory for a level and then disable the garbage collector to avoid overhead during the level. After the level is completed and all memory is released, the garbage collector can then be enabled again and System.GC.Collect() can be called to reclaim memory before loading the next level.<br /><br /><strong>Controlling the Garbage Collector manually</strong>
You can set GCMode to <a href="Scripting.GarbageCollector.Mode.Manual.html">GarbageCollector.Mode.Manual</a>. This disables automatic invocations of the garbage collector, but still allows you to manually perform garbage collection. Manual collection gives you control over when collections happen, so you can fine-tune the smoothness of your content or your memory usage. Call either System.GC.Collect() for a full, blocking collection, or <a href="Scripting.GarbageCollector.CollectIncremental.html">GarbageCollector.CollectIncremental</a> to perform incremental garbage collection.<br /><br />Additional resources: <a href="Scripting.GarbageCollector.Mode.Enabled.html">GarbageCollector.Mode.Enabled</a>, <a href="Scripting.GarbageCollector.Mode.Disabled.html">GarbageCollector.Mode.Disabled</a>, <a href="Scripting.GarbageCollector.Mode.Manual.html">GarbageCollector.Mode.Manual</a>.</p>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using UnityEngine;
using UnityEngine.Scripting;<br /><br />public class GarbageCollectorExample
{
    static void ListenForGCModeChange()
    {
        // Listen on garbage collector mode changes.
        <a href="Scripting.GarbageCollector.GCModeChanged.html">GarbageCollector.GCModeChanged</a> += (GarbageCollector.Mode mode) =&gt;
        {
            <a href="Debug.Log.html">Debug.Log</a>("GCModeChanged: " + mode);
        };
    }<br /><br />    static void LogMode()
    {
        <a href="Debug.Log.html">Debug.Log</a>("GCMode: " + <a href="Scripting.GarbageCollector.GCMode.html">GarbageCollector.GCMode</a>);
    }<br /><br />    static void EnableGC()
    {
        <a href="Scripting.GarbageCollector.GCMode.html">GarbageCollector.GCMode</a> = <a href="Scripting.GarbageCollector.Mode.Enabled.html">GarbageCollector.Mode.Enabled</a>;
        // Trigger a collection to free memory.
        GC.Collect();
    }<br /><br />    static void DisableGC()
    {
        <a href="Scripting.GarbageCollector.GCMode.html">GarbageCollector.GCMode</a> = <a href="Scripting.GarbageCollector.Mode.Disabled.html">GarbageCollector.Mode.Disabled</a>;
    }
}
</pre>
      </div>
              <div class="subsection">
        <p>Using the GCMode API.</p>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using UnityEngine;
using UnityEngine.Profiling;
using UnityEngine.Scripting;<br /><br />public class GCManualControl : <a href="MonoBehaviour.html">MonoBehaviour</a>
{
    // Perform an incremental collection every time we allocate more than 8 MB
    const long kCollectAfterAllocating = 8 * 1024 * 1024;<br /><br />    // Perform an instant, full GC if we have more than 128 MB of managed heap.
    const long kHighWater = 128 * 1024 * 1024;<br /><br />    long lastFrameMemory = 0;
    long nextCollectAt = 0;<br /><br />    void Start()
    {
        // Set GC to manual collections only.
        <a href="Scripting.GarbageCollector.GCMode.html">GarbageCollector.GCMode</a> = <a href="Scripting.GarbageCollector.Mode.Manual.html">GarbageCollector.Mode.Manual</a>;
    }<br /><br />    void <a href="PlayerLoop.Update.html">Update</a>()
    {
        long mem = <a href="Profiling.Profiler.GetMonoUsedSizeLong.html">Profiler.GetMonoUsedSizeLong</a>();
        if (mem &lt; lastFrameMemory)
        {
            // GC happened.
            nextCollectAt = mem + kCollectAfterAllocating;
        }
        if (mem &gt; kHighWater)
        {
            // Trigger immediate GC
            System.GC.Collect(0);
        }
        else if (mem &gt;= nextCollectAt)
        {
            // Trigger incremental GC
            UnityEngine.Scripting.GarbageCollector.CollectIncremental();
            lastFrameMemory = mem + kCollectAfterAllocating;
        }
        lastFrameMemory = mem;
    }
}
</pre>
      </div>
              <div class="subsection">
        <p>Manual GC control using GarbageCollector.Mode.Manual.</p>
      </div>
            </div>
            <div class="section">
              <div id="_content">
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">
                  <p>
                    <known_issues>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at </known_issues>
                    <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p>Copyright ©2024 Unity Technologies. Publication Date: 2024-10-03.
                                        </div>
                <div class="menu">
                  <a href="https://unity3d.com/learn">Tutorials</a>
                  <a href="https://answers.unity3d.com">Community Answers</a>
                  <a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a>
                  <a href="https://forum.unity3d.com">Forums</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                  <a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
                  <a href="https://unity.com/legal">Legal</a>
                  <a href="https://unity.com/legal/privacy-policy">Privacy Policy</a>
                  <a href="https://unity.com/legal/cookie-policy">Cookies</a>
                  <a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a>
                  <div id="ot-sdk-btn-container">
                    <a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>