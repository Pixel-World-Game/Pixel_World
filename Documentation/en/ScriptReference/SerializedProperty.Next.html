<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true">
    </script>
    <script type="text/javascript">function OptanonWrapper() {}</script>
    <script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script>
    <script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unity - Scripting API: SerializedProperty.Next</title>
    <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg" />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../../../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">//toc</script>
    <!--local TOC-->
    <script type="text/javascript" src="docdata/global_toc.js">//toc</script>
    <!--global TOC, including other platforms-->
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/prism.css" />
    <script type="text/javascript" src="../StaticFiles/js/prism.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <script src="/StaticFilesConfig/feedback/feedback.js">
    </script>
    <script src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/mobileoptimisation.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/mobileoptimisation.css" />
  </head>
  <body>
    <div id="DocsAnalyticsData" data-area="none" data-pagetype="scriptref">
    </div>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul>
                <li>
                  <a href="../Manual/index.html">Manual</a>
                </li>
                <li>
                  <a href="../ScriptReference/index.html" class="selected">Scripting API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity.com/">unity.com</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content clear">
          <div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2022.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;"><ul id="OtherVersionsContentUl"></ul><div id="otherVersionsLegend"><ul><li><div id="supportedColour" class="legendBox"></div>Supported</li><li><div id="notFoundColour" class="legendBox"></div>Legacy</li></ul></div></div><div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div></div>
          <div class="lang-switcher hide">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">Language<span class="b">English</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a href="">English</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="script-lang">
            <ul>
              <li class="selected" data-lang="CS">C#</li>
            </ul>
          </div>
          <div class="mobileLogo">
            <a href="https://docs.unity3d.com">
            </a>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc" id="customScrollbar">
                <h2>Scripting API</h2>
                <div class="search-form sidebar-search-form">
                  <form action="30_search.html" method="get" class="apisearch">
                    <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                    </input>
                    <input type="submit" id="mobileSearchBtn" class="submit" value="Search">
                    </input>
                  </form>
                </div>
                <div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent">
                  <form id="otherVersionsContentMobileForm">
                    <div class="ui-field-contain">
                      <label for="select-native-4">Version: 2022.3</label>
                      <select name="select-native-4" id="versionsSelectMobile">
                        <option>Select a different version</option>
                        <optgroup id="versionsWithThisPageMobile" label="Versions with this page">
                        </optgroup>
                        <optgroup id="versionsWithoutThisPageMobile" label="Versions without this page">
                        </optgroup>
                      </select>
                    </div>
                  </form>
                </div>
                <div class="lang-switcher hide">
                  <div class="toggle" data-target=".lang-list">
                    <div class="lbl">Language<span class="b">English</span></div>
                    <div class="arrow">
                    </div>
                  </div>
                  <div class="lang-list" style="display:none;">
                    <ul>
                      <li>
                        <a href="">English</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <h1 class="heading inherit">
                  <a href="SerializedProperty.html">SerializedProperty</a>.Next</h1>
                <div class="clear">
                </div>
                <div class="scrollToFeedback">
                  <a id="scrollToFeedback">Leave feedback</a>
                </div>
                <div class="clear">
                </div>
                <div class="suggest">
                  <a class="blue-btn sbtn">Suggest a change</a>
                  <div class="suggest-wrap rel hide">
                    <div class="loading hide">
                      <div>
                      </div>
                      <div>
                      </div>
                      <div>
                      </div>
                    </div>
                    <div class="suggest-success hide">
                      <h2>Success!</h2>
                      <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-failed hide">
                      <h2>Submission failed</h2>
                      <p>For some reason your suggested change could not be submitted. Please &lt;a&gt;try again&lt;/a&gt; in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-form clear">
                      <label for="suggest_name">Your name</label>
                      <input id="suggest_name" type="text">
                      </input>
                      <label for="suggest_email">Your email</label>
                      <input id="suggest_email" type="email">
                      </input>
                      <label for="suggest_body" class="clear">Suggestion<span class="r">*</span></label>
                      <textarea id="suggest_body" class="req">
                      </textarea>
                      <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                      <p class="mb0">
                        <a class="cancel left lh42 cn">Cancel</a>
                      </p>
                    </div>
                  </div>
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">
                </a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>
                    <h2>Declaration</h2>public bool <span class="sig-kw">Next</span>(bool <span class="sig-kw">enterChildren</span>);
    </div>
                </div>
              </div>
              <div class="subsection">
                <h3>Description</h3>
                <p>Move to next property.</p>
              </div>
              <div class="subsection">
        <p>
Update the SerializedProperty so that it points to the next property, in the order of serialization.<br /><br />This is can be used to traverse the state of objects without prior knowledge of their data structures.  It is also an efficient way to iterate through arrays.<br /><br />If the current property is a compound type, such as an struct, array, string, or inline Unity struct such as <a href="Vector3.html">Vector3</a>, then the enterChildren
parameter determines whether to either visit the nested properties or to skip to the property immediately after the compound type.<br /><br />Next will never move to a different Object, so when the current property is of type <a href="SerializedPropertyType.ObjectReference.html">SerializedPropertyType.ObjectReference</a> then calling Next(true)
will not visit the properties of that referenced object.  One way to visit a referenced object is to retrieve the object with
<a href="SerializedProperty-objectReferenceValue.html">SerializedProperty.objectReferenceValue</a> and construct a new SerializedObject instance for that target.<br /><br />If there are no further properties in the SerializedObject, this method will return false, and the SerializedProperty is set to an invalid state that
not longer references a property.
</p>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using System.Collections.Generic;
using System.Text;
using UnityEngine;
using <a href="UnityEditor.html">UnityEditor</a>;<br /><br />public class SerializePropertyNextExample : <a href="ScriptableObject.html">ScriptableObject</a>
{
    public long m_dataFirst = 45;
    public string m_data2 = "hi";<br /><br />    [<a href="Serializable.html">Serializable</a>]
    class NestedInline
    {
        public long[] m_data3 = new long[] {1, 2};
        public bool m_data4 = true;
    }
    [<a href="SerializeField.html">SerializeField</a>]
    NestedInline m_nested;<br /><br />    [<a href="MenuItem.html">MenuItem</a>("Example/<a href="SerializedProperty.html">SerializedProperty</a> Next Example")]
    static void NextExample()
    {
        var scriptableObject = <a href="ScriptableObject.CreateInstance.html">ScriptableObject.CreateInstance</a>&lt;SerializePropertyNextExample&gt;();<br /><br />        using (var serializedObject = new <a href="SerializedObject.html">SerializedObject</a>(scriptableObject))
        {
            var sb = new StringBuilder();<br /><br />            // Visit the top level (depth 0) properties: m_dataFirst, m_data2 and m_nested
            VisitAll(serializedObject, false, sb);<br /><br />            // Visit each property, down to the granularity of individual string and array elements
            VisitAll(serializedObject, true, sb);
            <a href="Debug.Log.html">Debug.Log</a>(sb.ToString());
        }
    }<br /><br />    static void VisitAll(<a href="SerializedObject.html">SerializedObject</a> serializedObject, bool visitChildren, StringBuilder report)
    {
        report.AppendLine($"Traversal result (visitChildren: {visitChildren})");<br /><br />        // Start at the first field, instead of using GetIterator(), in order to skip past the internal properties
        var serializedProperty = serializedObject.FindProperty("m_dataFirst");
        do
        {
            report.AppendLine($"\tFound {serializedProperty.propertyPath} (depth {serializedProperty.depth})");
        }
        while (serializedProperty.Next(visitChildren));
    }
}
</pre>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using System.Text;
using UnityEngine;
using <a href="UnityEditor.html">UnityEditor</a>;<br /><br />public class SerializePropertyArrayEnumerationWithNextExample : <a href="ScriptableObject.html">ScriptableObject</a>
{
    // Example of enumerating the elements of an array of struct using Next()
    [<a href="Serializable.html">Serializable</a>]
    public struct Data
    {
        public int m_Data1;
        public string m_Data2;
    }<br /><br />    public Data[] m_Data;
    public bool m_BeyondData;<br /><br />    [<a href="MenuItem.html">MenuItem</a>("Example/<a href="SerializedProperty.html">SerializedProperty</a> Array Enumeration Using Next")]
    static void TestArrayEnumeration()
    {
        var scriptableObject = <a href="ScriptableObject.CreateInstance.html">ScriptableObject.CreateInstance</a>&lt;SerializePropertyArrayEnumerationWithNextExample&gt;();
        scriptableObject.m_Data = new Data[]
        {
            new Data() { m_Data1 = 0, m_Data2 = "zero" },
            new Data() { m_Data1 = 1, m_Data2 = "one" },
            new Data() { m_Data1 = 2, m_Data2 = "two" }
        };<br /><br />        var report = new StringBuilder();<br /><br />        using (var serializedObject = new <a href="SerializedObject.html">SerializedObject</a>(scriptableObject))
        {
            var arrayProperty = serializedObject.FindProperty("m_Data");<br /><br />            var arrayElement = arrayProperty.GetArrayElementAtIndex(0);
            var arraySize = arrayProperty.arraySize;<br /><br />            for (int i = 0; i &lt; arraySize; i++)
            {
                ReportElement(arrayElement, i, report);
                arrayElement.Next(false);
            }
        }
        <a href="Debug.Log.html">Debug.Log</a>(report.ToString());
    }<br /><br />    static void ReportElement(<a href="SerializedProperty.html">SerializedProperty</a> arrayElement, int index, StringBuilder report)
    {
        var data1 = arrayElement.FindPropertyRelative("m_Data1").intValue;
        var data2 = arrayElement.FindPropertyRelative("m_Data2").stringValue;
        report.AppendLine($"Visiting Index {index}: {data1}, {data2}");
    }
}
</pre>
      </div>
              <div class="subsection">
        <p>If a SerializedProperty is referencing a ManagedReference, e.g. a field with the <a href="SerializeReference.html">SerializeReference</a> attribute, and Next is called with enterChildren set to true, then the SerializedProperty will move to the first property inside the managed object.
Because managed references can form cyclical graphs, calling Next(true) blindly could potentially cause an endless loop.  The following example demonstrates a technique to avoid that.</p>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using System.Collections.Generic;
using System.Text;
using UnityEngine;
using <a href="UnityEditor.html">UnityEditor</a>;<br /><br />[CreateAssetMenu]
public class SerializePropertyNextSerializeReferenceExample : <a href="ScriptableObject.html">ScriptableObject</a>
{
    [<a href="Serializable.html">Serializable</a>]
    public class <a href="Experimental.GraphView.Node.html">Node</a>
    {
        public int m_Data;
        public string m_Data2;<br /><br />        [<a href="SerializeReference.html">SerializeReference</a>]
        public <a href="Experimental.GraphView.Node.html">Node</a> m_Child1 = null;<br /><br />        [<a href="SerializeReference.html">SerializeReference</a>]
        public <a href="Experimental.GraphView.Node.html">Node</a> m_Child2 = null;
    }<br /><br />    [<a href="SerializeReference.html">SerializeReference</a>]
    public <a href="Experimental.GraphView.Node.html">Node</a> m_Front = null;<br /><br />    [<a href="MenuItem.html">MenuItem</a>("Example/<a href="SerializedProperty.html">SerializedProperty</a> Next Cyclic Graph Example")]
    static void TestNextOnCyclicGraph()
    {
        var scriptableObject = <a href="ScriptableObject.CreateInstance.html">ScriptableObject.CreateInstance</a>&lt;SerializePropertyNextSerializeReferenceExample&gt;();<br /><br />        // Setup a graph of 3 nodes that has several cycles
        scriptableObject.m_Front = new <a href="Experimental.GraphView.Node.html">Node</a>() { m_Data = 1, m_Data2 = "First <a href="Experimental.GraphView.Node.html">Node</a>" };<br /><br />        var node2 = new <a href="Experimental.GraphView.Node.html">Node</a>() { m_Data = 2, m_Data2 = "Second <a href="Experimental.GraphView.Node.html">Node</a>", m_Child1 = scriptableObject.m_Front };
        scriptableObject.m_Front.m_Child1 = node2;<br /><br />        var node3 = new <a href="Experimental.GraphView.Node.html">Node</a>() { m_Data = 3, m_Data2 = "Third <a href="Experimental.GraphView.Node.html">Node</a>" };
        scriptableObject.m_Front.m_Child2 = node3;
        node2.m_Child2 = node3;
        node3.m_Child1 = scriptableObject.m_Front;<br /><br />        using (var serializedObject = new <a href="SerializedObject.html">SerializedObject</a>(scriptableObject))
        {
            var serializedProperty = serializedObject.FindProperty("m_Front");<br /><br />            var sb = new StringBuilder();
            sb.AppendLine("Graph traversal result:");<br /><br />            // Track visited <a href="Experimental.GraphView.Node.html">Node</a> objects by managed reference id to prevent endless looping
            var visitedNodes = new HashSet&lt;long&gt;();<br /><br />            bool visitChild;
            do
            {
                // default is false so we don't enumerate each character of each string,
                visitChild = false;<br /><br />                if (serializedProperty.propertyType == <a href="SerializedPropertyType.ManagedReference.html">SerializedPropertyType.ManagedReference</a>)
                {
                    long refId = serializedProperty.managedReferenceId;
                    if (visitedNodes.Add(refId))
                        visitChild = true; // First time seeing node, so visit it
                }
                else if (serializedProperty.propertyType == <a href="SerializedPropertyType.String.html">SerializedPropertyType.String</a>)
                {
                    sb.AppendLine($"Found {serializedProperty.propertyPath} : {serializedProperty.stringValue}");
                }
                else if (serializedProperty.propertyType == <a href="SerializedPropertyType.Integer.html">SerializedPropertyType.Integer</a>)
                {
                    sb.AppendLine($"Found {serializedProperty.propertyPath} : {serializedProperty.intValue}");
                }
            }
            while (serializedProperty.Next(visitChild));<br /><br />            /*Expected output
            Graph traversal result:
            Found m_Front.m_Data : 1
            Found m_Front.m_Data2 : First <a href="Experimental.GraphView.Node.html">Node</a>
            Found m_Front.m_Child1.m_Data : 2
            Found m_Front.m_Child1.m_Data2 : Second <a href="Experimental.GraphView.Node.html">Node</a>
            Found m_Front.m_Child1.m_Child2.m_Data : 3
            Found m_Front.m_Child1.m_Child2.m_Data2 : Third <a href="Experimental.GraphView.Node.html">Node</a>
            */
            <a href="Debug.Log.html">Debug.Log</a>(sb.ToString());
        }
    }
}
</pre>
      </div>
              <div class="subsection">
        <p>Additional resources: <a href="SerializedProperty.NextVisible.html">NextVisible</a>, <a href="SerializedProperty-hasChildren.html">hasChildren</a>, <a href="SerializedProperty.Reset.html">Reset</a>, <a href="SerializedProperty-depth.html">depth</a>, <a href="SerializedObject.GetIterator.html">SerializedObject.GetIterator</a>, <a href="SerializedProperty.GetEndProperty.html">GetEndProperty</a>.</p>
      </div>
            </div>
            <div class="section">
              <div id="_content">
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">
                  <p>
                    <known_issues>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at </known_issues>
                    <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p>Copyright ©2024 Unity Technologies. Publication Date: 2024-10-03.
                                        </div>
                <div class="menu">
                  <a href="https://unity3d.com/learn">Tutorials</a>
                  <a href="https://answers.unity3d.com">Community Answers</a>
                  <a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a>
                  <a href="https://forum.unity3d.com">Forums</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                  <a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
                  <a href="https://unity.com/legal">Legal</a>
                  <a href="https://unity.com/legal/privacy-policy">Privacy Policy</a>
                  <a href="https://unity.com/legal/cookie-policy">Cookies</a>
                  <a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a>
                  <div id="ot-sdk-btn-container">
                    <a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>